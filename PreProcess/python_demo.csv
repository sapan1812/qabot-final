,Id,Tag,Q_Score,Title,Q_Body,A_Body,A_Score
267,152580,python,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
","<p><code>isinstance(o, str)</code> will return <code>true</code> if <code>o</code> is an <code>str</code> or is of a type that inherits from <code>str</code>.</p>

<p><code>type(o) == str</code> will return <code>true</code> if and only if <code>o</code> is a str. It will return <code>false</code> if <code>o</code> is of a type that inherits from <code>str</code>.</p>
",22
270,152580,python,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
","<p>The <strong>most</strong> Pythonic way to check the type of an object is... not to check it.</p>

<p>Since Python encourages <a href=""http://wikipedia.org/wiki/Duck_typing"">Duck Typing</a>, you should just try to use the object's methods the way you want to use them.  So if your function is looking for a writable file object, <em>don't</em> check that it's a subclass of <code>file</code>, just try to use its <code>.write()</code> method!</p>

<p>Of course, sometimes these nice abstractions break down and <code>isinstance(obj, cls)</code> is what you need.  But use sparingly.</p>
",105
269,152580,python,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
","<p>I think the cool thing about using a dynamic language like python is you really shouldn't have to check something like that.</p>

<p>I would just call the required methods on your object and catch an <code>AttributeError</code>. Later on this will allow you to call your methods with other (seemingly unrelated) objects to accomplish different tasks, such as mocking an object for testing.</p>

<p>I've used this alot when getting data off the web with <code>urllib2.urlopen()</code> which returns a <em>file like</em> object. This can in turn can be passed to almost any method that reads from a file, because is implements the same <code>read()</code> method as a real file.</p>

<p>But I'm sure there is a time and place for using <code>isinstance()</code>, otherwise it probably wouldn't be there :)</p>
",4
268,152580,python,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
","<p>To check if the type of <code>o</code> is exactly <code>str</code>:</p>

<pre><code>type(o) is str
</code></pre>

<p>To check if <code>o</code> is an instance of <code>str</code> or any subclass of <code>str</code> (this would be the ""canonical"" way):</p>

<pre><code>isinstance(o, str)
</code></pre>

<p>The following also works, and can be useful in some cases:</p>

<pre><code>issubclass(type(o), str)
type(o) in ([str] + str.__subclasses__())
</code></pre>

<p>See <a href=""http://docs.python.org/2/library/functions.html"">Built-in Functions</a> in the Python Library Reference for relevant information.</p>

<p>One more note: in this case, you may actually want to use:</p>

<pre><code>isinstance(o, basestring)
</code></pre>

<p>because this will also catch Unicode strings (<code>unicode</code> is not a subclass of <code>str</code>; both <code>str</code> and <code>unicode</code> are subclasses of <code>basestring</code>).</p>

<p>Alternatively, <code>isinstance</code> accepts a tuple of classes. This will return True if x is an instance of any subclass of any of (str, unicode):</p>

<pre><code>isinstance(o, (str, unicode))
</code></pre>
",735
266,152580,python,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
","<pre><code>isinstance(o, str)
</code></pre>

<p><a href=""http://docs.python.org/lib/built-in-funcs.html"">Link</a></p>
",11
282,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>There is <a href=""http://www.python.org/dev/peps/pep-0008/"">PEP 8</a>, as other answers show, but PEP 8 is only the styleguide for the standard library, and it's only taken as gospel therein. One of the most frequent deviations of PEP 8 for other pieces of code is the variable naming, specifically for methods. There is no single predominate style, although considering the volume of code that uses mixedCase, if one were to make a strict census one would probably end up with a version of PEP 8 with mixedCase. There is little other deviation from PEP 8 that is quite as common.</p>
",26
283,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>Most python people prefer underscores, but even I am using python since more than 5 years right now, I still do not like them. They just look ugly to me, but maybe that's all the Java in my head. </p>

<p>I simply like CamelCase better since it fits better with the way classes are named, It feels more logical to have <code>SomeClass.doSomething()</code> than <code>SomeClass.do_something()</code>. If you look around in the global module index in python, you will find both, which is due to the fact that it's a collection of libraries from various sources that grew overtime and not something that was developed by one company like Sun with strict coding rules. I would say the bottom line is: Use whatever you like better, it's just a question of personal taste.</p>
",11
284,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>Personally I try to use CamelCase for classes, mixedCase methods and functions. Variables are usually underscore separated (when I can remember). This way I can tell at a glance what exactly I'm calling, rather than everything looking the same.</p>
",9
280,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>See Python <a href=""http://www.python.org/dev/peps/pep-0008/"">PEP 8</a>.</p>

<blockquote>
  <p>Function names should be lowercase,
  with words separated by underscores as
  necessary to improve readability.</p>
  
  <p>mixedCase is allowed only in contexts
  where that's already the prevailing
  style</p>
</blockquote>

<p>Variables...</p>

<blockquote>
  <p>Use the function naming rules:
  lowercase with words separated by
  underscores as necessary to improve
  readability.</p>
</blockquote>

<p>Personally, I deviate from this because I also prefer <code>mixedCase</code> over <code>lower_case</code> for my own projects.</p>
",381
286,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>Typically, one follow the conventions used in the language's standard library.</p>
",2
281,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>The coding style is usually part of an organization's internal policy/convention standards, but I think in general, the all_lower_case_underscore_separator style (also called snake_case) is most common in python. </p>
",0
285,159720,python,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
","<p>David Goodger (in ""Code Like a Pythonista"" <a href=""http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html"">here</a>)  describes the PEP 8 recommendations as follows:</p>

<ul>
<li><p><code>joined_lower</code> for functions, methods,
attributes, variables</p></li>
<li><p><code>joined_lower</code> or <code>ALL_CAPS</code> for
constants</p></li>
<li><p><code>StudlyCaps</code> for classes</p></li>
<li><p><code>camelCase</code> only to conform to
pre-existing conventions</p></li>
</ul>
",150
59,51520,python,308,How to get an absolute file path in Python,"<p>Given a path such as <code>""mydir/myfile.txt""</code>, how do I find the absolute filepath relative to the current working directory in Python? E.g. on Windows, I might end up with:</p>

<pre><code>""C:/example/cwd/mydir/myfile.txt""
</code></pre>
","<p>Better still, install the <a href=""http://pypi.python.org/pypi/path.py/2.2""><code>path.py</code></a> module, it wraps all the <code>os.path</code> functions and other related functions into methods on an object that can be used wherever strings are used:</p>

<pre><code>&gt;&gt;&gt; from path import path
&gt;&gt;&gt; path('mydir/myfile.txt').abspath()
'C:\\example\\cwd\\mydir\\myfile.txt'
&gt;&gt;&gt;
</code></pre>
",13
57,51520,python,308,How to get an absolute file path in Python,"<p>Given a path such as <code>""mydir/myfile.txt""</code>, how do I find the absolute filepath relative to the current working directory in Python? E.g. on Windows, I might end up with:</p>

<pre><code>""C:/example/cwd/mydir/myfile.txt""
</code></pre>
","<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.path.abspath(""mydir/myfile.txt"")
</code></pre>
",424
58,51520,python,308,How to get an absolute file path in Python,"<p>Given a path such as <code>""mydir/myfile.txt""</code>, how do I find the absolute filepath relative to the current working directory in Python? E.g. on Windows, I might end up with:</p>

<pre><code>""C:/example/cwd/mydir/myfile.txt""
</code></pre>
","<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.path.abspath('mydir/myfile.txt')
'C:\\example\\cwd\\mydir\\myfile.txt'
&gt;&gt;&gt;
</code></pre>
",32
43,42950,python,306,Get Last Day of the Month in Python,"<p>Is there a way using Python's standard library to easily determine (i.e. one function call) the last day of a given month?</p>

<p>If the standard library doesn't support that, does the dateutil package support this?</p>
","<p>I didn't notice this earlier when I was looking at the <a href=""https://docs.python.org/2/library/calendar.html"">documentation for the calendar module</a>, but a method called <a href=""http://docs.python.org/library/calendar.html#calendar.monthrange"">monthrange</a> provides this information:</p>

<blockquote>
  <p><b>monthrange(year, month)</b><br>
  &nbsp;&nbsp;&nbsp;&nbsp;Returns weekday of first day of the month and number of days in month, for the specified year and month. </p>
</blockquote>

<pre><code>&gt;&gt;&gt; import calendar
&gt;&gt;&gt; calendar.monthrange(2002,1)
(1, 31)
&gt;&gt;&gt; calendar.monthrange(2008,2)
(4, 29)
&gt;&gt;&gt; calendar.monthrange(2100,2)
(0, 28)
</code></pre>

<p>so:</p>

<pre><code>calendar.monthrange(year, month)[1]
</code></pre>

<p>seems like the simplest way to go.</p>

<p>Just to be clear, <code>monthrange</code> supports leap years as well:</p>

<pre><code>&gt;&gt;&gt; from calendar import monthrange
&gt;&gt;&gt; monthrange(2012, 2)
(2, 29)
</code></pre>

<p><a href=""http://stackoverflow.com/questions/42950/get-last-day-of-the-month-in-python#43088"">My previous answer</a> still works, but is clearly suboptimal.</p>
",552
42,42950,python,306,Get Last Day of the Month in Python,"<p>Is there a way using Python's standard library to easily determine (i.e. one function call) the last day of a given month?</p>

<p>If the standard library doesn't support that, does the dateutil package support this?</p>
","<p>EDIT: see my other answer. It has a better implementation than this one, which I leave here just in case someone's interested in seeing how one might ""roll your own"" calculator.</p>

<p>@<a href=""#42997"">John Millikin</a> gives a good answer, with the added complication of calculating the first day of the next month.</p>

<p>The following isn't particularly elegant, but to figure out the last day of the month that any given date lives in, you could try:</p>

<pre><code>def last_day_of_month(date):
    if date.month == 12:
        return date.replace(day=31)
    return date.replace(month=date.month+1, day=1) - datetime.timedelta(days=1)

&gt;&gt;&gt; last_day_of_month(datetime.date(2002, 1, 17))
datetime.date(2002, 1, 31)
&gt;&gt;&gt; last_day_of_month(datetime.date(2002, 12, 9))
datetime.date(2002, 12, 31)
&gt;&gt;&gt; last_day_of_month(datetime.date(2008, 2, 14))
datetime.date(2008, 2, 29)
</code></pre>
",32
41,42950,python,306,Get Last Day of the Month in Python,"<p>Is there a way using Python's standard library to easily determine (i.e. one function call) the last day of a given month?</p>

<p>If the standard library doesn't support that, does the dateutil package support this?</p>
","<p>EDIT: See @<a href=""#43663"">Blair Conrad's answer</a> for a cleaner solution</p>

<p><hr /></p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; datetime.date (2000, 2, 1) - datetime.timedelta (days = 1)
datetime.date(2000, 1, 31)
&gt;&gt;&gt;
</code></pre>
",43
189,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p><strong>Starting with Python 2.6</strong> (and if you're on Python 3) you have a <strong>standard-library</strong> tool for this: <a href=""https://docs.python.org/2/library/itertools.html#itertools.permutations""><code>itertools.permutations</code></a>.</p>

<hr>

<p>If you're using an <strong>older Python (&lt;2.6)</strong> for some reason or are just curious to know how it works, here's one nice approach, taken from  <a href=""http://code.activestate.com/recipes/252178/"">http://code.activestate.com/recipes/252178/</a>:</p>

<pre><code>def all_perms(elements):
    if len(elements) &lt;=1:
        yield elements
    else:
        for perm in all_perms(elements[1:]):
            for i in range(len(elements)):
                # nb elements[0:1] works in both string and list contexts
                yield perm[:i] + elements[0:1] + perm[i:]
</code></pre>

<p>A couple of alternative approaches are listed in the documentation of <code>itertools.permutations</code>. Here's one:</p>

<pre><code>def permutations(iterable, r=None):
    # permutations('ABCD', 2) --&gt; AB AC AD BA BC BD CA CB CD DA DB DC
    # permutations(range(3)) --&gt; 012 021 102 120 201 210
    pool = tuple(iterable)
    n = len(pool)
    r = n if r is None else r
    if r &gt; n:
        return
    indices = range(n)
    cycles = range(n, n-r, -1)
    yield tuple(pool[i] for i in indices[:r])
    while n:
        for i in reversed(range(r)):
            cycles[i] -= 1
            if cycles[i] == 0:
                indices[i:] = indices[i+1:] + indices[i:i+1]
                cycles[i] = n - i
            else:
                j = cycles[i]
                indices[i], indices[-j] = indices[-j], indices[i]
                yield tuple(pool[i] for i in indices[:r])
                break
        else:
            return
</code></pre>

<p>And another, based on <code>itertools.product</code>:</p>

<pre><code>def permutations(iterable, r=None):
    pool = tuple(iterable)
    n = len(pool)
    r = n if r is None else r
    for indices in product(range(n), repeat=r):
        if len(set(indices)) == r:
            yield tuple(pool[i] for i in indices)
</code></pre>
",190
193,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p><em>The following code with Python 2.6 and above ONLY</em></p>

<p>First, import <code>itertools</code>:</p>

<pre><code>import itertools
</code></pre>

<h3>Permutation (order matters):</h3>

<pre><code>print list(itertools.permutations([1,2,3,4], 2))
[(1, 2), (1, 3), (1, 4),
(2, 1), (2, 3), (2, 4),
(3, 1), (3, 2), (3, 4),
(4, 1), (4, 2), (4, 3)]
</code></pre>

<h3>Combination (order does NOT matter):</h3>

<pre><code>print list(itertools.combinations('123', 2))
[('1', '2'), ('1', '3'), ('2', '3')]
</code></pre>

<h3>Cartesian product (with several iterables):</h3>

<pre><code>print list(itertools.product([1,2,3], [4,5,6]))
[(1, 4), (1, 5), (1, 6),
(2, 4), (2, 5), (2, 6),
(3, 4), (3, 5), (3, 6)]
</code></pre>

<h3>Cartesian product (with one iterable and itself):</h3>

<pre><code>print list(itertools.product([1,2], repeat=3))
[(1, 1, 1), (1, 1, 2), (1, 2, 1), (1, 2, 2),
(2, 1, 1), (2, 1, 2), (2, 2, 1), (2, 2, 2)]
</code></pre>
",177
192,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p>The following code is an in-place permutation of a given list, implemented as a generator. Since it only returns references to the list, the list should not be modified outside the generator.
The solution is non-recursive, so uses low memory. Work well also with multiple copies of elements in the input list.</p>

<pre><code>def permute_in_place(a):
    a.sort()
    yield list(a)

    if len(a) &lt;= 1:
        return

    first = 0
    last = len(a)
    while 1:
        i = last - 1

        while 1:
            i = i - 1
            if a[i] &lt; a[i+1]:
                j = last - 1
                while not (a[i] &lt; a[j]):
                    j = j - 1
                a[i], a[j] = a[j], a[i] # swap the values
                r = a[i+1:last]
                r.reverse()
                a[i+1:last] = r
                yield list(a)
                break
            if i == first:
                a.reverse()
                return

if __name__ == '__main__':
    for n in range(5):
        for a in permute_in_place(range(1, n+1)):
            print a
        print

    for a in permute_in_place([0, 0, 1, 1, 1]):
        print a
    print
</code></pre>
",10
191,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p>Forgive my python illiteracy as I won't be offering the solution in python.
As I do not know what method python 2.6 uses to generate the permutations and eliben's one looks like Johnson-Trotter permutation generation, you might look for article
in Wikipedia on <a href=""http://en.wikipedia.org/wiki/Permutation#Algorithms_to_generate_permutations"" rel=""nofollow"">Permutations and their generation</a> that looks quite like unrank function in <a href=""http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.43.4521"" rel=""nofollow"">paper by Myrvold and Ruskey</a>.</p>

<p>It would seem to me that this could be used in a generator in the same way as in other replies to lessen the memory requirement considerably. Just remember that the permutations will not be in lexicographic order.</p>
",2
190,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p>And in <a href=""http://docs.python.org/dev/whatsnew/2.6.html"">Python 2.6</a> onwards:</p>

<pre><code>import itertools
itertools.permutations([1,2,3])
</code></pre>

<p>(returned as a generator.  Use <code>list(permutations(l))</code> to return as a list.)</p>
",255
188,104420,python,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
","<p>This solution implements a generator, to avoid holding all the permutations on memory:</p>

<pre><code>def permutations (orig_list):
    if not isinstance(orig_list, list):
        orig_list = list(orig_list)

    yield orig_list

    if len(orig_list) == 1:
        return

    for n in sorted(orig_list):
        new_list = orig_list[:]
        pos = new_list.index(n)
        del(new_list[pos])
        new_list.insert(0, n)
        for resto in permutations(new_list[1:]):
            if new_list[:1] + resto &lt;&gt; orig_list:
                yield new_list[:1] + resto
</code></pre>
",15
346,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>What if we only insert an additional blank line between the condition and the body and do the rest in the canonical way?</p>

<pre><code>if (cond1 == 'val1' and cond2 == 'val2' and
    cond3 == 'val3' and cond4 == 'val4'):

    do_something
</code></pre>

<p>p.s. I always use tabs, not spaces; I cannot fine-tune...</p>
",2
253,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>The quickest way to do this is using <a href=""http://www.swig.org/"">SWIG</a>.</p>

<p>Example from SWIG <a href=""http://www.swig.org/tutorial.html"">tutorial</a>:</p>

<pre><code>/* File : example.c */
int fact(int n) {
    if (n &lt;= 1) return 1;
    else return n*fact(n-1);
}
</code></pre>

<p>Interface file:</p>

<pre><code>/* example.i */
%module example
%{
/* Put header files here or function declarations like below */
extern int fact(int n);
%}

extern int fact(int n);
</code></pre>

<p>Building a Python module on Unix:</p>

<pre><code>swig -python example.i
gcc -fPIC -c example.c example_wrap.c -I/usr/local/include/python2.7
gcc -shared example.o example_wrap.o -o _example.so
</code></pre>

<p>Usage:</p>

<pre><code>&gt;&gt;&gt; import example
&gt;&gt;&gt; example.fact(5)
120
</code></pre>

<p>Note that you have to have python-dev. Also in some systems python header files will be in /usr/include/python2.7 based on the way you have installed it.</p>

<p>From the tutorial:</p>

<blockquote>
  <p>SWIG is a fairly complete C++ compiler with support for nearly every language feature. This includes preprocessing, pointers, classes, inheritance, and even C++ templates. SWIG can also be used to package structures and classes into proxy classes in the target language â exposing the underlying functionality in a very natural manner.</p>
</blockquote>
",23
254,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>Iâve never used it but Iâve heard good things about <a href=""https://docs.python.org/3.6/library/ctypes.html"">ctypes</a>. If youâre trying to use it with C++, be sure to evade name mangling via <a href=""http://stackoverflow.com/q/1041866/2157640""><code>extern ""C""</code></a>. <em>Thanks for the comment, Florian BÃ¶sch.</em></p>
",12
255,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p><a href=""http://openwetware.org/wiki/Julius_B._Lucks/Projects/Python_All_A_Scientist_Needs"">This paper, claiming python to be all a scientist needs,</a> basically says: first prototype everything in Python. Then when you need to speed a part up, use SWIG and translate this part to C.</p>
",9
256,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>One of the official Python documents contains details on <a href=""https://docs.python.org/3.6/extending/"" rel=""nofollow"">extending Python using C/C++</a>.
Even without the use of <a href=""http://www.swig.org/"" rel=""nofollow"">SWIG</a>, itâs quite straightforward and works perfectly well on Windows.</p>
",2
257,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>Check out <a href=""http://www.cosc.canterbury.ac.nz/greg.ewing/python/Pyrex/"">pyrex</a> or <a href=""http://cython.org/"">cython</a>.  They're python-like languages for interfacing between C/C++ and python.</p>
",16
258,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>You should have a look at <a href=""http://www.boost.org/doc/libs/1_49_0/libs/python/doc/"">Boost.Python</a>, here is the short introdution taken from their website:</p>

<blockquote>
  <p>The Boost Python Library is a framework for interfacing Python and
  C++. It allows you to quickly and seamlessly expose C++ classes
  functions and objects to Python, and vice-versa, using no special
  tools -- just your C++ compiler. It is designed to wrap C++ interfaces
  non-intrusively, so that you should not have to change the C++ code at
  all in order to wrap it, making Boost.Python ideal for exposing
  3rd-party libraries to Python. The library's use of advanced
  metaprogramming techniques simplifies its syntax for users, so that
  wrapping code takes on the look of a kind of declarative interface
  definition language (IDL).</p>
</blockquote>
",69
338,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>This doesn't improve so much but...</p>

<pre><code>allCondsAreOK = (cond1 == 'val1' and cond2 == 'val2' and
                 cond3 == 'val3' and cond4 == 'val4')

if allCondsAreOK:
   do_something
</code></pre>
",11
339,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>You don't need to use 4 spaces on your second conditional line.  Maybe use:</p>

<pre><code>if (cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'):
    do_something
</code></pre>

<p>Also, don't forget the whitespace is more flexible than you might think:</p>

<pre><code>if (   
       cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'
   ):
    do_something
if    (cond1 == 'val1' and cond2 == 'val2' and 
       cond3 == 'val3' and cond4 == 'val4'):
    do_something
</code></pre>

<p>Both of those are fairly ugly though.</p>

<p>Maybe lose the brackets (the <a href=""https://www.python.org/dev/peps/pep-0008/#multiline-if-statements"">Style Guide</a> discourages this though)?</p>

<pre><code>if cond1 == 'val1' and cond2 == 'val2' and \
   cond3 == 'val3' and cond4 == 'val4':
    do_something
</code></pre>

<p>This at least gives you some differentiation.</p>

<p>Or even:</p>

<pre><code>if cond1 == 'val1' and cond2 == 'val2' and \
                       cond3 == 'val3' and \
                       cond4 == 'val4':
    do_something
</code></pre>

<p>I think I prefer:</p>

<pre><code>if cond1 == 'val1' and \
   cond2 == 'val2' and \
   cond3 == 'val3' and \
   cond4 == 'val4':
    do_something
</code></pre>

<p>Here's the <a href=""https://www.python.org/dev/peps/pep-0008/#multiline-if-statements"">Style Guide</a>, which (since 2010) recommends using brackets.</p>
",296
340,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>I suggest moving the <code>and</code> keyword to the second line and indenting all lines containing conditions with two spaces instead of four:</p>

<pre><code>if (cond1 == 'val1' and cond2 == 'val2'
  and cond3 == 'val3' and cond4 == 'val4'):
    do_something
</code></pre>

<p>This is exactly how I solve this problem in my code. Having a keyword as the first word in the line makes the condition a lot more readable, and reducing the number of spaces further distinguishes condition from action.</p>
",13
341,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>I prefer this style when I have a terribly large if-condition:</p>

<pre><code>if (
  expr1
  and (expr2 or expr3)
  and hasattr(thingy1, '__eq__')
  or status==""HappyTimes""
):
  do_stuff()
else:
  do_other_stuff()
</code></pre>
",11
342,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>I've resorted to the following in the degenerate case where it's simply AND's or OR's.</p>

<pre><code>if all( [cond1 == 'val1', cond2 == 'val2', cond3 == 'val3', cond4 == 'val4'] ):

if any( [cond1 == 'val1', cond2 == 'val2', cond3 == 'val3', cond4 == 'val4'] ):
</code></pre>

<p>It shaves a few characters and makes it clear that there's no subtlety to the condition.</p>
",61
343,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>""all"" and ""any"" are nice for the many conditions of same type case. BUT they always evaluates all conditions. As shown in this example:</p>

<pre><code>def c1():
    print "" Executed c1""
    return False
def c2():
    print "" Executed c2""
    return False


print ""simple and (aborts early!)""
if c1() and c2():
    pass

print

print ""all (executes all :( )""
if all((c1(),c2())):
    pass

print
</code></pre>
",2
344,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p><em>Someone</em> has to champion use of vertical whitespace here! :)</p>

<pre><code>if (     cond1 == val1
     and cond2 == val2
     and cond3 == val3
   ):
    do_stuff()
</code></pre>

<p>This makes each condition clearly visible. It also allows cleaner expression of more complex conditions:</p>

<pre><code>if (    cond1 == val1
     or 
        (     cond2_1 == val2_1
          and cond2_2 &gt;= val2_2
          and cond2_3 != bad2_3
        )
   ):
    do_more_stuff()
</code></pre>

<p>Yes, we're trading off a bit of vertical real estate for clarity. Well worth it IMO.</p>
",27
345,181530,python,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
","<p>Just a few other random ideas for completeness's sake.  If they work for you, use them.  Otherwise, you're probably better off trying something else.</p>

<p>You could also do this with a dictionary:</p>

<pre><code>&gt;&gt;&gt; x = {'cond1' : 'val1', 'cond2' : 'val2'}
&gt;&gt;&gt; y = {'cond1' : 'val1', 'cond2' : 'val2'}
&gt;&gt;&gt; x == y
True
</code></pre>

<p>This option is more complicated, but you may also find it useful:</p>

<pre><code>class Klass(object):
    def __init__(self, some_vars):
        #initialize conditions here
    def __nonzero__(self):
        return (self.cond1 == 'val1' and self.cond2 == 'val2' and
                self.cond3 == 'val3' and self.cond4 == 'val4')

foo = Klass()
if foo:
    print ""foo is true!""
else:
    print ""foo is false!""
</code></pre>

<p>Dunno if that works for you, but it's another option to consider.  Here's one more way:</p>

<pre><code>class Klass(object):
    def __init__(self):
        #initialize conditions here
    def __eq__(self):
        return (self.cond1 == 'val1' and self.cond2 == 'val2' and
               self.cond3 == 'val3' and self.cond4 == 'val4')

x = Klass(some_values)
y = Klass(some_other_values)
if x == y:
    print 'x == y'
else:
    print 'x!=y'
</code></pre>

<p>The last two I haven't tested, but the concepts should be enough to get you going if that's what you want to go with.</p>

<p>(And for the record, if this is just a one time thing, you're probably just better off using the method you presented at first.  If you're doing the comparison in lots of places, these methods may enhance readability enough to make you not feel so bad about the fact that they are kind of hacky.)</p>
",1
259,145270,python,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
","<p>I like <a href=""http://docs.python.org/2/library/ctypes.html"">ctypes</a> a lot, <a href=""http://www.swig.org/"">swig</a> always tended to give me <a href=""http://groups.google.com/group/comp.lang.python/browse_thread/thread/d94badd9847fe43a?pli=1"">problems</a>. Also ctypes has the advantage that you don't need to satisfy any compile time dependency on python, and your binding will work on any python that has ctypes, not just the one it was compiled against.</p>

<p>Suppose you have a simple C++ example class you want to talk to in a file called foo.cpp:</p>

<pre><code>#include &lt;iostream&gt;

class Foo{
    public:
        void bar(){
            std::cout &lt;&lt; ""Hello"" &lt;&lt; std::endl;
        }
};
</code></pre>

<p>Since ctypes can only talk to C functions, you need to provide those declaring them as extern ""C""</p>

<pre><code>extern ""C"" {
    Foo* Foo_new(){ return new Foo(); }
    void Foo_bar(Foo* foo){ foo-&gt;bar(); }
}
</code></pre>

<p>Next you have to compile this to a shared library</p>

<pre><code>g++ -c -fPIC foo.cpp -o foo.o
g++ -shared -Wl,-soname,libfoo.so -o libfoo.so  foo.o
</code></pre>

<p>And finally you have to write your python wrapper (e.g. in fooWrapper.py)</p>

<pre><code>from ctypes import cdll
lib = cdll.LoadLibrary('./libfoo.so')

class Foo(object):
    def __init__(self):
        self.obj = lib.Foo_new()

    def bar(self):
        lib.Foo_bar(self.obj)
</code></pre>

<p>Once you have that you can call it like</p>

<pre><code>f = Foo()
f.bar() #and you will see ""Hello"" on the screen
</code></pre>
",339
185,100210,python,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
","<p>One little thing, might add clarity to override the default value for seconds</p>

<pre><code>&gt;&gt;&gt; b = a + datetime.timedelta(seconds=3000)
&gt;&gt;&gt; b
datetime.datetime(1, 1, 1, 12, 24, 59)
</code></pre>
",9
187,100210,python,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
","<p>As others here have stated, you can just use full datetime objects throughout:</p>

<pre><code>sometime = get_some_time() # the time to which you want to add 3 seconds
later = (datetime.combine(date.today(), sometime) + timedelta(seconds=3)).time()
</code></pre>

<p>However, I think it's worth explaining why full datetime objects are required.  Consider what would happen if I added 2 hours to 11pm.  What's the correct behavior?  An exception, because you can't have a time larger than 11:59pm?  Should it wrap back around?</p>

<p>Different programmers will expect different things, so whichever result they picked would surprise a lot of people.  Worse yet, programmers would write code that worked just fine when they tested it initially, and then have it break later by doing something unexpected.  This is very bad, which is why you're not allowed to add timedelta objects to time objects.</p>
",34
183,100210,python,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
","<p>Try adding a datetime.datetime to a datetime.timedelta. If you only want the time portion, you can call the time() method on the resultant datetime.datetime object to get it.</p>
",1
186,100210,python,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
","<p>Thanks to @<a href=""#100345"">Pax Diablo</a>, @bvmou and @Arachnid for the suggestion of using full datetimes throughout.  If I have to accept datetime.time objects from an external source, then this seems to be an alternative <code>add_secs_to_time()</code> function:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    dummy_date = datetime.date(1, 1, 1)
    full_datetime = datetime.datetime.combine(dummy_date, timeval)
    added_datetime = full_datetime + datetime.timedelta(seconds=secs_to_add)
    return added_datetime.time()
</code></pre>

<p>This verbose code can be compressed to this one-liner:</p>

<pre><code>(datetime.datetime.combine(datetime.date(1, 1, 1), timeval) + datetime.timedelta(seconds=secs_to_add)).time()
</code></pre>

<p>but I think I'd want to wrap that up in a function for code clarity anyway.</p>
",7
184,100210,python,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
","<p>You can use full <code>datetime</code> variables with <code>timedelta</code>, and by providing a dummy date then using <code>time</code> to just get the time value.</p>

<p>For example:</p>

<pre><code>import datetime
a = datetime.datetime(100,1,1,11,34,59)
b = a + datetime.timedelta(0,3) # days, seconds, then other fields.
print a.time()
print b.time()
</code></pre>

<p>results in the two values, three seconds apart:</p>

<pre><code>11:34:59
11:35:02
</code></pre>

<p>You could also opt for the more readable</p>

<pre><code>b = a + datetime.timedelta(seconds=3)
</code></pre>

<p>if you're so inclined.</p>

<hr>

<p>If you're after a function that can do this, you can look into using <code>addSecs</code> below:</p>

<pre><code>import datetime

def addSecs(tm, secs):
    fulldate = datetime.datetime(100, 1, 1, tm.hour, tm.minute, tm.second)
    fulldate = fulldate + datetime.timedelta(seconds=secs)
    return fulldate.time()

a = datetime.datetime.now().time()
b = addSecs(a, 300)
print a
print b
</code></pre>

<p>This outputs:</p>

<pre><code> 09:11:55.775695
 09:16:55
</code></pre>
",281
248,139180,python,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
","<p>You can use <code>dir(module)</code> to see all available methods/attributes.  Also check out PyDocs.</p>
",238
252,139180,python,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
","<p>This will do the trick:</p>

<pre><code>dir(module) 
</code></pre>

<p>However, if you find it annoying to read the returned list, just use the following loop to get one name per line.</p>

<pre><code>for i in dir(module): print i
</code></pre>
",20
250,139180,python,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
","<pre><code>import types
import yourmodule

print [yourmodule.__dict__.get(a) for a in dir(yourmodule)
  if isinstance(yourmodule.__dict__.get(a), types.FunctionType)]
</code></pre>
",44
249,139180,python,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
","<p>The inspect module. Also see the <a href=""http://docs.python.org/2/library/pydoc.html""><code>pydoc</code></a> module, the <code>help()</code> function in the interactive interpreter and the <code>pydoc</code> command-line tool which generates the documentation you are after. You can just give them the class you wish to see the documentation of. They can also generate, for instance, HTML output and write it to disk.</p>
",69
251,139180,python,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
","<p>Once you've <code>import</code>ed the module, you can just do:</p>

<pre><code> help(modulename)
</code></pre>

<p>... To get the docs on all the functions at once, interactively.  Or you can use:</p>

<pre><code> dir(modulename)
</code></pre>

<p>... To simply list the names of all the functions and variables defined in the module.</p>
",76
30,35470,python,163,Are there static analysis tools for Python?,"<p>I am starting to use Python (specifically because of Django) and I would like to remove the burden for exhaustive testing by performing some static analysis.  What tools/parameters/etc. exist to detect issues at compile time that would otherwise show up during runtime? (type errors are probably the most obvious case of this, but undefined variables are another big one that could be avoided with an in-depth analysis of the AST.)</p>

<p>Obviously testing is important, and I don't imply that tests can be obviated entirely; however, there are many runtime errors in python that are not possible in other languages that perform stricter run-time checking -- I'm hoping that there are tools to bring at least some of these capabilities to python as well.</p>
","<p>There's</p>

<ul>
<li><a href=""http://www.logilab.org/857"">pylint</a></li>
<li><a href=""http://pychecker.sourceforge.net/"">pychecker</a></li>
<li><a href=""http://divmod.org/trac/wiki/DivmodPyflakes"">pyflakes</a></li>
</ul>

<p>And probably others, too.</p>
",10
32,35470,python,163,Are there static analysis tools for Python?,"<p>I am starting to use Python (specifically because of Django) and I would like to remove the burden for exhaustive testing by performing some static analysis.  What tools/parameters/etc. exist to detect issues at compile time that would otherwise show up during runtime? (type errors are probably the most obvious case of this, but undefined variables are another big one that could be avoided with an in-depth analysis of the AST.)</p>

<p>Obviously testing is important, and I don't imply that tests can be obviated entirely; however, there are many runtime errors in python that are not possible in other languages that perform stricter run-time checking -- I'm hoping that there are tools to bring at least some of these capabilities to python as well.</p>
","<p>You should check out <a href=""http://divmod.org/trac/wiki/DivmodPyflakes"">Pyflakes</a>, <a href=""http://www.logilab.org/project/pylint"">Pylint</a>, and <a href=""http://pychecker.sourceforge.net/"">PyChecker</a>. I've personally used both Pyflakes and Pylint, and found them both to be very helpful for catching those little things you hate to mess up on. Pylint generally requires a bit more configuration than Pyflakes.</p>

<p>Also noteworthy: Eclipse's PyDev plugin comes in with a built in Pylint output parser.</p>
",13
31,35470,python,163,Are there static analysis tools for Python?,"<p>I am starting to use Python (specifically because of Django) and I would like to remove the burden for exhaustive testing by performing some static analysis.  What tools/parameters/etc. exist to detect issues at compile time that would otherwise show up during runtime? (type errors are probably the most obvious case of this, but undefined variables are another big one that could be avoided with an in-depth analysis of the AST.)</p>

<p>Obviously testing is important, and I don't imply that tests can be obviated entirely; however, there are many runtime errors in python that are not possible in other languages that perform stricter run-time checking -- I'm hoping that there are tools to bring at least some of these capabilities to python as well.</p>
","<p><a href=""http://www.logilab.org/857"">pylint</a> is the best such tool I've found. Due to Python's nature it's difficult to statically analyze it, but it will catch undefined variables, basic type errors, unused code, etc. You'll want to tweak the configuration file, as by default it outputs many warnings I consider useless or harmful.</p>

<p>Here's part of my <code>.pylintrc</code> dealing with warning silencing:</p>

<pre><code>[MESSAGES CONTROL]

# Brain-dead errors regarding standard language features
#   W0142 = *args and **kwargs support
#   W0403 = Relative imports

# Pointless whinging
#   R0201 = Method could be a function
#   W0212 = Accessing protected attribute of client class
#   W0613 = Unused argument
#   W0232 = Class has no __init__ method
#   R0903 = Too few public methods
#   C0301 = Line too long
#   R0913 = Too many arguments
#   C0103 = Invalid name
#   R0914 = Too many local variables

# PyLint's module importation is unreliable
#   F0401 = Unable to import module
#   W0402 = Uses of a deprecated module

# Already an error when wildcard imports are used
#   W0614 = Unused import from wildcard

# Sometimes disabled depending on how bad a module is
#   C0111 = Missing docstring

# Disable the message(s) with the given id(s).
disable=W0142,W0403,R0201,W0212,W0613,W0232,R0903,W0614,C0111,C0301,R0913,C0103,F0401,W0402,R0914
</code></pre>
",100
34,35470,python,163,Are there static analysis tools for Python?,"<p>I am starting to use Python (specifically because of Django) and I would like to remove the burden for exhaustive testing by performing some static analysis.  What tools/parameters/etc. exist to detect issues at compile time that would otherwise show up during runtime? (type errors are probably the most obvious case of this, but undefined variables are another big one that could be avoided with an in-depth analysis of the AST.)</p>

<p>Obviously testing is important, and I don't imply that tests can be obviated entirely; however, there are many runtime errors in python that are not possible in other languages that perform stricter run-time checking -- I'm hoping that there are tools to bring at least some of these capabilities to python as well.</p>
","<p>Here are my first impressions of pyflakes, pychecker and pylint:</p>

<ul>
<li><p><strong>pychecker</strong>: It crashes frequently, most of the runs I tried resulted in Errors that originated in the pychecker code (eg: AttributeError or IndexError: list index out of range were the most common).  For some reason I had to set the DJANGO_SETTINGS_MODULE environment variable before it would even run on any of the app code, and the documentation is very sparse.</p></li>
<li><p><strong>pyflakes</strong>: 'pyflakes --help' throws a TypeError -- erm... Documentation is also very sparse, and pyflakes is very forgiving (as far as I can tell, it only reports compile errors, warnings, redefinitions, and some concerns about imports--such as unused and wildcards).  pyflakes also seems to repeat itself:</p>

<blockquote>
  <p>eventlist/views.py:4: 'Http404' imported but unused<br>
      eventlist/views.py:4: 'Http404' imported but unused<br>
      eventlist/views.py:5: 'from eventlist.models import *' used; unable to detect undefined names
      eventlist/views.py:59: 'authenticate' imported but unused<br>
      eventlist/views.py:61: redefinition of unused 'login' from
  line 59<br>
      eventlist/views.py:5: 'from eventlist.models import *' used;
  unable to detect undefined names <br>
     eventlist/views.py:4: 'Http404' imported but unused</p>
</blockquote></li>
<li><p><strong>pylint</strong>: This seems to be the most capable of the tools suggested.  It has the best documentation.  LogiLab provides a tutorial, pylint has a help screen, and there is a (broken) link to a user manual, which would be extremely helpful.  There are some issues with applying pylint to django, since pylint doesn't know about the django classes (such as models.Model).  This means that a fair number of otherwise valuable errors are generated about missing class fields.  eg:</p>

<blockquote>
  <p>E:105:get_events_by_tag: Class 'Tag' has no 'objects' member<br></p>
</blockquote>

<p>Parsing these out automatically will be very difficult without some additional knowledge of the classes in use.  I'm not sure adding that is feasible, but it does seem likely that pylint is capable of dealing with this in the ""right"" way.  (I probably just need to point it to the django source, but there are no command line params that look likely, and, as mentioned earlier, the user manual is inaccessible.)</p></li>
</ul>

<p>For the moment, I'm still looking into pylint -- pychecker and pyflakes need better documentation and they need to become more robust.</p>
",84
33,35470,python,163,Are there static analysis tools for Python?,"<p>I am starting to use Python (specifically because of Django) and I would like to remove the burden for exhaustive testing by performing some static analysis.  What tools/parameters/etc. exist to detect issues at compile time that would otherwise show up during runtime? (type errors are probably the most obvious case of this, but undefined variables are another big one that could be avoided with an in-depth analysis of the AST.)</p>

<p>Obviously testing is important, and I don't imply that tests can be obviated entirely; however, there are many runtime errors in python that are not possible in other languages that perform stricter run-time checking -- I'm hoping that there are tools to bring at least some of these capabilities to python as well.</p>
","<p>I echo the other answers and would just add that <a href=""http://pychecker.sourceforge.net/"" rel=""nofollow"">pychecker</a> is the quickest and easiest to use and <a href=""http://www.logilab.org/857"" rel=""nofollow"">pylint</a> the most comprehensive and configurable.</p>

<p>I also use <a href=""http://epydoc.sourceforge.net/"" rel=""nofollow"">epydoc</a> a fair bit and this is good for pointing out problems with your docstrings.</p>
",4
208,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p><code>file()</code> is a type, like an int or a list. <code>open()</code> is a function for opening files, and will return a <code>file</code> object.</p>

<p>This is an example of when you should use open:</p>

<pre><code>f = open(filename, 'r')
for line in f:
    process(line)
f.close()
</code></pre>

<p>This is an example of when you should use file:</p>

<pre><code>class LoggingFile(file):
    def write(self, data):
        sys.stderr.write(""Wrote %d bytes\n"" % len(data))
        super(LoggingFile, self).write(data)
</code></pre>

<p>As you can see, there's a good reason for both to exist, and a clear use-case for both.</p>
",16
207,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p>According to Mr Van Rossum, although open() is currently an alias for file() you should use open() because this might change in the future.</p>
",1
204,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p>Functionally, the two are the same; <code>open</code> will call <code>file</code> anyway, so currently the difference is a matter of style. The <a href=""http://docs.python.org/lib/built-in-funcs.html"" rel=""nofollow"">Python docs</a> recommend using <code>open</code>. </p>

<blockquote>
  <p>When opening a file, it's preferable to use open() instead of invoking the file constructor directly. </p>
</blockquote>

<p>The reason is that in future versions they is not guaranteed to be the same (<code>open</code> will become a factory function, which returns objects of  different types depending on the path it's opening).</p>
",4
203,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p>You should always use <code>open()</code>.</p>

<p>As the <a href=""http://docs.python.org/2/library/functions.html#file"" rel=""nofollow"" title=""BuiltinFuncs Doc"">documentation</a> states:</p>

<blockquote>
  <p>When opening a file, it's preferable
  to use open() instead of invoking this
  constructor directly. file is more
  suited to type testing (for example,
  writing ""isinstance(f, file)"").</p>
</blockquote>

<p>Also, <code>file()</code> <a href=""http://docs.python.org/release/3.0/whatsnew/3.0.html#builtins"" rel=""nofollow"">has been removed</a> since Python 3.0.</p>
",129
206,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p>Only ever use open() for opening files. file() is actually being removed in 3.0, and it's deprecated at the moment. They've had a sort of strange relationship, but file() is going now, so there's no need to worry anymore.</p>

<p>The following is from the Python 2.6 docs. [bracket stuff] added by me.</p>

<blockquote>
  <p>When opening a file, itâs preferable to use open() instead of invoking this [file()] constructor directly. file is more suited to type testing (for example, writing isinstance(f, file)</p>
</blockquote>
",3
205,112970,python,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
","<p>Two reasons: The python philosophy of ""There ought to be one way to do it"" and <code>file</code> is going away.</p>

<p><code>file</code> is the actual type (using e.g. <code>file('myfile.txt')</code> is calling its constructor). <code>open</code> is a factory function that will return a file object.</p>

<p>In python 3.0 <code>file</code> is going to move from being a built-in to being implemented by multiple classes in the <code>io</code> library (somewhat similar to Java with buffered readers, etc.)</p>
",28
225,118370,python,114,How do you use the ellipsis slicing syntax in Python?,"<p>This came up in  <a href=""http://stackoverflow.com/questions/101268/hidden-features-of-python"">Hidden features of Python</a>, but I can't see good documentation or examples that explain how the feature works.</p>
","<p>You'd use it in your own class, since no builtin class makes use of it.</p>

<p>Numpy uses it, as stated in the <a href=""http://wiki.scipy.org/Numpy_Example_List_With_Doc#head-490d781b49b68b300eedaef32369fae7d58627fb"">documentation</a>. Some examples <a href=""http://wiki.scipy.org/Tentative_NumPy_Tutorial#head-864862d3f2bb4c32f04260fac61eb4ef34788c4c"">here</a>.</p>

<p>In your own class, you'd use it like this:</p>

<pre><code>&gt;&gt;&gt; class TestEllipsis(object):
...     def __getitem__(self, item):
...         if item is Ellipsis:
...             return ""Returning all items""
...         else:
...             return ""return %r items"" % item
... 
&gt;&gt;&gt; x = TestEllipsis()
&gt;&gt;&gt; print x[2]
return 2 items
&gt;&gt;&gt; print x[...]
Returning all items
</code></pre>

<p>Of course, there is the <a href=""https://docs.python.org/library/constants.html#Ellipsis"">python documentation</a>, and <a href=""https://docs.python.org/reference/expressions.html#grammar-token-slicing"">language reference</a>. But those aren't very helpful. </p>
",70
226,118370,python,114,How do you use the ellipsis slicing syntax in Python?,"<p>This came up in  <a href=""http://stackoverflow.com/questions/101268/hidden-features-of-python"">Hidden features of Python</a>, but I can't see good documentation or examples that explain how the feature works.</p>
","<p>The ellipsis is used to slice higher-dimensional data structures. </p>

<p>It's designed to mean <em>at this point, insert as many full slices (<code>:</code>) to extend the multi-dimensional slice to all dimensions</em>.</p>

<p><strong>Example</strong>:</p>

<pre><code>&gt;&gt;&gt; from numpy import arange
&gt;&gt;&gt; a = arange(16).reshape(2,2,2,2)
</code></pre>

<p>Now, you have a 4-dimensional matrix of order 2x2x2x2. To select all first elements in the 4th dimension, you can use the ellipsis notation</p>

<pre><code>&gt;&gt;&gt; a[..., 0].flatten()
array([ 0,  2,  4,  6,  8, 10, 12, 14])
</code></pre>

<p>which is equivalent to</p>

<pre><code>&gt;&gt;&gt; a[:,:,:,0].flatten()
array([ 0,  2,  4,  6,  8, 10, 12, 14])
</code></pre>

<p>In your own implementations, you're free to ignore the contract mentioned above and use it for whatever you see fit.</p>
",159
227,118370,python,114,How do you use the ellipsis slicing syntax in Python?,"<p>This came up in  <a href=""http://stackoverflow.com/questions/101268/hidden-features-of-python"">Hidden features of Python</a>, but I can't see good documentation or examples that explain how the feature works.</p>
","<p>This is another use for Ellipsis, which has nothing to do with slices: I often use it in intra-thread communication with queues, as a mark that signals ""Done""; it's there, it's an object, it's a singleton, and its name means ""lack of"", and it's not the overused None (which could be put in a queue as part of normal data flow). YMMV.</p>

<p>P.S: I don't mind downvotes, when what I say in an answer is not useful in relation to the question; then I try to improve my answer. But I sure can't understand how one can downvote <em>any</em> of the answers in this questionâ when the question is âhow do <em>you</em> use the Ellipsis in Pythonââ¦ It seems that people think that downvoting means âI disagreeâ or âI don't like thisâ.</p>
",66
48,43580,python,101,How to find the mime type of a file in python?,"<p>Let's say you want to save a bunch of files somewhere, for instance in BLOBs. Let's say you want to dish these files out via a web page and have the client automatically open the correct application/viewer.</p>

<p>Assumption: The browser figures out which application/viewer to use by the mime-type (content-type?) header in the HTTP response.</p>

<p>Based on that assumption, in addition to the bytes of the file, you also want to save the MIME type.</p>

<p>How would you find the MIME type of a file? I'm currently on a Mac, but this should also work on Windows. </p>

<p>Does the browser add this information when posting the file to the web page?</p>

<p>Is there a neat python library for finding this information? A WebService or (even better) a downloadable database?</p>
","<p>You didn't state what web server you were using, but Apache has a nice little module called <a href=""http://httpd.apache.org/docs/1.3/mod/mod_mime_magic.html"" rel=""nofollow"">Mime Magic</a> which it uses to determine the type of a file when told to do so.  It reads some of the file's content and tries to figure out what type it is based on the characters found.  And as <a href=""http://stackoverflow.com/questions/43580/how-to-find-the-mime-type-of-a-file-in-python#43588"" rel=""nofollow"">Dave Webb Mentioned</a> the <a href=""http://docs.python.org/lib/module-mimetypes.html"" rel=""nofollow"">MimeTypes Module</a> under python will work, provided an extension is handy.</p>

<p>Alternatively, if you are sitting on a UNIX box you can use <code>sys.popen('file -i ' + fileName, mode='r')</code> to grab the MIME type.  Windows should have an equivalent command, but I'm unsure as to what it is. </p>
",5
89,68630,python,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
","<p>You should also consider the <code>array</code> module in the standard library if all the items in your list or tuple are of the same type.  It can be faster and take less memory.</p>
",6
47,43580,python,101,How to find the mime type of a file in python?,"<p>Let's say you want to save a bunch of files somewhere, for instance in BLOBs. Let's say you want to dish these files out via a web page and have the client automatically open the correct application/viewer.</p>

<p>Assumption: The browser figures out which application/viewer to use by the mime-type (content-type?) header in the HTTP response.</p>

<p>Based on that assumption, in addition to the bytes of the file, you also want to save the MIME type.</p>

<p>How would you find the MIME type of a file? I'm currently on a Mac, but this should also work on Windows. </p>

<p>Does the browser add this information when posting the file to the web page?</p>

<p>Is there a neat python library for finding this information? A WebService or (even better) a downloadable database?</p>
","<p>The <a href=""https://docs.python.org/library/mimetypes.html"">mimetypes module</a> in the standard library will determine/guess the MIME type from a file extension.</p>

<p>If users are uploading files the HTTP post will contain the MIME type of the file alongside the data.  For example, Django makes this data available as an attribute of the <a href=""https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#uploadedfile-objects"">UploadedFile</a> object.</p>
",53
88,68630,python,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
","<p>Tuples, being immutable, are more memory efficient; lists, for efficiency, overallocate memory in order to allow appends without constant <code>realloc</code>s. So, if you want to iterate through a constant sequence of values in your code (eg <code>for direction in 'up', 'right', 'down', 'left':</code>), tuples are preferred, since such tuples are pre-calculated in compile time.</p>

<p>Access speeds should be the same (they are both stored as contiguous arrays in the memory).</p>

<p>But, <code>alist.append(item)</code> is much preferred to <code>atuple+= (item,)</code> when you deal with mutable data. Remember, tuples are intended to be treated as records without field names.</p>
",26
87,68630,python,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
","<p>The <a href=""https://docs.python.org/3/library/dis.html""><code>dis</code></a> module disassembles the byte code for a function and is useful to see the difference between tuples and lists.</p>

<p>In this case, you can see that accessing an element generates identical code, but that assigning a tuple is much faster than assigning a list.</p>

<pre><code>&gt;&gt;&gt; def a():
...     x=[1,2,3,4,5]
...     y=x[2]
...
&gt;&gt;&gt; def b():
...     x=(1,2,3,4,5)
...     y=x[2]
...
&gt;&gt;&gt; import dis
&gt;&gt;&gt; dis.dis(a)
  2           0 LOAD_CONST               1 (1)
              3 LOAD_CONST               2 (2)
              6 LOAD_CONST               3 (3)
              9 LOAD_CONST               4 (4)
             12 LOAD_CONST               5 (5)
             15 BUILD_LIST               5
             18 STORE_FAST               0 (x)

  3          21 LOAD_FAST                0 (x)
             24 LOAD_CONST               2 (2)
             27 BINARY_SUBSCR
             28 STORE_FAST               1 (y)
             31 LOAD_CONST               0 (None)
             34 RETURN_VALUE
&gt;&gt;&gt; dis.dis(b)
  2           0 LOAD_CONST               6 ((1, 2, 3, 4, 5))
              3 STORE_FAST               0 (x)

  3           6 LOAD_FAST                0 (x)
              9 LOAD_CONST               2 (2)
             12 BINARY_SUBSCR
             13 STORE_FAST               1 (y)
             16 LOAD_CONST               0 (None)
             19 RETURN_VALUE
</code></pre>
",88
86,68630,python,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
","<p>In general, you might expect tuples to be slightly faster. However you should definitely test your specific case (if the difference might impact the performance of your program --  remember ""premature optimization is the root of all evil"").</p>

<p>Python makes this very easy: <a href=""https://docs.python.org/2/library/timeit.html"">timeit</a> is your friend.</p>

<pre><code>$ python -m timeit ""x=(1,2,3,4,5,6,7,8)""
10000000 loops, best of 3: 0.0388 usec per loop

$ python -m timeit ""x=[1,2,3,4,5,6,7,8]""
1000000 loops, best of 3: 0.363 usec per loop
</code></pre>

<p>and...</p>

<pre><code>$ python -m timeit -s ""x=(1,2,3,4,5,6,7,8)"" ""y=x[3]""
10000000 loops, best of 3: 0.0938 usec per loop

$ python -m timeit -s ""x=[1,2,3,4,5,6,7,8]"" ""y=x[3]""
10000000 loops, best of 3: 0.0649 usec per loop
</code></pre>

<p>So in this case, instantiation is almost an order of magnitude faster for the tuple, but item access is actually somewhat faster for the list! So if you're creating a few tuples and accessing them many many times, it may actually be faster to use lists instead.</p>

<p>Of course if you want to <em>change</em> an item, the list will definitely be faster since you'd need to create an entire new tuple to change one item of it (since tuples are immutable).</p>
",131
85,68630,python,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
","<p>Tuples should be slightly more efficient and because of that, faster, than lists because they are immutable.</p>
",1
212,114830,python,88,Is a Python dictionary an example of a hash table?,"<p>One of the basic data structures in Python is the dictionary, which allows one to record ""keys"" for looking up ""values"" of any type.  Is this implemented internally as a hash table?  If not, what is it?</p>
","<p>Yes.  Internally it is implemented as open hashing based on a primitive polynomial over Z/2 (<a href=""http://mail.python.org/pipermail/python-list/2000-February/023645.html"">source</a>).</p>
",14
214,114830,python,88,Is a Python dictionary an example of a hash table?,"<p>One of the basic data structures in Python is the dictionary, which allows one to record ""keys"" for looking up ""values"" of any type.  Is this implemented internally as a hash table?  If not, what is it?</p>
","<p>To expand upon nosklo's explanation:</p>

<pre><code>a = {}
b = ['some', 'list']
a[b] = 'some' # this won't work
a[tuple(b)] = 'some' # this will, same as a['some', 'list']
</code></pre>
",5
213,114830,python,88,Is a Python dictionary an example of a hash table?,"<p>One of the basic data structures in Python is the dictionary, which allows one to record ""keys"" for looking up ""values"" of any type.  Is this implemented internally as a hash table?  If not, what is it?</p>
","<p>If you're interested in the technical details, one article in <a href=""http://oreilly.com/catalog/9780596510046/"">Beautiful Code</a> deals with the internals of Python's <code>dict</code> implementation.</p>
",25
211,114830,python,88,Is a Python dictionary an example of a hash table?,"<p>One of the basic data structures in Python is the dictionary, which allows one to record ""keys"" for looking up ""values"" of any type.  Is this implemented internally as a hash table?  If not, what is it?</p>
","<p>Yes, it is a hash mapping or hash table. You can read a description of python's dict implementation, as written by Tim Peters, <a href=""http://mail.python.org/pipermail/python-list/2000-March/048085.html"">here</a>.</p>

<p>That's why you can't use something 'not hashable' as a dict key, like a list:</p>

<pre><code>&gt;&gt;&gt; a = {}
&gt;&gt;&gt; b = ['some', 'list']
&gt;&gt;&gt; hash(b)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: list objects are unhashable
&gt;&gt;&gt; a[b] = 'some'
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: list objects are unhashable
</code></pre>

<p>You can <a href=""http://en.wikipedia.org/wiki/Hash_table"">read more about hash tables</a> or <a href=""https://hg.python.org/cpython/file/10eea15880db/Objects/dictobject.c"">check how it has been implemented in python</a> and <a href=""https://hg.python.org/cpython/file/10eea15880db/Objects/dictnotes.txt"">why it is implemented that way</a>.</p>
",127
68,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>can't help the way it's stored, but at least formatting works correctly: </p>

<pre><code>'%.1f' % round(n, 1) # gives you '5.6'
</code></pre>
",66
11,31340,python,71,"How do threads work in Python, and what are common Python-threading specific pitfalls?","<p>I've been trying to wrap my head around how threads work in Python, and it's hard to find good information on how they operate. I may just be missing a link or something, but it seems like the official documentation isn't very thorough on the subject, and I haven't been able to find a good write-up.</p>

<p>From what I can tell, only one thread can be running at once, and the active thread switches every 10 instructions or so?</p>

<p>Where is there a good explanation, or can you provide one? It would also be very nice to be aware of common problems that you run into while using threads with Python.</p>
","<p>Use threads in python if the individual workers are doing I/O bound operations. If you are trying to scale across multiple cores on a machine either find a good <a href=""http://www.python.org/dev/peps/pep-0371/"">IPC</a> framework for python or pick a different language.</p>
",9
8,31340,python,71,"How do threads work in Python, and what are common Python-threading specific pitfalls?","<p>I've been trying to wrap my head around how threads work in Python, and it's hard to find good information on how they operate. I may just be missing a link or something, but it seems like the official documentation isn't very thorough on the subject, and I haven't been able to find a good write-up.</p>

<p>From what I can tell, only one thread can be running at once, and the active thread switches every 10 instructions or so?</p>

<p>Where is there a good explanation, or can you provide one? It would also be very nice to be aware of common problems that you run into while using threads with Python.</p>
","<p>Below is a basic threading sample. It will spawn 20 threads; each thread will output its thread number. Run it and observe the order in which they print.</p>

<pre><code>import threading
class Foo (threading.Thread):
    def __init__(self,x):
        self.__x = x
        threading.Thread.__init__(self)
    def run (self):
          print str(self.__x)

for x in xrange(20):
    Foo(x).start()
</code></pre>

<p>As you have hinted at Python threads are implemented through time-slicing. This is how they get the ""parallel"" effect. </p>

<p>In my example my Foo class extends thread, I then implement the <code>run</code> method, which is where the code that you would like to run in a thread goes. To start the thread you call <code>start()</code> on the thread object, which will automatically invoke the <code>run</code> method...</p>

<p>Of course, this is just the very basics. You will eventually want to learn about semaphores, mutexes, and locks for thread synchronization and message passing.</p>
",18
10,31340,python,71,"How do threads work in Python, and what are common Python-threading specific pitfalls?","<p>I've been trying to wrap my head around how threads work in Python, and it's hard to find good information on how they operate. I may just be missing a link or something, but it seems like the official documentation isn't very thorough on the subject, and I haven't been able to find a good write-up.</p>

<p>From what I can tell, only one thread can be running at once, and the active thread switches every 10 instructions or so?</p>

<p>Where is there a good explanation, or can you provide one? It would also be very nice to be aware of common problems that you run into while using threads with Python.</p>
","<p>Yes, because of the Global Interpreter Lock (GIL) there can only run one thread at a time. Here are some links with some insights about this:</p>

<ul>
<li><a href=""http://www.artima.com/weblogs/viewpost.jsp?thread=214235"">http://www.artima.com/weblogs/viewpost.jsp?thread=214235</a></li>
<li><a href=""http://smoothspan.wordpress.com/2007/09/14/guido-is-right-to-leave-the-gil-in-python-not-for-multicore-but-for-utility-computing/"">http://smoothspan.wordpress.com/2007/09/14/guido-is-right-to-leave-the-gil-in-python-not-for-multicore-but-for-utility-computing/</a></li>
</ul>

<p>From the last link an interesting quote:</p>

<blockquote>
  <p>Let me explain what all that means. 
  Threads run inside the same virtual
  machine, and hence run on the same
  physical machine.  Processes can run
  on the same physical machine or in
  another physical machine.  If you
  architect your application around
  threads, youâve done nothing to access
  multiple machines.  So, you can scale
  to as many cores are on the single
  machine (which will be quite a few
  over time), but to really reach web
  scales, youâll need to solve the
  multiple machine problem anyway.</p>
</blockquote>

<p>If you want to use multi core, <a href=""http://www.python.org/dev/peps/pep-0371/"">pyprocessing</a> defines an process based API to do real parallelization. The <a href=""http://en.wikipedia.org/wiki/Python_Enhancement_Proposal#Development"">PEP</a> also includes some interesting benchmarks.</p>
",41
73,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p><strong>printf</strong> the sucker.</p>

<pre><code>print '%.1f' % 5.59  # returns 5.6
</code></pre>
",3
72,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>Floating point math is vulnerable to slight, but annoying, precision inaccuracies.  If you can work with integer or fixed point, you will be guaranteed precision.</p>
",5
67,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>What about:</p>

<pre><code>round(n,1)+epsilon
</code></pre>
",-4
74,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>Formatting works correctly even without having to round:</p>

<pre><code>""%.1f"" % n
</code></pre>
",81
9,31340,python,71,"How do threads work in Python, and what are common Python-threading specific pitfalls?","<p>I've been trying to wrap my head around how threads work in Python, and it's hard to find good information on how they operate. I may just be missing a link or something, but it seems like the official documentation isn't very thorough on the subject, and I haven't been able to find a good write-up.</p>

<p>From what I can tell, only one thread can be running at once, and the active thread switches every 10 instructions or so?</p>

<p>Where is there a good explanation, or can you provide one? It would also be very nice to be aware of common problems that you run into while using threads with Python.</p>
","<p>Python's a fairly easy language to thread in, but there are caveats.  The biggest thing you need to know about is the Global Interpreter Lock.  This allows only one thread to access the interpreter.  This means two things:  1)  you rarely ever find yourself using a lock statement in python and 2) if you want to take advantage of multi-processor systems, you have to use separate processes.  EDIT:  I should also point out that you can put some of the code in C/C++ if you want to get around the GIL as well.</p>

<p>Thus, you need to re-consider why you want to use threads.  If you want to parallelize your app to take advantage of dual-core architecture, you need to consider breaking your app up into multiple processes.</p>

<p>If you want to improve responsiveness, you should CONSIDER using threads.  There are other alternatives though, namely <a href=""http://en.wikipedia.org/wiki/Microthread"" rel=""nofollow"">microthreading</a>.  There are also some frameworks that you should look into:</p>

<ul>
<li><a href=""http://www.stackless.com/"" rel=""nofollow"">stackless python</a></li>
<li><a href=""http://greenlet.readthedocs.org/en/latest/"" rel=""nofollow"">greenlets</a></li>
<li><a href=""http://www.gevent.org/"" rel=""nofollow"">gevent</a></li>
<li><a href=""https://github.com/saucelabs/monocle"" rel=""nofollow"">monocle</a></li>
</ul>
",32
69,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>You can switch the data type to a integer:</p>

<pre><code>&gt;&gt;&gt; n = 5.59
&gt;&gt;&gt; int(n * 10) / 10.0
5.5
&gt;&gt;&gt; int(n * 10 + 0.5) 
56
</code></pre>

<p>And then display the number by inserting the locale's decimal separator.</p>

<p>However, <a href=""http://stackoverflow.com/questions/56820/round-in-python-doesnt-seem-to-be-rounding-properly#56833"" rel=""nofollow"">Jimmy's answer</a> is better.</p>
",5
70,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>You can use the string format operator <code>%</code>, similar to sprintf.</p>

<pre><code>mystring = ""%.2f"" % 5.5999
</code></pre>
",3
71,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p>You get '5.6' if you do <code>str(round(n, 1))</code> instead of just <code>round(n, 1)</code>.</p>
",9
75,56820,python,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
","<p><code>round(5.59, 1)</code> is working fine. The problem is that 5.6 cannot be represented exactly in binary floating point.</p>

<pre><code>&gt;&gt;&gt; 5.6
5.5999999999999996
&gt;&gt;&gt;
</code></pre>

<p>As Vinko says, you can use string formatting to do rounding for display.</p>

<p>Python has a <a href=""http://docs.python.org/lib/module-decimal.html"">module for decimal arithmetic</a> if you need that.</p>
",15
242,138250,python,63,How can I read the RGB value of a given pixel in Python?,"<p>If I open an image with <code>open(""image.jpg"")</code>, how can I get the RGB values of a pixel, if I have the coordinates of the pixel?</p>

<p>Then how can I do the reverse of this? Starting with a blank graphic, 'write' a pixel with a certain RGB value?</p>

<p>It would be so much better if I didn't have to download any additional libraries.</p>
","<p>Image manipulation is a complex topic, and it's best if you <em>do</em> use a library. I can recommend <a href=""http://newcenturycomputers.net/projects/gdmodule.html"" rel=""nofollow"">gdmodule</a> which provides easy access to many different image formats from within Python.</p>
",1
243,138250,python,63,How can I read the RGB value of a given pixel in Python?,"<p>If I open an image with <code>open(""image.jpg"")</code>, how can I get the RGB values of a pixel, if I have the coordinates of the pixel?</p>

<p>Then how can I do the reverse of this? Starting with a blank graphic, 'write' a pixel with a certain RGB value?</p>

<p>It would be so much better if I didn't have to download any additional libraries.</p>
","<p>It's probably best to use the <a href=""http://www.pythonware.com/products/pil/"">Python Image Library</a> to do this which I'm afraid is a separate download.</p>

<p>The easiest way to do what you want is via the <a href=""http://effbot.org/imagingbook/image.htm"">load() method on the Image object</a> which returns a pixel access object which you can manipulate like an array:</p>

<pre><code>from PIL import Image
im = Image.open(""dead_parrot.jpg"") #Can be many different formats.
pix = im.load()
print im.size #Get the width and hight of the image for iterating over
print pix[x,y] #Get the RGBA Value of the a pixel of an image
pix[x,y] = value # Set the RGBA Value of the image (tuple)
</code></pre>

<p>Alternatively, look at <a href=""http://effbot.org/imagingbook/imagedraw.htm"">ImageDraw</a> which gives a much richer API for creating images.</p>
",108
244,138250,python,63,How can I read the RGB value of a given pixel in Python?,"<p>If I open an image with <code>open(""image.jpg"")</code>, how can I get the RGB values of a pixel, if I have the coordinates of the pixel?</p>

<p>Then how can I do the reverse of this? Starting with a blank graphic, 'write' a pixel with a certain RGB value?</p>

<p>It would be so much better if I didn't have to download any additional libraries.</p>
","<p>There's a really good article on wiki.wxpython.org entitled <a href=""http://wiki.wxpython.org/index.cgi/WorkingWithImages"" rel=""nofollow"">Working With Images</a>. The article mentions the possiblity of using wxWidgets (wxImage), PIL or PythonMagick. Personally, I've used PIL and wxWidgets and both make image manipulation fairly easy.</p>
",3
245,138250,python,63,How can I read the RGB value of a given pixel in Python?,"<p>If I open an image with <code>open(""image.jpg"")</code>, how can I get the RGB values of a pixel, if I have the coordinates of the pixel?</p>

<p>Then how can I do the reverse of this? Starting with a blank graphic, 'write' a pixel with a certain RGB value?</p>

<p>It would be so much better if I didn't have to download any additional libraries.</p>
","<p><strong>PyPNG - lightweight PNG decoder/encoder</strong></p>

<p>Although the question hints at JPG, I hope my answer will be useful to some people.</p>

<p>Here's how to read and write PNG pixels using <a href=""https://pypi.python.org/pypi/pypng/0.0.18"" rel=""nofollow"">PyPNG module</a>:</p>

<pre><code>import png, array

point = (2, 10) # coordinates of pixel to be painted red

reader = png.Reader(filename='image.png')
w, h, pixels, metadata = reader.read_flat()
pixel_byte_width = 4 if metadata['alpha'] else 3
pixel_position = point[0] + point[1] * w
new_pixel_value = (255, 0, 0, 0) if metadata['alpha'] else (255, 0, 0)
pixels[
  pixel_position * pixel_byte_width :
  (pixel_position + 1) * pixel_byte_width] = array.array('B', new_pixel_value)

output = open('image-with-red-dot.png', 'wb')
writer = png.Writer(w, h, **metadata)
writer.write_array(output, pixels)
output.close()
</code></pre>

<p>PyPNG is a single pure Python module less than 4000 lines long, including tests and comments.</p>

<p><a href=""http://www.pythonware.com/products/pil/"" rel=""nofollow"">PIL</a> is a more comprehensive imaging library, but it's also significantly heavier.</p>
",20
119,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Personally I work on a Java app, but I couldn't get by without perl for some supporting scripts. </p>

<p>I've got scripts to quickly flip what db I'm pointing at, scripts to run build scripts, scripts to scrape data &amp; compare stuff. </p>

<p>Sure I <em>could</em> do all that with java, or maybe shell scripts (I've got some of those too), but who wants to compile a class (making sure the classpath is set right etc) when you just need something quick and dirty. Knowing a scripting language can remove 90% of those boring/repetitive manual tasks.</p>
",1
122,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>You should also consider learning a functional programming language like Scala.  It has many of the advantages of Ruby, including a concise syntax, and powerful features like closures.  But it compiles to Java class files and and integrate seamlessly into a Java stack, which may make it much easier for your employer to swallow.</p>

<p>Scala isn't dynamically typed, but its ""implicit conversion"" feature gives many, perhaps even all of the benefits of dynamic typing, while retaining many of the advantages of static typing.</p>
",0
123,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>A lot of times some quick task comes up that isn't part of the main software you are developing.  Sometimes the task is one off ie compare this file to the database and let me know the differences.  It is a lot easier to do text parsing in Perl/Ruby/Python than it is in Java or C# (partially because it is a lot easier to use regular expressions).  It will probably take a lot less time to parse the text file using Perl/Ruby/Python (or maybe even vbscript <em>cringe</em> and then load it into the database than it would to create a Java/C# program to do it or to do it by hand.</p>

<p>Also, due to the ease at which most of the dynamic languages parse text, they are great for code generation.  Sure your final project must be in C#/Java/Transact SQL but instead of cutting and pasting 100 times, finding errors, and cutting and pasting another 100 times it is often (but not always) easier just to use a code generator.</p>

<p>A recent example at work is we needed to get data from one accounting system into our accounting system.  The system has an import format, but the old system had a completely different format (fixed width although some things had to be matched).  The task is not to create a program to migrate the data over and over again.  It is to shove the data into our system and then maintain it there going forward.  So even though we are a C# and SQL Server shop, I used Python to convert the data into the format that could be imported by our application.  Ultimately it doesn't matter that I used python, it matters that the data is in the system.  My boss was pretty impressed.</p>

<p>Where I often see the dynamic languages used for is testing.  It is much easier to create a Python/Perl/Ruby program to link to a web service and throw some data against it than it is to create the equivalent Java program.  You can also use python to hit against command line programs, generate a ton of garbage (but still valid) test data, etc.. quite easily.</p>

<p>The other thing that dynamic languages are big on is code generation.  Creating the C#/C++/Java code.  Some examples follow:</p>

<p>The first code generation task I often see is people using dynamic languages to maintain constants in the system.  Instead of hand coding a bunch of enums, a dynamic language can be used to fairly easily parse a text file and create the Java/C# code with the enums.</p>

<p>SQL is a whole other ball game but often you get better performance by cut and pasting 100 times instead of trying to do a function (due to caching of execution plans or putting complicated logic in a function causing you to go row by row instead of in a set).  In fact it is quite useful to use the table definition to create certain stored procedures automatically.</p>

<p>It is always better to get buy in for a code generator.  But even if you don't, is it more fun to spend time cutting/pasting or is it more fun to create a Perl/Python/Ruby script once and then have that generate the code?  If it takes you hours to hand code something but less time to create a code generator, then even if you use it once you have saved time and hence money.  If it takes you longer to create a code generator than it takes to hand code once but you know you will have to update the code more than once, it may still make sense.  If it takes you 2 hours to hand code, 4 hours to do the generator but you know you'll have to hand code equivalent work another 5 or 6 times than it is obviously better to create the generator.</p>

<p>Also some things are easier with dynamic languages than Java/C#/C/C++.  In particular regular expressions come to mind.  If you start using regular expressions in Perl and realize their value, you may suddenly start making use of the Java regular expression library if you haven't before.  If you have then there may be something else.</p>

<p>I will leave you with one last example of a task that would have been great for a dynamic language.  My work mate had to take a directory full of files and burn them to various cd's for various customers.  There were a few customers but a lot of files and you had to look in them to see what they were.  He did this task by hand....A Java/C# program would have saved time, but for one time and with all the development overhead it isn't worth it.  However slapping something together in Perl/Python/Ruby probably would have been worth it.  He spent several hours doing it.  It would have taken less than one to create the Python script to inspect each file, match which customer it goes to, and then move the file to the appropriate place.....Again, not part of the standard job.  But the task came up as a one off.  Is it better to do it yourself, spend the larger amount of time to make Java/C# do the task, or spend a much smaller amount of time doing it in Python/Perl/Ruby.  If you are using C or C++ the point is even more dramatic due to the extra concerns of programming in C or C++ (pointers, no array bounds checking, etc.).</p>
",78
120,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>One big reason to learn Perl or Ruby is to help you automate any complicated tasks that you have to do over and over.</p>

<p>Or if you have to analyse contents of log files and you need more mungeing than available using grep, sed, etc.</p>

<p>Also using other languages, e.g. Ruby, that don't have much ""setup cost"" will let you quickly prototype ideas before implementing them in C++, Java, etc.</p>

<p>HTH</p>

<p>cheers,</p>

<p>Rob</p>
",7
121,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p><strong>Edit:</strong> I wrote this before reading the update to the original question. See my other answer for a better answer to the updated question. I will leave this as is as a warning against being the fastest gun in the west =)</p>

<p>Over a decade ago, when I was learning the ways of the Computer, the Old Wise Men With Beards explained how C and C++ are the tools of the industry. No one used Pascal and only the foolhardy would risk their companies with assembler.</p>

<p>And of course, <strong>no one would even mention the awful slow ugly thing called Java</strong>. It will not be a tool for serious business.</p>

<p>So. Um. Replace the languages in the above story and perhaps you can predict the future. Perhaps you can't. Point is, Java will not be the Last Programming Language ever and also you will most likely switch employers as well. The future is charging at you 24 hours per day. Be prepared.</p>

<p>Learning new languages is good for you. Also, in some cases it can give you bragging rights for a long time. My first university course was in Scheme. So when people talk to me about the new <em>language du jour</em>, my response is something like ""First-class functions? That's so last century.""</p>

<p>And of course, you get <strong>more stuff done</strong> with a high-level language.</p>
",3
125,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>If all you have is a hammer, every problem begins to look like a nail.</p>

<p>There are times when having a screwdriver or pair of pliers makes a complicated problem trivial.</p>

<p>Nobody asks contractors, carpenters, etc, ""Why learn to use a screwdriver if i already have a hammer?"".  Really good contractors/carpenters have tons of tools and know how to use them well.  All programmers should be doing the same thing, learning to use new tools and use them well.</p>

<blockquote>
  <p>But before we use any power tools, lets
  take a moment to talk about shop safety.  Be sure
  to read, understand, and follow all the
  safety rules that come with your power
  tools.  Doing so will greatly reduce
  the risk of personal injury.  And remember
  this: there is no more important rule
  than to wear these: safety glasses
  -- Norm</p>
</blockquote>
",1
124,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Learning something with a flexible OOP system, like Lisp or Perl (see Moose), will allow you to better expand and understand your thoughts on software engineering.  Ideally, every language has some unique facet (whether it be CLOS or some other technique) that enhances, extends and grows your abilities as a programmer.</p>
",1
126,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Dynamic languages are fantastic for prototyping ideas. Often for performance reasons they won't work for permanent solutions or products. <em>But</em>, with languages like Python, which allow you to embed standard C/C++/Java inside them or visa versa, you can speed up the really critical bits but leave it glued together with the flexibility of a dynamic language.</p>

<p>...and so you get the best of both worlds. If you need to justify this in terms of why more people should learn these languages, just point out much faster you can develop the same software and how much more robust the solution is (because debugging/fixing problems in dynamic languages is in my experience, considerably easier!).</p>
",0
140,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Paul Graham posted an article several years ago about why Python programmers made better Java programmers. (<a href=""http://www.paulgraham.com/pypar.html"" rel=""nofollow"">http://www.paulgraham.com/pypar.html</a>)</p>

<p>Basically, regardless of whether the new language is relevant to the company's current methodology, learning a new language means learning new ideas. Someone who is willing to learn a language that isn't considered ""business class"" means that he is interested in programming, beyond just earning a paycheck.</p>

<p>To quote Paul's site:</p>

<blockquote>
  <p>And people don't learn Python because
  it will get them a job; they learn it
  because they genuinely like to program
  and aren't satisfied with the
  languages they already know.</p>
  
  <p>Which makes them exactly the kind of
  programmers companies should want to
  hire. Hence what, for lack of a better
  name, I'll call the Python paradox: if
  a company chooses to write its
  software in a comparatively esoteric
  language, they'll be able to hire
  better programmers, because they'll
  attract only those who cared enough to
  learn it. And for programmers the
  paradox is even more pronounced: the
  language to learn, if you want to get
  a good job, is a language that people
  don't learn merely to get a job.</p>
</blockquote>

<p>If an employer was willing to pay for the cost of learning a new language, chances are the people who volunteered to learn (assuming it wasn't a mandatory class) would be the same people to are already on the ""fast track"".</p>
",4
127,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Knowing grep and ruby made it possible to narrow down a problem, and verify the fix for, an issue involving tons of java exceptions on some production servers. Because I threw the solution together in ruby, it was done (designed, implemented, tested, run, bug-fixed, re-run, enhanced, results analyzed) in an afternoon instead of a couple of days. I could have solved the same problem using an all-java solution or a C# solution, but it most likely would have taken me longer.</p>

<p>Having dynamic language expertise also sometimes leads you to simpler solutions in less dynamic languages. In ruby, perl or python, you just intuitively reach for associative arrays (hashes, dictionaries, whatever word you want to use) for the smallest things, where you might be tempted to create a complex class hierarchy in a statically typed language when the problem doesn't necessarily demand it.</p>

<p>Plus you can plug in most scripting languages into most runtimes. So it doesn't have to be either/or.</p>
",0
128,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Learning a new language is a long-term process. In a couple of days you'll learn the basics, yes. But! As you probably know, the real practical applicability of any language is tied to the standard library and other available components. Learning how to use the efficiently requires a lot of hands-on experience. </p>

<p>Perhaps the only immediate short-term benefit is that developers learn to distinguish the nails that need a Python/Perl/Ruby -hammer. And, if they are any good, they can then study some more (online, perhaps!) and become real experts.</p>

<p>The long-term benefits are easier to imagine:</p>

<ol>
<li><p>The employee becomes a better developer. Better developer => better quality. We are living in a knowledge economy these days. It's wiser to invest in those brains that already work for you.</p></li>
<li><p>It is easier to adapt when the next big language emerges. It is very likely that the NBL will have many of the features present in today's scripting languages: first-class functions, closures, streams/generators, etc. </p></li>
<li><p>New market possibilities and ability to respond more quickly. Even if you are not writing Python, <em>other people are</em>. Your clients? Another vendor in the project? Perhaps a critical component was written in some other language? It will cost money and time, if you do not have people who can understand the code and interface with it.</p></li>
<li><p>Recruitment. If your company has a reputation of teaching new and interesting stuff to people, it will be easier to recruit the top people. <em>Everyone</em> is doing Java/C#/C++. It is not a very effective way to differentiate yourself in the job market.</p></li>
</ol>
",2
129,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>The ""real benefit"" that an employer could see is a better programmer who can implement solutions faster; however, you will not be able to provide any hard numbers to justify the expense and an employer will most likely have you work on what makes money now as opposed to having you work on things that make the future better. </p>

<p>The only time you can get training on the employer's dime, is when they perceive a need for it and it's cheaper than hiring a new person who already has that skill-set.</p>
",0
130,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Testing.</p>

<p>It's often quicker and easier to test your C#/Java application by using a dynamic language. You can do exploratory testing at the interactive prompt and quickly create automated test scripts.</p>
",0
131,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>I think the main benefits of dynamic languages can be boiled down to</p>

<ol>
<li>Rapid development</li>
<li>Glue</li>
</ol>

<p>The short design-code-test cycle time makes dynamic languages ideal for prototyping, tools, and quick &amp; dirty one-off scripts. IMHO, the latter two can make a huge impact on a programmer's productivity. It amazes me how many people trudge through things manually instead of whipping up a tool to do it for them. I think it's because they don't have something like Perl in their toolbox.</p>

<p>The ability to interface with just about anything (other programs or languages, databases, etc.) makes it easy to reuse existing work and automate tasks that would otherwise need to be done manually.</p>
",1
132,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Others have already explained why learning more languages makes you a better programmer.</p>

<p>As for convincing your boss it's worth it, this is probably just your company's culture.  Some places make career and skill progress a policy (move up or out), some places value it but leave it up to the employee's initiative, and some places are very focused on the bottom line.</p>

<p>If you have to explain why learning a language is a good thing to your boss, my advice would be to stay at work only as long as necessary, then go home and study new things on your own.</p>
",0
133,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Towards answering the updated question, its a chicken/egg problem.  The best way to justify an expense is to show how it reduces a cost somewhere else, so you may need to spend some extra/personal time to learn something first to build some kind of functional prototype.</p>

<p>Show your boss a demo like ""hey, i did this thing, and it saves me this much time [or better yet, this much $$], imagine if everyone could use this how much money we would save""</p>

<p>and then after they agree, explain how it is some other technology and that it is worth the expense to get more training, and training for others on how to do it better.</p>
",2
134,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>For after work work, for freelance jobs...:) and final to be programming literate as possible as...;) </p>
",0
135,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>I don't think anyone has mentioned this yet. Learning a new language can be fun! Surely that's a good enough reason to try something new. </p>
",14
136,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Dynamic languages are a different way to think and sometimes the practices you learn from a dynamic or functional language can transfer to the more statically typed languages but if you never take the time to learn different languages, you'll never get the benefit of having a knew way to think when you are coding.</p>
",0
137,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Given the increasing focus to running dynamic languages (da-vinci vm etc.) on the JVM and the increasing number of dynamic languages that do run on it (JRuby, Grrovy, Jython) I think the usecases are just increasing. Some of the scenarios I found really benifited are</p>

<ol>
<li><p><strong>Prototyping</strong>- use RoR or Grails to build quick prototypes with advantage of being able to runn it on the standard app server and (maybe) reuse existing services etc.</p></li>
<li><p><strong>Testing</strong>- right unit tests much much faster in dynamic languages</p></li>
<li><p><strong>Performance/automation test scripting</strong>- some of these tools are starting to allow the use standard dynamic language of choice to write the test scripts instead of proprietary script languages. Side benefit might be to the able to reuse some unit test code you've already written.</p></li>
</ol>
",1
138,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p><em>A good hockey player plays where the puck is. A great hockey player plays where the puck is going to be.
- Wayne Gretzky</em></p>

<p>Our industry is always changing. No language can be mainstream forever. To me Java, C++, .Net is where the puck is right now. And python, ruby, perl is where the puck is going to be. Decide for yourself if you wanna be good or great!</p>
",4
139,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Don't tell your employer that you want to learn Ruby. Tell him you want to learn about the state-of-the-art in web framework technologies. it just happens that the hottest ones are Django and Ruby on Rails.</p>
",1
141,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Don't bother your employer, spend ~$40 on a book, download some software, and devote some time each day to read/do exercises. In no time you'll be trained :)</p>
",0
117,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>It's all about broadening your horizons as a developer. If you limit yourself to only strong-typed languages, you may not end up the best programmer you could.</p>

<p>As for tasks, Python/Lua/Ruby/Perl are great for small simple tasks, like finding some files and renaming them. They also work great when paired with a framework (e.g. Rails, Django, Lua for Windows) for developing simple apps quickly. Hell, 37Signals is based on creating simple yet very useful apps in Ruby on Rails. </p>
",1
118,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>They're useful for the ""Quick Hack"" that is for plugging a gap in your main language for a quick (and potentially dirty) fix faster than it would take to develop the same in your main language. An example: a simple script in perl to go through a large text file and replace all instances of an email address with another is trivial with an amount of time taken in the 10 minute range. Hacking a console app together to do the same in your main language would take multiples of that.</p>

<p>You also have the benefit that exposing yourself to additional languages broadens your abilities and learning to attack problems from a different languages perspective can be as valuable as the language itself.</p>

<p>Finally, scripting languages are very useful in the realm of extension. Take LUA as an example. You can bolt a lua interpreter into your app with very little overhead and you now have a way to create rich scripting functionality that can be exposed to end users or altered and distributed quickly without requiring a rebuild of the entire app. This is used to great effect in many games most notably World of Warcraft.</p>
",1
111,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Philosophical issues aside, I know that I have gotten value from writing quick-and-dirty Ruby scripts to solve brute-force problems that Java was just too big for.  Last year I had three separate directory structures that were all more-or-less the same, but with lots of differences among the files (the client hadn't heard of version control and I'll leave the rest to your imagination).  </p>

<p>It would have taken a great deal of overhead to write an analyzer in Java, but in Ruby I had one working in about 40 minutes.</p>
",0
116,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>I primarily program in Java and C# but use dynamic languages (ruby/perl) to support smoother deployment, kicking off OS tasks, automated reporting, some log parsing, etc.</p>

<p>After a short time learning and experimenting with ruby or perl you should be able to write some regex manipulating scripts that can alter data formats or grab information from logs.   An example of a small ruby/perl script that could be written quickly would be a script to parse a very large log file and report out only a few events of interest in either a human readable format or a csv format. </p>

<p>Also, having experience with a variety of different programming languages should help you think of new ways to tackle problems in more structured languages like Java, C++, and C#.</p>
",9
114,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>check out the answers to this thead: </p>

<p><a href=""http://stackoverflow.com/questions/76364/what-is-the-single-most-effective-thing-you-did-to-improve-your-programming-ski#84112"">http://stackoverflow.com/questions/76364/what-is-the-single-most-effective-thing-you-did-to-improve-your-programming-ski#84112</a></p>

<p>Learning new languages is about keeping an open mind and learning new ways of doing things.</p>
",1
113,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>When I first learned Python, I worked for a Java shop.  Occasionally I'd have to do serious text-processing tasks which were much easier to do with quick Python scripts than Java programs.  For example, if I had to parse a complex CSV file and figure out which of its rows corresponded to rows in our Oracle database, this was much easier to do with Python than Java.</p>

<p>More than that, I found that learning Python made me a much better Java programmer; having learned many of the same concepts in another language I feel that I understand those concepts much better.  And as for what makes Python easier than Java, you might check out this question: <a href=""http://stackoverflow.com/questions/49824/java-python"">http://stackoverflow.com/questions/49824/java-python</a></p>
",4
112,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Often, dynamc languages (especially python and lua) are embedded in programs to add a more plugin-like functionality and because they are high-level languages that make it easy to add certain behavior, where a low/mid-level language is not needed.</p>

<p>Lua specificially lacks all the low-level system calls because it was designed for easeof-use to add functionality within the program, not as a general programming language.</p>
",0
110,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>I have often found that learning another language, especially a dynamically typed language, can teach you things about other languages and make you an overall better programmer.  Learning ruby, for example, will teach you Object Oriented programming in ways Java wont, and vice versa.  All in all, I believe that it is better to be a well rounded programmer than stuck in a single language.  It makes you more valuable to the companies/clients you work for.</p>
",1
109,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Let me turn your question on its head by asking what use it is to an American English speaker to learn another language?</p>

<p>The languages we speak (and those we program in) inform the way we think. This can happen on a fundamental level, such as c++ versus javascript versus lisp, or on an implementation level, in which a ruby construct provides a eureka moment for a solution in your ""real job.""</p>

<p>Speaking of your real job, if the market goes south and your employer decides to ""right size"" you, how do you think you'll stack up against a guy who is flexible because he's written software in tens of languages, instead of your limited exposure? All things being equal, I think the answer is clear.</p>

<p>Finally, you program for a living because you love programming... right?</p>
",21
108,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Do you expect to work for this company forever?  If you're ever out on the job market, pehaps some prospective employers will be aware of the <a href=""http://www.paulgraham.com/pypar.html"">Python paradox</a>.</p>
",5
115,84340,python,62,"Why learn Perl, Python, Ruby if the company is using C++, C# or Java as the application language?","<p>I wonder why would a C++, C#, Java developer want to learn a dynamic language?</p>

<p>Assuming the company won't switch its main development language from C++/C#/Java to a dynamic one what use is there for a dynamic language?</p>

<p>What helper tasks can be done by the dynamic languages faster or better after only a few days of learning than with the static language that you have been using for several years?</p>

<h2>Update</h2>

<p>After seeing the first few responses it is clear that there are two issues.
My main interest would be something that is justifiable to the employer as an expense.
That is, I am looking for justifications for the employer to finance the learning of a dynamic language. Aside from the obvious that the employee will have broader view, the
employers are usually looking for some ""real"" benefit.</p>
","<p>Im not sure if this is what you are looking for, but we write our main application with Java at the small company I work for, but have used python to write smaller scripts quickly.  Backup software, temporary scripts to manipulate data and push out results.  It just seems easier sometimes to sit down with python and write a quick script than mess with classes and stuff in java.  </p>

<p>Temp scripts that aren't going to stick around don't need a lot of design time wasted on them.</p>

<p>And I am lazy, but it is good to just learn as much as you can of course and see what features exist in other languages.  Knowing more never hurts you in future career changes :)</p>
",1
223,118260,python,43,How to start IDLE (Python editor) without using the shortcut on Windows Vista?,"<p>I'm trying to teach Komodo to fire up <a href=""http://en.wikipedia.org/wiki/IDLE%5F%28Python%29"">IDLE</a> when I hit the right keystrokes.  I can use the exact path of the shortcut in start menu in the Windows Explorer location bar to launch IDLE so I was hoping Komodo would be able to use it as well.  But, giving this path to Komodo causes it to say that 1 is returned.  This appears to be a failure as IDLE doesn't start up.</p>

<p>I thought I'd avoid the shortcut and just use the exact path.  I go to the start menu, find the shortcut for IDLE, right click to look at the properties.  The target is grayed out, but says ""Python 2.5.2"".  The ""Start in"" is set to, ""C:\Python25\"".  The ""Open File Location"" button is also grayed out.</p>

<p>How do I find out where this shortcut is really pointing?  I have tried starting python.exe and pythonw.exe both in C:\Python25, but neither starts up IDLE.</p>
","<p>There's a file called idle.py in your Python installation directory in Lib\idlelib\idle.py</p>

<p>If you run that file with Python, then IDLE should start.</p>

<blockquote>
  <p>c:\Python25\pythonw.exe c:\Python25\Lib\idlelib\idle.py</p>
</blockquote>
",53
224,118260,python,43,How to start IDLE (Python editor) without using the shortcut on Windows Vista?,"<p>I'm trying to teach Komodo to fire up <a href=""http://en.wikipedia.org/wiki/IDLE%5F%28Python%29"">IDLE</a> when I hit the right keystrokes.  I can use the exact path of the shortcut in start menu in the Windows Explorer location bar to launch IDLE so I was hoping Komodo would be able to use it as well.  But, giving this path to Komodo causes it to say that 1 is returned.  This appears to be a failure as IDLE doesn't start up.</p>

<p>I thought I'd avoid the shortcut and just use the exact path.  I go to the start menu, find the shortcut for IDLE, right click to look at the properties.  The target is grayed out, but says ""Python 2.5.2"".  The ""Start in"" is set to, ""C:\Python25\"".  The ""Open File Location"" button is also grayed out.</p>

<p>How do I find out where this shortcut is really pointing?  I have tried starting python.exe and pythonw.exe both in C:\Python25, but neither starts up IDLE.</p>
","<p>Here's another path you can use.  I'm not sure if this is part of the standard distribution or if the file is automatically created on first use of the IDLE.</p>

<pre><code>C:\Python25\Lib\idlelib\idle.pyw
</code></pre>
",8
272,156230,python,41,Python Dependency Injection Framework,"<p>Is there a framework equivalent to Guice (<a href=""http://code.google.com/p/google-guice"">http://code.google.com/p/google-guice</a>) for Python?</p>
","<p>Besides that:</p>

<ol>
<li><a href=""http://wiki.zope.org/zope3/ComponentArchitectureApproach"">Zope component architekture</a></li>
<li><a href=""http://pypi.python.org/pypi/PyContainer"">pyContainer</a></li>
</ol>
",5
271,156230,python,41,Python Dependency Injection Framework,"<p>Is there a framework equivalent to Guice (<a href=""http://code.google.com/p/google-guice"">http://code.google.com/p/google-guice</a>) for Python?</p>
","<p>I haven't used it, but the <a href=""http://springpython.webfactional.com/"">Spring Python</a> framework is based on Spring and implements <a href=""http://static.springsource.org/spring-python/1.2.x/sphinx/html/objects.html"">Inversion of Control</a>.</p>

<p>There also appears to be a Guice in Python project: <a href=""http://code.google.com/p/snake-guice/"">snake-guice</a></p>
",12
275,156330,python,40,Get timer ticks in Python,"<p>I'm just trying to time a piece of code. The pseudocode looks like:</p>

<pre><code>start = get_ticks()
do_long_code()
print ""It took "" + (get_ticks() - start) + "" seconds.""
</code></pre>

<p>How does this look in Python?</p>

<p>More specifically, how do I get the number of ticks since midnight (or however Python organizes that timing)?</p>
","<p>The <a href=""http://docs.python.org/lib/module-time.html"" rel=""nofollow"">time module</a> in python gives you access to the clock() function, which returns time in seconds as a floating point.</p>

<p>Different systems will have different accuracy based on their internal clock setup (ticks per second) but it's generally at least under 20milliseconds, and in some cases better than a few microseconds.</p>


",2
273,156330,python,40,Get timer ticks in Python,"<p>I'm just trying to time a piece of code. The pseudocode looks like:</p>

<pre><code>start = get_ticks()
do_long_code()
print ""It took "" + (get_ticks() - start) + "" seconds.""
</code></pre>

<p>How does this look in Python?</p>

<p>More specifically, how do I get the number of ticks since midnight (or however Python organizes that timing)?</p>
","<p>What you need is <code>time()</code> function from <code>time</code> module:</p>

<pre><code>import time
start = time.time()
do_long_code()
print ""it took"", time.time() - start, ""seconds.""
</code></pre>

<p>You can use <a href=""http://docs.python.org/lib/module-timeit.html"">timeit</a> module for more options though.</p>
",29
274,156330,python,40,Get timer ticks in Python,"<p>I'm just trying to time a piece of code. The pseudocode looks like:</p>

<pre><code>start = get_ticks()
do_long_code()
print ""It took "" + (get_ticks() - start) + "" seconds.""
</code></pre>

<p>How does this look in Python?</p>

<p>More specifically, how do I get the number of ticks since midnight (or however Python organizes that timing)?</p>
","<pre><code>import datetime

start = datetime.datetime.now()
do_long_code()
finish = datetime.datetime.now()
delta = finish - start
print delta.seconds
</code></pre>

<p>From midnight:</p>

<pre><code>import datetime

midnight = datetime.datetime.now().replace(hour=0, minute=0, second=0, microsecond=0)
now = datetime.datetime.now()
delta = now - midnight
print delta.seconds
</code></pre>
",2
276,156330,python,40,Get timer ticks in Python,"<p>I'm just trying to time a piece of code. The pseudocode looks like:</p>

<pre><code>start = get_ticks()
do_long_code()
print ""It took "" + (get_ticks() - start) + "" seconds.""
</code></pre>

<p>How does this look in Python?</p>

<p>More specifically, how do I get the number of ticks since midnight (or however Python organizes that timing)?</p>
","<p>In the <code>time</code> module, there are two timing functions: <code>time</code> and <code>clock</code>. <code>time</code> gives you ""wall"" time, if this is what you care about.</p>

<p>However, the python <a href=""http://docs.python.org/lib/module-time.html"">docs</a> say that <code>clock</code> should be used for benchmarking. Note that <code>clock</code> behaves different in separate systems:</p>

<ul>
<li>on MS Windows, it uses the Win32 function QueryPerformanceCounter(), with ""resolution typically better than a microsecond"". It has no special meaning, it's just a number (it starts counting the first time you call <code>clock</code> in your process).</li>
</ul>

<pre>
    # ms windows
    t0= time.clock()
    do_something()
    t= time.clock() - t0 # t is wall seconds elapsed (floating point)
</pre>

<ul>
<li>on *nix, <code>clock</code> reports CPU time. Now, this is different, and most probably the value you want, since your program hardly ever is the only process requesting CPU time (even if you have no other processes, the kernel uses CPU time now and then). So, this number, which typically is smallerÂ¹ than the wall time (i.e. time.time() - t0), is more meaningful when benchmarking code:</li>
</ul>

<pre>
    # linux
    t0= time.clock()
    do_something()
    t= time.clock() - t0 # t is CPU seconds elapsed (floating point)
</pre>

<p>Apart from all that, the <a href=""http://docs.python.org/lib/module-timeit.html"">timeit</a> module has the <code>Timer</code> class that is supposed to use what's best for benchmarking from the available functionality.</p>

<p>Â¹ unless threading gets in the wayâ¦</p>

<p>Â² Python â¥3.3: there are <a href=""http://www.python.org/dev/peps/pep-0418/#id18""><code>time.perf_counter()</code> and <code>time.process_time()</code></a>. <code>perf_counter</code> is being used by the <code>timeit</code> module.</p>
",31
319,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>If using psyco, I'd recommend <code>psyco.profile()</code> instead of <code>psyco.full()</code>. For a larger project it will be smarter about the functions that got optimized and use a ton less memory.</p>

<p>I would also recommend looking at iterators and generators. If your application is using large data sets this will save you many copies of containers.</p>
",1
318,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>Rather than just punting to C, I'd suggest:</p>

<p>Make your code count. Do more with fewer executions of lines:</p>

<ul>
<li>Change the algorithm to a faster one. It doesn't need to be fancy to be faster in many cases.</li>
<li>Use python primitives that happens to be written in C. Some things will force an interpreter dispatch where some wont. The latter is preferable</li>
<li>Beware of code that first constructs a big data structure followed by its consumation. Think the difference between range and xrange. In general it is often worth thinking about memory usage of the program. Using generators can sometimes bring O(n) memory use down to O(1).</li>
<li>Python is generally non-optimizing. Hoist invariant code out of loops, eliminate common subexpressions where possible in tight loops.</li>
<li>If something is expensive, then precompute or memoize it. Regular expressions can be compiled for instance.</li>
<li>Need to crunch numbers? You might want to check <code>numpy</code> out.</li>
<li>Many python programs are slow because they are bound by disk I/O or database access. Make sure you have something worthwhile to do while you wait on the data to arrive rather than just blocking. A weapon could be something like the <code>Twisted</code> framework.</li>
<li>Note that many crucial data-processing libraries have C-versions, be it XML, JSON or whatnot. They are often considerably faster than the Python interpreter.</li>
</ul>

<p>If all of the above fails for profiled and measured code, then begin thinking about the C-rewrite path.</p>
",26
317,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>This is the procedure that I try to follow:<br></p>

<ul>
 <li> import psyco; psyco.full()
 <li> If it's not fast enough, run the code through a profiler, see where the bottlenecks are. (DISABLE psyco for this step!)
 <li> Try to do things such as other people have mentioned to get the code at those bottlenecks as fast as possible.
 <ul><li>Stuff like [str(x) for x in l] or [x.strip() for x in l] is much, much slower than map(str, x) or map(str.strip, x). </ul>
 <li> After this, if I still need more speed, it's actually really easy to get PyRex up and running. I first copy a section of python code, put it directly in the pyrex code, and see what happens. Then I twiddle with it until it gets faster and faster.
</ul>
",3
316,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>I'm surprised no one mentioned ShedSkin: <a href=""http://code.google.com/p/shedskin/"">http://code.google.com/p/shedskin/</a>, it automagically converts your python program to C++ and in some benchmarks yields better improvements than psyco in speed.  </p>

<p>Plus anecdotal stories on the simplicity: <a href=""http://pyinsci.blogspot.com/2006/12/trying-out-latest-release-of-shedskin.html"">http://pyinsci.blogspot.com/2006/12/trying-out-latest-release-of-shedskin.html</a></p>

<p>There are limitations though, please see: <a href=""http://tinyurl.com/shedskin-limitations"">http://tinyurl.com/shedskin-limitations</a></p>
",7
315,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>Regarding ""Secondly: When writing a program from scratch in python, what are some good ways to greatly improve performance?""</p>

<p>Remember the Jackson rules of optimization: </p>

<ul>
<li>Rule 1: Don't do it.</li>
<li>Rule 2 (for experts only): Don't do it yet.</li>
</ul>

<p>And the Knuth rule:</p>

<ul>
<li>""Premature optimization is the root of all evil.""</li>
</ul>

<p>The more useful rules are in the <a href=""http://www.cs.cmu.edu/~jch/java/rules.html"">General Rules for Optimization</a>.</p>

<ol>
<li><p>Don't optimize as you go.  First get it right.  Then get it fast.  Optimizing a wrong program is still wrong.</p></li>
<li><p>Remember the 80/20 rule.</p></li>
<li><p>Always run ""before"" and ""after"" benchmarks.  Otherwise, you won't know if you've found the 80%.</p></li>
<li><p>Use the right algorithms and data structures.  This rule should be first.  Nothing matters as much as algorithm and data structure.</p></li>
</ol>

<p><strong>Bottom Line</strong></p>

<p>You can't prevent or avoid the ""optimize this program"" effort.  It's part of the job.  You have to plan for it and do it carefully, just like the design, code and test activities.</p>
",40
314,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>Just a note on using psyco: In some cases it can actually produce slower run-times. Especially when trying to use psyco with code that was written in C. I can't remember the the article I read this, but the  <code>map()</code> and <code>reduce()</code> functions were mentioned specifically. Luckily you can tell psyco not to handle specified functions and/or modules.</p>
",3
312,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>The usual suspects -- profile it, find the most expensive line, figure out what it's doing, fix it. If you haven't done much profiling before, there could be some big fat quadratic loops or string duplication hiding behind otherwise innocuous-looking expressions.</p>

<p>In Python, two of the most common causes I've found for non-obvious slowdown are string concatenation and generators. Since Python's strings are immutable, doing something like this:</p>

<pre><code>result = u""""
for item in my_list:
    result += unicode (item)
</code></pre>

<p>will copy the <em>entire</em> string twice per iteration. This has been well-covered, and the solution is to use <code>"""".join</code>:</p>

<pre><code>result = """".join (unicode (item) for item in my_list)
</code></pre>

<p>Generators are another culprit. They're very easy to use and can simplify some tasks enormously, but a poorly-applied generator will be much slower than simply appending items to a list and returning the list.</p>

<p>Finally, <strong>don't be afraid to rewrite bits in C!</strong> Python, as a dynamic high-level language, is simply not capable of matching C's speed. If there's one function that you can't optimize any more in Python, consider extracting it to an extension module.</p>

<p>My favorite technique for this is to maintain both Python and C versions of a module. The Python version is written to be as clear and obvious as possible -- any bugs should be easy to diagnose and fix. Write your tests against this module. Then write the C version, and test it. Its behavior should in all cases equal that of the Python implementation -- if they differ, it should be very easy to figure out which is wrong and correct the problem.</p>
",22
308,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>First thing that comes to mind: <a href=""http://psyco.sourceforge.net/"" rel=""nofollow"">psyco</a>. It runs only on x86, for the time being.</p>

<p>Then, <a href=""http://code.activestate.com/recipes/277940/"" rel=""nofollow"">constant binding</a>. That is, make all global references (and <em>global.attr</em>, <em>global.attr.attr</em>â¦) be local names inside of functions and methods. This isn't always successful, but in general it works. It can be done by hand, but obviously is tedious.</p>

<p>You said apart from in-code optimization, so I won't delve into this, but keep your mind open for typical mistakes (<code>for i in range(10000000)</code> comes to mind) that people do.</p>
",16
311,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>Cython and pyrex can be used to generate c code using a python-like syntax. Psyco is also fantastic for appropriate projects (sometimes you'll not notice much speed boost, sometimes it'll be as much as 50x as fast).
I still reckon the best way is to profile your code (cProfile, etc.) and then just code the bottlenecks as c functions for python.</p>
",9
313,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>People have given some good advice, but you have to be aware that when high performance is needed, the python model is: punt to c.  Efforts like psyco may in the future help a bit, but python just isn't a fast language, and it isn't designed to be.  Very few languages have the ability to do the dynamic stuff really well and still generate very fast code; at least for the forseeable future (and some of the design works against fast compilation) that will be the case.</p>

<p>So, if you really find yourself in this bind, your best bet will be to isolate the parts of your system that are unacceptable slow in (good) python, and design around the idea that you'll rewrite those bits in C.  Sorry.  Good design can help make this less painful.  Prototype it in python first though, then you've easily got a sanity check on your c, as well.</p>

<p>This works well enough for things like numpy, after all.  I can't emphasize enough how much good design will help you though.  If you just iteratively poke at your python bits and replace the slowest ones with C, you may end up with a big mess.  Think about exactly where the C bits are needed, and how they can be minimized and encapsulated sensibly.</p>
",4
309,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>This won't necessarily speed up any of your code, but is critical knowledge when programming in Python if you want to avoid slowing your code down.  The ""Global Interpreter Lock"" (GIL), has the potential to drastically reduce the speed of your multi-threaded program if its behavior is not understood (yes, this bit me ... I had a nice 4 processor machine that wouldn't use more than 1.2 processors at a time).  There's an introductory article with some links to get you started at <a href=""http://smoothspan.wordpress.com/2007/09/14/guido-is-right-to-leave-the-gil-in-python-not-for-multicore-but-for-utility-computing/"" rel=""nofollow"">SmoothSpan</a>.</p>
",4
310,172720,python,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
","<p>Run your app through the Python profiler.
Find a serious bottleneck.
Rewrite that bottleneck in C.
Repeat.</p>
",4
307,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>The libraries at <a href=""http://openidenabled.com/"" rel=""nofollow"">OpenID Enabled</a> ship with examples that are sufficient to run a local test provider.  Look in the examples/djopenid/ directory of the python-openid source distribution.  Running that will give you an instance of <a href=""http://openidenabled.com/python-openid/trunk/examples/server/"" rel=""nofollow"">this test provider</a>.</p>
",13
305,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>I have no problems testing with <a href=""http://myopenid.com"" rel=""nofollow"">myopenid.com</a>. I thought there would be a problem testing on my local machine but it just worked. (I'm using ASP.NET with DotNetOpenId library).</p>

<p>The 'realm' and return url must contain the port number like '<a href=""http://localhost:93359"" rel=""nofollow"">http://localhost:93359</a>'.</p>

<p>I assume it works OK because the provider does a client side redirect.</p>
",9
304,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>You could probably use the django OpenID library to write a provider to test against. Have one that always authenticates and one that always fails.</p>
",3
303,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>Why not run an OpenID provider from your local machine?</p>

<p>If you are a .Net developer there is an OpenID provider library for .Net at <a href=""http://code.google.com/p/dotnetopenid/"" rel=""nofollow"">Google Code</a>. This uses the standard .Net profile provider mechanism and wraps it with an OpenID layer. We are using it to add OpenID to our custom authentication engine.</p>

<p>If you are working in another language/platform there are a number of OpenID implementation avalaiable from the OpenID community site <a href=""http://wiki.openid.net/Libraries"" rel=""nofollow"">here</a>.</p>
",1
302,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>I'm using <a href=""http://siege.org/projects/phpMyID/"" rel=""nofollow"">phpMyID</a> to authenticate at StackOverflow right now. Generates a standard HTTP auth realm and works perfectly. It should be exactly what you need.</p>
",3
301,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>I'm also looking into this.  I too am working on a Django project that might utilize Open Id.  For references, check out:</p>

<ul>
<li><a href=""http://siege.org/projects/phpMyID/"" rel=""nofollow"">PHPMyId</a></li>
<li><a href=""http://openid.net/get/"" rel=""nofollow"">OpenId's page</a></li>
</ul>

<p>Hopefully someone here has tackled this issue.</p>
",3
306,172040,python,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
","<p>You shouldn't be having trouble developing against your own machine. What error are you getting?</p>

<p>An OpenID provider will ask you to give your site (in this case <a href=""http://localhost:8000"" rel=""nofollow"">http://localhost:8000</a> or similar) access to your identity. If you click ok then it will redirect you that url. I've never had problems with <a href=""http://www.livejournal.com"" rel=""nofollow"">livejournal</a> and I expect that <a href=""http://myopenid.com"" rel=""nofollow"">myopenid.com</a> will work too.</p>

<p>If you're having problems developing locally I suggest that the problem you're having is unrelated to the url being localhost, but something else. Without an error message or problem description it's impossible to say more.</p>

<p><strong>Edit</strong>: It turns out that Yahoo do things differently to other OpenID providers that I've come across and disallow redirections to ip address, sites without a correct tld in their domain name and those that run on ports other than 80 or 443. See <a href=""http://openid.net/pipermail/general/2008-January/004024.html"" rel=""nofollow"">here</a> for a post from a Yahoo developer on this subject. <a href=""http://openid.net/pipermail/general/2008-January/004023.html"" rel=""nofollow"">This post</a> offers a work around, but I would suggest that for development myopenid.com would be far simpler than working around Yahoo, or running your own provider.</p>
",1
215,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>Try 4.0/100</p>
",1
216,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>A simple route 4 / 100.0 </p>

<p>or</p>

<p>4.0 / 100</p>
",1
217,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>You need to tell Python to use floating point values, not integers. You can do that simply by using a decimal point yourself in the inputs:</p>

<pre><code>&gt;&gt;&gt; 4/100.0
0.040000000000000001
</code></pre>
",3
218,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>There are three options:</p>

<pre><code>&gt;&gt;&gt; 4 / float(100)
0.04
&gt;&gt;&gt; 4 / 100.0
0.04
</code></pre>

<p>which is the same behavior as the C, C++, Java etc, or </p>

<pre><code>&gt;&gt;&gt; from __future__ import division
&gt;&gt;&gt; 4 / 100
0.04
</code></pre>

<p>You can also activate this behavior by passing the argument <code>-Qnew</code> to the Python interpreter:</p>

<pre><code>$ python -Qnew
&gt;&gt;&gt; 4 / 100
0.04
</code></pre>

<p>The second option will be the default in Python 3.0. If you want to have the old integer division, you have to use the <code>//</code> operator. </p>

<p><strong>Edit</strong>: added section about <code>-Qnew</code>, thanks to <a href=""http://stackoverflow.com/users/6899/"">Î¤ÎÎ©Î¤ÎÎÎÎ¥</a>!</p>
",79
219,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>Make one or both of the terms a floating point number, like so:</p>

<pre><code>4.0/100.0
</code></pre>

<p>Alternatively, turn on the feature that will be default in Python 3.0, 'true division', that does what you want. At the top of your module or script, do:</p>

<pre><code>from __future__ import division
</code></pre>
",7
220,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>You cant get a decimal value by dividing one integer with another, you'll allways get an integer that way (result truncated to integer). You need at least one value to be a decimal number.</p>
",0
221,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>Other answers suggest how to get a floating-point value.  While this wlil be close to what you want, it won't be exact:</p>

<pre><code>&gt;&gt;&gt; 0.4/100.
0.0040000000000000001
</code></pre>

<p>If you actually want a <em>decimal</em> value, do this:</p>

<pre><code>&gt;&gt;&gt; import decimal
&gt;&gt;&gt; decimal.Decimal('4') / decimal.Decimal('100')
Decimal(""0.04"")
</code></pre>

<p>That will give you an object that properly knows that 4 / 100 in <em>base 10</em> is ""0.04"".  Floating-point numbers are actually in base 2, i.e. binary, not decimal.</p>
",21
222,117250,python,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
","<p>You might want to look at Python's <a href=""http://docs.python.org/lib/module-decimal.html"" rel=""nofollow"">decimal</a> package, also.  This will provide nice decimal results.</p>

<pre><code>&gt;&gt;&gt; decimal.Decimal('4')/100
Decimal(""0.04"")
</code></pre>
",2
98,75440,python,30,How do I get the name of a python class as a string?,"<p>What method do I call to get the name of a class?</p>
","<p>It's not a method, it's a field.  The field is called <code>__name__</code>.  <code>class.__name__</code> will give the name of the class as a string.  <code>object.__class__.__name__</code> will give the name of the class of an object.</p>
",28
99,75440,python,30,How do I get the name of a python class as a string?,"<p>What method do I call to get the name of a class?</p>
","<pre><code>In [1]: class test(object):
   ...:     pass
   ...: 

In [2]: test.__name__
Out[2]: 'test'
</code></pre>
",33
100,75440,python,30,How do I get the name of a python class as a string?,"<p>What method do I call to get the name of a class?</p>
","<p>In [8]: <code>str('2'.__class__)</code><br />
Out[8]: <code>""&lt;type 'str'&gt;""</code><br /></p>

<p>In [9]: <code>str(len.__class__)</code><br />
Out[9]: <code>""&lt;type 'builtin_function_or_method'&gt;""</code><br /></p>

<p>In [10]: <code>str(4.6.__class__)</code><br />
Out[10]: <code>""&lt;type 'float'&gt;""</code><br /></p>

<p>Or, as was pointed out before,<br /></p>

<p>In [11]: <code>4.6.__class__.__name__</code><br />
Out[11]: <code>'float'</code></p>
",1
101,75440,python,30,How do I get the name of a python class as a string?,"<p>What method do I call to get the name of a class?</p>
","<p>I agree with Mr.Shark, but if you have an instance of a class, you'll need to use its <code>__class__</code> member:</p>

<pre><code>&gt;&gt;&gt; class test():
...     pass
...
&gt;&gt;&gt; a_test = test()
&gt;&gt;&gt;
&gt;&gt;&gt; a_test.__name__
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: test instance has no attribute '__name__'
&gt;&gt;&gt;
&gt;&gt;&gt; a_test.__class__
&lt;class __main__.test at 0x009EEDE0&gt;
</code></pre>
",6
330,174890,python,26,How to output CDATA using ElementTree,"<p>I've discovered that cElementTree is about 30 times faster than <code>xml.dom.minidom</code> and I'm rewriting my XML encoding/decoding code. However, I need to output XML that contains CDATA sections and there doesn't seem to be a way to do that with ElementTree.</p>

<p>Can it be done?</p>
","<p>After a bit of work, I found the answer myself. Looking at the ElementTree.py source code, I found there was special handling of XML comments and preprocessing instructions. What they do is create a factory function for the special element type that uses a special (non-string) tag value to differentiate it from regular elements.</p>

<pre><code>def Comment(text=None):
    element = Element(Comment)
    element.text = text
    return element
</code></pre>

<p>Then in the <code>_write</code> function of ElementTree that actually outputs the XML, there's a special case handling for comments:</p>

<pre><code>if tag is Comment:
    file.write(""&lt;!-- %s --&gt;"" % _escape_cdata(node.text, encoding))
</code></pre>

<p>In order to support CDATA sections, I create a factory function called <code>CDATA</code>, extended the ElementTree class and changed the <code>_write</code> function to handle the CDATA elements.</p>

<p>This still doesn't help if you want to parse an XML with CDATA sections and then output it again with the CDATA sections, but it at least allows you to create XMLs with CDATA sections programmatically, which is what I needed to do.</p>

<p>The implementation seems to work with both ElementTree and cElementTree.</p>

<pre><code>import elementtree.ElementTree as etree
#~ import cElementTree as etree

def CDATA(text=None):
    element = etree.Element(CDATA)
    element.text = text
    return element

class ElementTreeCDATA(etree.ElementTree):
    def _write(self, file, node, encoding, namespaces):
        if node.tag is CDATA:
            text = node.text.encode(encoding)
            file.write(""\n&lt;![CDATA[%s]]&gt;\n"" % text)
        else:
            etree.ElementTree._write(self, file, node, encoding, namespaces)

if __name__ == ""__main__"":
    import sys

    text = """"""
    &lt;?xml version='1.0' encoding='utf-8'?&gt;
    &lt;text&gt;
    This is just some sample text.
    &lt;/text&gt;
    """"""

    e = etree.Element(""data"")
    cdata = CDATA(text)
    e.append(cdata)
    et = ElementTreeCDATA(e)
    et.write(sys.stdout, ""utf-8"")
</code></pre>
",21
329,174890,python,26,How to output CDATA using ElementTree,"<p>I've discovered that cElementTree is about 30 times faster than <code>xml.dom.minidom</code> and I'm rewriting my XML encoding/decoding code. However, I need to output XML that contains CDATA sections and there doesn't seem to be a way to do that with ElementTree.</p>

<p>Can it be done?</p>
","<p>It's not possible AFAIK... which is a pity.  Basically, ElementTree modules assume that the reader is 100% XML compliant, so it shouldn't matter if they output a section as CDATA or some other format that generates the equivalent text.</p>

<p>See <a href=""https://mail.python.org/pipermail/python-list/2005-June/304602.html"" rel=""nofollow"">this thread</a> on the Python mailing list for more info.  Basically, they recommend some kind of DOM-based XML library instead.</p>
",6
5,17250,python,24,Create an encrypted ZIP file in Python,"<p>I'm creating an ZIP file with ZipFile in Python 2.5, it works ok so far:</p>

<pre><code>import zipfile, os

locfile = ""test.txt""
loczip = os.path.splitext (locfile)[0] + "".zip""
zip = zipfile.ZipFile (loczip, ""w"")
zip.write (locfile)
zip.close()
</code></pre>

<p>but I couldn't find how to encrypt the files in the ZIP file.
I could use system and call PKZIP -s, but I suppose there must be a more ""Pythonic"" way.  I'm looking for an open source solution.</p>
","<p>You can use the <a href=""http://www.chilkatsoft.com/python.asp"" rel=""nofollow"">Chilkat</a> library.  It's commercial, but has a free evaluation and seems pretty nice.</p>

<p>Here's an example I got from <a href=""http://www.example-code.com/python/zip.asp"" rel=""nofollow"">here</a>:</p>

<pre><code>import chilkat

# Demonstrates how to create a WinZip-compatible 128-bit AES strong encrypted zip
zip = chilkat.CkZip()
zip.UnlockComponent(""anything for 30-day trial"")

zip.NewZip(""strongEncrypted.zip"")

# Set the Encryption property = 4, which indicates WinZip compatible AES encryption.
zip.put_Encryption(4)
# The key length can be 128, 192, or 256.
zip.put_EncryptKeyLength(128)
zip.SetPassword(""secret"")

zip.AppendFiles(""exampleData/*"",True)
zip.WriteZip()
</code></pre>
",0
46,43290,python,22,How to generate urls in django,"<p>In Django's template language, you can use <code>{% url [viewname] [args] %}</code> to generate a URL to a specific view with parameters. How can you programatically do the same in Python code?</p>

<p>What I need is to create a list of menu items where each item has name, URL, and an active flag  (whether it's the current page or not). This is because it will be a lot cleaner to do this in Python than the template language.</p>
","<p>Be aware that using <code>reverse()</code> requires that your urlconf module is 100% error free and can be processed - iow no <code>ViewDoesNotExist</code> errors or so, or you get the dreaded <code>NoReverseMatch</code> exception (errors in templates usually fail silently resulting in <code>None</code>).</p>
",4
45,43290,python,22,How to generate urls in django,"<p>In Django's template language, you can use <code>{% url [viewname] [args] %}</code> to generate a URL to a specific view with parameters. How can you programatically do the same in Python code?</p>

<p>What I need is to create a list of menu items where each item has name, URL, and an active flag  (whether it's the current page or not). This is because it will be a lot cleaner to do this in Python than the template language.</p>
","<p>I'm using two different approaches in my <code>models.py</code>. The first is the <code>permalink</code> decorator:</p>

<pre><code>from django.db.models import permalink

def get_absolute_url(self): 
    """"""Construct the absolute URL for this Item.""""""
    return ('project.app.views.view_name', [str(self.id)])
get_absolute_url = permalink(get_absolute_url)
</code></pre>

<p>You can also call <code>reverse</code> directly:</p>

<pre><code>from django.core.urlresolvers import reverse

def get_absolute_url(self): 
    """"""Construct the absolute URL for this Item.""""""
    return reverse('project.app.views.view_name', None, [str(self.id)])
</code></pre>
",8
44,43290,python,22,How to generate urls in django,"<p>In Django's template language, you can use <code>{% url [viewname] [args] %}</code> to generate a URL to a specific view with parameters. How can you programatically do the same in Python code?</p>

<p>What I need is to create a list of menu items where each item has name, URL, and an active flag  (whether it's the current page or not). This is because it will be a lot cleaner to do this in Python than the template language.</p>
","<p>If you need to use something similar to the <code>{% url %}</code> template tag in your code, Django provides the <code>django.core.urlresolvers.reverse()</code>. The <code>reverse</code> function has the following signature:</p>

<pre><code>reverse(viewname, urlconf=None, args=None, kwargs=None)
</code></pre>

<p><a href=""https://docs.djangoproject.com/en/dev/ref/urlresolvers/"">https://docs.djangoproject.com/en/dev/ref/urlresolvers/</a></p>
",32
298,169070,python,19,Python - How do I write a decorator that restores the cwd?,"<p>How do I write a decorator that restores the current working directory to what it was before the decorated function was called?  In other words, if I use the decorator on a function that does an os.chdir(), the cwd will not be changed after the function is called.</p>
","<p>The answer for a decorator has been given; it works at the function definition stage as requested.</p>

<p>With Python 2.5+, you also have an option to do that at the function <em>call</em> stage using a context manager:</p>

<pre><code>from __future__ import with_statement # needed for 2.5 â¤ Python &lt; 2.6
import contextlib, os

@contextlib.contextmanager
def remember_cwd():
    curdir= os.getcwd()
    try: yield
    finally: os.chdir(curdir)
</code></pre>

<p>which can be used if needed at the function call time as:</p>

<pre><code>print ""getcwd before:"", os.getcwd()
with remember_cwd():
    walk_around_the_filesystem()
print ""getcwd after:"", os.getcwd()
</code></pre>

<p>It's a nice option to have.</p>

<p>EDIT: I added error handling as suggested by codeape. Since my answer has been voted up, it's fair to offer a complete answer, all other issues aside.</p>
",27
299,169070,python,19,Python - How do I write a decorator that restores the cwd?,"<p>How do I write a decorator that restores the current working directory to what it was before the decorated function was called?  In other words, if I use the decorator on a function that does an os.chdir(), the cwd will not be changed after the function is called.</p>
","<p>The given answers fail to take into account that the wrapped function may raise an exception. In that case, the directory will never be restored. The code below adds exception handling to the previous answers.</p>

<p>as a decorator:</p>

<pre><code>def preserve_cwd(function):
    @functools.wraps(function)
    def decorator(*args, **kwargs):
        cwd = os.getcwd()
        try:
            return function(*args, **kwargs)
        finally:
            os.chdir(cwd)
    return decorator
</code></pre>

<p>and as a context manager:</p>

<pre><code>@contextlib.contextmanager
def remember_cwd():
    curdir = os.getcwd()
    try:
        yield
    finally:
        os.chdir(curdir)
</code></pre>
",16
297,169070,python,19,Python - How do I write a decorator that restores the cwd?,"<p>How do I write a decorator that restores the current working directory to what it was before the decorated function was called?  In other words, if I use the decorator on a function that does an os.chdir(), the cwd will not be changed after the function is called.</p>
","<pre><code>def preserve_cwd(function):
   def decorator(*args, **kwargs):
      cwd = os.getcwd()
      result = function(*args, **kwargs)
      os.chdir(cwd)
      return result
   return decorator
</code></pre>

<p>Here's how it's used:</p>

<pre><code>@preserve_cwd
def test():
  print 'was:',os.getcwd()
  os.chdir('/')
  print 'now:',os.getcwd()

&gt;&gt;&gt; print os.getcwd()
/Users/dspitzer
&gt;&gt;&gt; test()
was: /Users/dspitzer
now: /
&gt;&gt;&gt; print os.getcwd()
/Users/dspitzer
</code></pre>
",3
0,11060,python,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
","<p>I started writing up a summary of my experience with my own code generator, then went back and re-read your question and found you had already touched upon the same issues yourself, focus on the execution results instead of the code layout/look.</p>

<p>Problem is, this is hard to test, the generated code might not be suited to actually run in the environment of the unit test system, and how do you encode the expected results?</p>

<p>I've found that you need to break down the code generator into smaller pieces and unit test those. Unit testing a full code generator is more like integration testing than unit testing if you ask me.</p>
",8
1,11060,python,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
","<p>Yes, results are the ONLY thing that matters. The real chore is writing a framework that allows your generated code to run independently... spend your time there.</p>
",0
2,11060,python,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
","<p>If you are running on *nux you might consider dumping the unittest framework in favor of a bash script or makefile. on windows you might consider building a shell app/function that runs the generator and then uses the code (as another process) and unittest that.</p>

<p>A third option would be to generate the code and then build an app from it that includes nothing but a unittest. Again you would need a shell script or whatnot to run this for each input. As to how to encode the expected behavior, it occurs to me that it could be done in much the same way as you would for the C++ code just using the generated interface rather than the C++ one.</p>
",0
331,175240,python,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
","<p><em>I think this is a deeper issue than you realize</em>. Simply changing the file from Unicode into ASCII is easy, however, getting all of the Unicode characters to translate into reasonable ASCII counterparts (many letters are not available in both encodings) is another.</p>

<p>This Python Unicode tutorial may give you a better idea of what happens to Unicode strings that are translated to ASCII: <a href=""http://www.reportlab.com/i18n/python_unicode_tutorial.html"" rel=""nofollow"">http://www.reportlab.com/i18n/python_unicode_tutorial.html</a></p>

<p><strong>Here's a useful quote from the site:</strong></p>

<blockquote>
  <p>Python 1.6 also gets a ""unicode""
  built-in function, to which you can
  specify the encoding:</p>
</blockquote>

<pre><code>&gt; &gt;&gt;&gt; unicode('hello') u'hello'
&gt; &gt;&gt;&gt; unicode('hello', 'ascii') u'hello'
&gt; &gt;&gt;&gt; unicode('hello', 'iso-8859-1') u'hello'
&gt; &gt;&gt;&gt;
</code></pre>

<blockquote>
  <p>All three of these return the same
  thing, since the characters in 'Hello'
  are common to all three encodings.</p>
  
  <p>Now let's encode something with a
  European accent, which is outside of
  ASCII. What you see at a console may
  depend on your operating system
  locale; Windows lets me type in
  ISO-Latin-1.</p>
</blockquote>

<pre><code>&gt; &gt;&gt;&gt; a = unicode('AndrÃ©','latin-1')
&gt; &gt;&gt;&gt; a u'Andr\202'
</code></pre>

<blockquote>
  <p>If you can't type an acute letter e,
  you can enter the string 'Andr\202',
  which is unambiguous.</p>
  
  <p>Unicode supports all the common
  operations such as iteration and
  splitting. We won't run over them
  here.</p>
</blockquote>
",11
334,175240,python,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
","<p>Here's some simple (and stupid) code to do encoding translation.  I'm assuming (but you shouldn't) that the input file is in UTF-16 (Windows calls this simply 'Unicode').</p>

<pre><code>input_codec = 'UTF-16'
output_codec = 'ASCII'

unicode_file = open('filename')
unicode_data = unicode_file.read().decode(input_codec)
ascii_file = open('new filename', 'w')
ascii_file.write(unicode_data.write(unicode_data.encode(output_codec)))
</code></pre>

<p>Note that this will not work if there are any characters in the Unicode file that are not also ASCII characters.  You can do the following to turn unrecognized characters into '?'s:</p>

<pre><code>ascii_file.write(unicode_data.write(unicode_data.encode(output_codec, 'replace')))
</code></pre>

<p>Check out <a href=""http://docs.python.org/library/stdtypes.html#str.encode"" rel=""nofollow"">the docs</a> for more simple choices.  If you need to do anything more sophisticated, you may wish to check out <a href=""http://code.activestate.com/recipes/251871/"" rel=""nofollow"">The UNICODE Hammer</a> at the Python Cookbook.</p>
",2
335,175240,python,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
","<p>It's important to note that there is no 'Unicode' file format.  Unicode can be encoded to bytes in several different ways.  Most commonly UTF-8 or UTF-16.  You'll need to know which one your 3rd-party tool is outputting.  Once you know that, converting between different encodings is pretty easy:</p>

<pre><code>in_file = open(""myfile.txt"", ""rb"")
out_file = open(""mynewfile.txt"", ""wb"")

in_byte_string = in_file.read()
unicode_string = bytestring.decode('UTF-16')
out_byte_string = unicode_string.encode('ASCII')

out_file.write(out_byte_string)
out_file.close()
</code></pre>

<p>As noted in the other replies, you're probably going to want to supply an error handler to the encode method.  Using 'replace' as the error handler is simple, but will mangle your text if it contains characters that cannot be represented in ASCII.</p>
",0
332,175240,python,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
","<p>Like this:</p>

<pre><code>uc = open(filename).read().decode('utf8')
ascii = uc.decode('ascii')
</code></pre>

<p>Note, however, that this will <strong>fail</strong> with a <code>UnicodeDecodeError</code> exception if there are any characters that can't be converted to ASCII.</p>

<p>EDIT: As Pete Karl just pointed out, there is no one-to-one mapping from Unicode to ASCII.  So some characters simply can't be converted in an information-preserving way.  Moreover, standard ASCII is more or less a subset of UTF-8, so you don't really even need to do any decoding.</p>
",2
333,175240,python,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
","<p>You can convert the file easily enough just using the <code>unicode</code> function, but you'll run into problems with Unicode characters without a straight ASCII equivalent.</p>

<p><a href=""http://www.peterbe.com/plog/unicode-to-ascii"">This blog</a> recommends the <code><a href=""http://www.python.org/doc/2.5.2/lib/module-unicodedata.html"">unicodedata </a></code> module, which seems to take care of roughly converting characters without direct corresponding ASCII values, e.g.</p>

<pre><code>&gt;&gt;&gt; title = u""KlÃ¼ft skrÃ¤ms infÃ¶r pÃ¥ fÃ©dÃ©ral Ã©lectoral groÃe""
</code></pre>

<p>is typically converted to </p>

<pre><code>Klft skrms infr p fdral lectoral groe
</code></pre>

<p>which is pretty wrong. However, using the <code>unicodedata</code> module, the result can be much closer to the original text:</p>

<pre><code>&gt;&gt;&gt; import unicodedata
&gt;&gt;&gt; unicodedata.normalize('NFKD', title).encode('ascii','ignore')
'Kluft skrams infor pa federal electoral groe'
</code></pre>
",41
3,11060,python,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
","<p>Recall that ""unit testing"" is only one kind of testing.  You should be able to unit test the <strong>internal</strong> pieces of your code generator.  What you're really looking at here is system level testing (a.k.a. regression testing).  It's not just semantics... there are different mindsets, approaches, expectations, etc.  It's certainly more work, but you probably need to bite the bullet and set up an end-to-end regression test suite: fixed C++ files -> SWIG interfaces -> python modules -> known output.  You really want to check the known input (fixed C++ code) against expected output (what comes out of the final Python program).  Checking the code generator results directly would be like diffing object files...</p>
",4
4,11060,python,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
","<p>Just wanted to point out that you can still achieve fine-grained testing while verifying the results: you can test individual chunks of code by nesting them inside some setup and verification code:</p>

<pre><code>int x = 0;
GENERATED_CODE
assert(x == 100);
</code></pre>

<p>Provided you have your generated code assembled from smaller chunks, and the chunks do not change frequently, you can exercise more conditions and test a little better, and hopefully avoid having all your tests break when you change specifics of one chunk.</p>
",0
40,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<ul>
<li><p>locals() - No. </p></li>
<li><p>globals() - Yes.</p></li>
</ul>

<p><code>window</code> is a reference to the global scope, like <code>globals()</code> in python.</p>

<pre><code>globals()[""foo""]
</code></pre>

<p>is the same as:</p>

<pre><code>window[""foo""]
</code></pre>
",13
12,34020,python,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
","<p>I've used it in several applications and have never had nor heard of threading being anything other than 100% reliable, as long as you know its limits.  You can't spawn 1000 threads at the same time and expect your program to run properly on Windows, however you can easily write a worker pool and just feed it 1000 operations, and keep everything nice and under control.</p>
",-2
35,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<p>Well, I don't think that there is something like that in js. You can always use eval instead of locals(). Like this: </p>

<pre><code>eval(s+""()"");
</code></pre>

<p>You just have to know that actually function <em>foo</em> exists.</p>

<p><strong>Edit:</strong></p>

<p>Don't use eval:) Use:</p>

<pre><code>var functionName=""myFunctionName"";
window[functionName]();
</code></pre>
",4
39,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<p>@pkaeding</p>

<p>Yes, you're right. <em>window[functionName]()</em> doesn't work in this case, but <em>eval</em> does. If I needed something like this, I'd create my own object to keep those functions together.</p>

<pre><code>var func = {};
func.bar = ...;
var s = ""bar"";
func[s]();
</code></pre>
",0
38,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<p>@e-bartek, I think that window[functionName] won't work if you in some closure, and the function name is local to that closure.  For example:</p>

<pre><code>function foo() {
    var bar = function () {
        alert('hello world');
    };
    var s = 'bar';
    window[s](); // this won't work
}
</code></pre>

<p>In this case, s is 'bar', but the function 'bar' only exists inside the scope of the function 'foo'.  It is not defined in the window scope.</p>

<p>Of course, this doesn't really answer the original question, I just wanted to chime in on this response.  I don't believe there is a way to do what the original question asked.</p>
",0
36,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<p>AFAIK, no. If you just want to check the existence of a given variable, you can do it by testing for it, something like this:</p>

<pre><code>if (foo) foo();
</code></pre>
",0
14,34020,python,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
","<p>Python threads are good for <strong>concurrent I/O programming</strong>. Threads are swapped out of the CPU as soon as they block waiting for input from file, network, etc. This allows other Python threads to use the CPU while others wait. This would allow you to write a multi-threaded web server or web crawler, for example.</p>

<p>However, Python threads are serialized by the <a href=""http://en.wikipedia.org/wiki/Global_Interpreter_Lock"">GIL</a> when they enter interpreter core. This means that if two threads are crunching numbers, only one can run at any given moment. It also means that you can't take advantage of multi-core or multi-processor architectures.</p>

<p>There are solutions like running multiple Python interpreters concurrently, using a C based threading library. This is not for the faint of heart and the benefits might not be worth the trouble. Let's hope for an all Python solution in a future release.</p>
",43
15,34020,python,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
","<p>The GIL (Global Interpreter Lock) might be a problem, but the API is quite OK. Try out the excellent <code>processing</code> module, which implements the Threading API for separate processes. I am using that right now (albeit on OS X, have yet to do some testing on Windows) and am really impressed. The Queue class is really saving my bacon in terms of managing complexity!</p>

<p><strong>EDIT</strong>: it seemes the processing module is being included in the standard library as of version 2.6 (<code>import multiprocessing</code>). Joy!</p>
",7
16,34020,python,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
","<p>The standard implementation of Python (generally known as CPython as it is written in C) uses OS threads, but since there is the <a href=""http://en.wikipedia.org/wiki/Global_Interpreter_Lock"" rel=""nofollow"">Global Interpreter Lock</a>, only one thread at a time is allowed to run Python code.  But within those limitations, the threading libraries are robust and widely used.</p>

<p>If you want to be able to use multiple CPU cores, there are a few options.  One is to use multiple python interpreters concurrently, as mentioned by others.  Another option is to use a different implementation of Python that does not use a GIL.  The two main options are <a href=""http://en.wikipedia.org/wiki/Jython"" rel=""nofollow"">Jython</a> and <a href=""http://en.wikipedia.org/wiki/IronPython"" rel=""nofollow"">IronPython</a>.</p>

<p>Jython is written in Java, and is now fairly mature, though some incompatibilities remain.  For example, the web framework <a href=""http://zyasoft.com/pythoneering/2008/01/django-on-jython-minding-gap.html"" rel=""nofollow"">Django does not run perfectly yet</a>, but is getting closer all the time.  Jython is <a href=""http://mail.python.org/pipermail/python-list/2001-December/116555.html"" rel=""nofollow"">great for thread safety</a>, comes out <a href=""http://blogs.warwick.ac.uk/dwatkins/entry/benchmarking_parallel_python_1_2/"" rel=""nofollow"">better in benchmarks</a> and has a <a href=""http://cgwalters.livejournal.com/17956.html"" rel=""nofollow"">cheeky message for those wanting the GIL</a>.</p>

<p>IronPython uses the .NET framework and is written in C#.  Compatibility is reaching the stage where <a href=""http://www.infoq.com/news/2008/03/django-and-ironpython"" rel=""nofollow"">Django can run on IronPython</a> (at least as a demo) and there are <a href=""http://www.voidspace.org.uk/ironpython/threading.shtml"" rel=""nofollow"">guides to using threads in IronPython</a>.</p>
",13
37,39960,python,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
","<p>I seem to remember Brendan Eich commented on this in a recent podcast; if i recall correctly, it's not being considered, as it adds unreasonable restrictions to optimization. He compared it to the <code>arguments</code> local in that, while useful for varargs, its very existence removes the ability to guess at what a function will touch just by looking at its definition. </p>

<p>BTW: i believe JS <em>did</em> have support for accessing locals through the arguments local at one time - <a href=""http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Functions/arguments"" rel=""nofollow"">a quick search</a> shows this has been deprecated though.</p>
",3
13,34020,python,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
","<p>As far as I know there are no real bugs, but the performance when threading in cPython is really bad (compared to most other threading implementations, but usually good enough if all most of the threads do is block) due to the <a href=""http://docs.python.org/api/threads.html"" rel=""nofollow"">GIL</a> (Global Interpreter Lock), so really it is implementation specific rather than language specific. Jython, for example, does not suffer from this due to using the Java thread model.</p>

<p>See <a href=""http://www.artima.com/weblogs/viewpost.jsp?thread=214235"" rel=""nofollow"">this</a> post on why it is not really feasible to remove the GIL from the cPython implementation, and <a href=""http://www.pyzine.com/Issue001/Section_Articles/article_ThreadingGlobalInterpreter.html"" rel=""nofollow"">this</a> for some practical elaboration and workarounds.</p>

<p>Do a quick google for <a href=""http://www.google.com/search?q=python+gil"" rel=""nofollow"">""Python GIL""</a> for more information.</p>
",3
324,173290,python,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
","<p>It's a one-liner:</p>

<pre><code>tagDict = dict((t, i) for i, t in enumerate(tag))
</code></pre>
",12
322,173290,python,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
","<p>Try</p>

<pre><code>tagDict[ithTag] = i
</code></pre>
",2
321,173290,python,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
","<p>I think this is what you want to do:</p>

<pre><code>d = {}
for i, tag in enumerate(ithTag):
   d[tag] = i
</code></pre>
",2
320,173290,python,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
","<p>You actually want to do this:</p>

<pre><code>for i, tag in enumerate(tag):
    tagDict[tag] = i
</code></pre>

<p>The .update() method is used for updating a dictionary using another dictionary, not for changing a single key/value pair.</p>
",44
105,79850,python,17,How do you design data models for Bigtable/Datastore (GAE)?,"<p>Since the Google App Engine Datastore is based on <a href=""http://research.google.com/archive/bigtable.html"">Bigtable</a> and we know that's not a relational database, how do you design a <strong><em>database schema</em>/*data model*</strong> for applications that use this type of database system?</p>
","<p>As GAE builds on how data is managed in Django there is a lot of info on how to address similar questions in the Django documentation (for example see <a href=""http://www.djangobook.com/en/1.0/chapter05/"" rel=""nofollow"">here</a>, scroll down to 'Your first model').</p>

<p>In short you design you db model as a regular object model and let GAE sort out all of the object-relational mappings. </p>
",-2
106,79850,python,17,How do you design data models for Bigtable/Datastore (GAE)?,"<p>Since the Google App Engine Datastore is based on <a href=""http://research.google.com/archive/bigtable.html"">Bigtable</a> and we know that's not a relational database, how do you design a <strong><em>database schema</em>/*data model*</strong> for applications that use this type of database system?</p>
","<p>Designing a bigtable schema is an open process, and basically requires you to think about:</p>

<ul>
<li>The access patterns you will be using and how often each will be used</li>
<li>The relationships between your types</li>
<li>What indices you are going to need</li>
<li>The write patterns you will be using (in order to effectively spread load)</li>
</ul>

<p>GAE's datastore automatically denormalizes your data. That is, each index contains a (mostly) complete copy of the data, and thus every index adds significantly to time taken to perform a write, and the storage space used.</p>

<p>If this were not the case, designing a Datastore schema would be a lot more work: You would have to think carefully about the primary key for each type, and consider the effect of your decision on the locality of data. For example, when rendering a blog post you would probably need to display the comments to go along with it, so each comment's key would probably begin with the associated post's key.</p>

<p>With Datastore, this is not such a big deal: The query you use will look something like ""Select * FROM Comment WHERE post_id = N."" (If you want to page the comments, you would also have a limit clause, and a possible suffix of "" AND comment_id > last_comment_id"".) Once you add such a query, Datastore will build the index for you, and your reads will be magically fast.</p>

<p>Something to keep in mind is that each additional index creates some additional cost: it is best if you can use as few access patterns as possible, since it will reduce the number of indices GAE will construct, and thus the total storage required by your data.</p>

<p>Reading over this answer, I find it a little vague. Maybe a hands-on design question would help to scope this down? :-)</p>
",18
323,173290,python,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
","<p>If you want to be clever:</p>

<pre><code>tagDict.update(map(reversed, enumerate(tag)))
</code></pre>

<p>Thanks to Brian for the update. This is apparently ~5% faster than the iterative version.</p>

<p>(EDIT: Thanks saverio for pointing out my answer was incorrect (now fixed). Probably the most efficient/Pythonic way would be Torsten Marek's answer, slightly modified:</p>

<pre><code>tagDict.update((t, i) for (i,t) in enumerate(tag))
</code></pre>

<p>)</p>
",17
155,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p><em>The Python Cookbook</em> is absolutely essential if you want to master idiomatic Python. Besides, that's the book that made me fall in love with the language.</p>
",2
147,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>I'd suggest writing a non-trivial webapp using either Django or Pylons, something that does some number crunching.
No better way to learn a new language than commiting yourself to a problem and learning as you go!</p>
",1
154,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>I'll plug <a href=""http://homepage.mac.com/s_lott/books/python.html"" rel=""nofollow"">Building Skills in Python</a>.   Plus, if you want something more challenging, <a href=""http://homepage.mac.com/s_lott/books/oodesign.html"" rel=""nofollow"">Building Skills in OO Design</a> is a rather large and complex series of exercises.</p>
",2
153,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>People tend to say something along the lines of ""The best way to learn is by doing"" but I've always found that unless you're specifically learning a language to contribute to some project it's difficult to actually find little problems to tackle to keep yourself going.</p>

<p>A good solution to this is <a href=""http://projecteuler.net/"" rel=""nofollow"">Project Euler</a>, which has a list of various programming\mathematics challenges ranging from simple  to quite brain-taxing. As an example, the first challenge is:</p>

<blockquote>
  <p>If we list all the natural numbers below 10 that are multiples of 3 or 5, we get 3, 5, 6 and 9. The sum of these multiples is 23.</p>
</blockquote>

<p>And by problem #50 it's already getting a little tougher</p>

<blockquote>
  <p>Which prime, below one-million, can be written as the sum of the most consecutive primes</p>
</blockquote>

<p>There are 208 in total, but I think some new ones get added here and there.</p>

<p>While I already knew python fairly well before starting Project Euler, I found that I learned some cool tricks purely through using the language so much. Good luck!</p>
",1
152,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>Write a web app, likely in <a href=""http://www.djangoproject.com/"" rel=""nofollow"">Django</a> - the <a href=""http://docs.djangoproject.com/"" rel=""nofollow"">docs</a> will teach you a lot of good Python style.</p>

<p>Use some of the popular libraries like <a href=""http://pygments.org/"" rel=""nofollow"">Pygments</a> or the <a href=""http://www.feedparser.org/"" rel=""nofollow"">Universal Feed Parser</a>. Both of these make extremely useful functions, which are hard to get right, available in a well-documented API.</p>

<p>In general, I'd stay away from libs that aren't well documented -
you'll bang your head on the wall trying to reverse-engineer them -
and libraries that are wrappers around C libraries, if you don't have
any C experience. I worked on wxPython code when I was still learning
Python, which was my first language, and at the time it was little
more than a wrapper around wxWidgets. That code was easily the ugliest
I've ever written.</p>

<p>I didn't get that much out of Dive Into Python, except for the dynamic import chapter - that's not really well-documented elsewhere.</p>
",1
151,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>Well, there are great ressources for advanced Python programming :</p>

<ul>
<li>Dive Into Python (<a href=""http://www.diveintopython.net/"">read it for free</a>)</li>
<li>Online python cookbooks (e.g. <a href=""http://code.activestate.com/recipes/langs/python/"">here</a> and <a href=""http://the.taoofmac.com/space/Python/Grimoire"">there</a>)</li>
<li>O'Reilly's Python Cookbook (see amazon)</li>
<li>A funny riddle game : <a href=""http://www.pythonchallenge.com/"">Python Challenge</a> </li>
</ul>

<p>Here is a list of subjects you must master if you want to write ""Python"" on your resume :</p>

<ul>
<li><a href=""http://docs.python.org/tutorial/datastructures.html#list-comprehensions"">list comprehensions</a></li>
<li><a href=""http://stackoverflow.com/questions/231767/the-python-yield-keyword-explained/231855#231855"">iterators and generators</a></li>
<li><a href=""http://stackoverflow.com/questions/739654/understanding-python-decorators/1594484#1594484"">decorators</a></li>
</ul>

<p>They are what make Python such a cool language (with the standard library of course, that I keep discovering everyday).</p>
",14
150,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>Depending on exactly what you mean by ""gotten to grips with the basics"", I'd suggest reading through <a href=""http://www.diveintopython.net/"" rel=""nofollow"">Dive Into Python</a> and typing/executing all the chapter code, then get something like <a href=""http://www.amazon.co.uk/Programming-Collective-Intelligence-Building-Applications/dp/0596529325/"" rel=""nofollow"">Programming Collective Intelligence</a> and working through it - you'll learn python quite well, not to mention some quite excellent algorithms that'll come in handy to a web developer.</p>
",5
149,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>I honestly loved the book <a href=""http://rads.stackoverflow.com/amzn/click/0596009259"" rel=""nofollow"">Programming Python.</a> It has a large assortment of small projects, most of which can be completed in an evening at a leisurely pace.  They get you acquainted with most of the standard library and will likely hold your interest.  Most importantly these small projects are actually useful in a ""day to day"" sense.  The book pretty much only assumes you know and understand the bare essentials of Python as a language, rather than knowledge of it's huge API library.</p>

<p>I think you'll find it'll be well worth working through.</p>
",2
148,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>Something great to play around with, though not a project, is <a href=""http://pythonchallenge.com"" rel=""nofollow"">The Python Challenge</a>.  I've found it quite useful in improving my python skills, and it gives your brain a good workout at the same time.</p>
",3
156,92230,python,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
","<p>Search ""Alex Martelli"", ""Alex Martelli patterns"" and ""Thomas Wouters"" on Google video. There's plenty of interesting talks on andvanced Python, design patterns in Python, and so on.</p>
",1
145,91810,python,16,Is there a pretty printer for python data?,"<p>Working with python interactively, it's sometimes necessary to display a result which is some arbitrarily complex data structure (like lists with embedded lists, etc.)
The default way to display them is just one massive linear dump which just wraps over and over and you have to parse carefully to read it.</p>

<p>Is there something that will take any python object and display it in a more rational manner. e.g.</p>

<pre><code>[0, 1,
    [a, b, c],
    2, 3, 4]
</code></pre>

<p>instead of:</p>

<pre><code>[0, 1, [a, b, c], 2, 3, 4]
</code></pre>

<p>I know that's not a very good example, but I think you get the idea.</p>
","<p>In addition to <code>pprint.pprint</code>, <code>pprint.pformat</code> is really useful for making readable <code>__repr__</code>s. My complex <code>__repr__</code>s usually look like so:</p>

<pre><code>def __repr__(self):
    from pprint import pformat

    return ""&lt;ClassName %s&gt;"" % pformat({""attrs"":self.attrs,
                                       ""that_i"":self.that_i,
                                       ""care_about"":self.care_about})
</code></pre>
",8
144,91810,python,16,Is there a pretty printer for python data?,"<p>Working with python interactively, it's sometimes necessary to display a result which is some arbitrarily complex data structure (like lists with embedded lists, etc.)
The default way to display them is just one massive linear dump which just wraps over and over and you have to parse carefully to read it.</p>

<p>Is there something that will take any python object and display it in a more rational manner. e.g.</p>

<pre><code>[0, 1,
    [a, b, c],
    2, 3, 4]
</code></pre>

<p>instead of:</p>

<pre><code>[0, 1, [a, b, c], 2, 3, 4]
</code></pre>

<p>I know that's not a very good example, but I think you get the idea.</p>
","<p>Somtimes <a href=""http://pyyaml.org/"">YAML</a> can be good for this.</p>

<pre><code>import yaml
a = [0, 1, ['a', 'b', 'c'], 2, 3, 4]
print yaml.dump(a)
</code></pre>

<p>Produces:</p>

<pre><code>- 0
- 1
- [a, b, c]
- 2
- 3
- 4
</code></pre>
",10
143,91810,python,16,Is there a pretty printer for python data?,"<p>Working with python interactively, it's sometimes necessary to display a result which is some arbitrarily complex data structure (like lists with embedded lists, etc.)
The default way to display them is just one massive linear dump which just wraps over and over and you have to parse carefully to read it.</p>

<p>Is there something that will take any python object and display it in a more rational manner. e.g.</p>

<pre><code>[0, 1,
    [a, b, c],
    2, 3, 4]
</code></pre>

<p>instead of:</p>

<pre><code>[0, 1, [a, b, c], 2, 3, 4]
</code></pre>

<p>I know that's not a very good example, but I think you get the idea.</p>
","<p>Another good option is to use <a href=""http://ipython.scipy.org/moin/"" rel=""nofollow"">IPython</a>, which is an interactive environment with a lot of extra features, including automatic pretty printing, tab-completion of methods, easy shell access, and a lot more.  It's also very easy to install.  </p>

<p><a href=""http://ipython.scipy.org/doc/manual/html/interactive/tutorial.html"" rel=""nofollow"">IPython tutorial</a></p>
",3
142,91810,python,16,Is there a pretty printer for python data?,"<p>Working with python interactively, it's sometimes necessary to display a result which is some arbitrarily complex data structure (like lists with embedded lists, etc.)
The default way to display them is just one massive linear dump which just wraps over and over and you have to parse carefully to read it.</p>

<p>Is there something that will take any python object and display it in a more rational manner. e.g.</p>

<pre><code>[0, 1,
    [a, b, c],
    2, 3, 4]
</code></pre>

<p>instead of:</p>

<pre><code>[0, 1, [a, b, c], 2, 3, 4]
</code></pre>

<p>I know that's not a very good example, but I think you get the idea.</p>
","<pre><code>from pprint import pprint
a = [0, 1, ['a', 'b', 'c'], 2, 3, 4]
pprint(a)
</code></pre>

<p>Note that for a short list like my example, pprint will in fact print it all on one line. However, for more complex structures it does a pretty good job of pretty printing data.</p>
",24
78,60680,python,14,How do I write a python HTTP server to listen on multiple ports?,"<p>I'm writing a small web server in Python, using BaseHTTPServer and a custom subclass of BaseHTTPServer.BaseHTTPRequestHandler. Is it possible to make this listen on more than one port?</p>

<p>What I'm doing now:</p>

<pre><code>class MyRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  def doGET
  [...]

class ThreadingHTTPServer(ThreadingMixIn, HTTPServer): 
    pass

server = ThreadingHTTPServer(('localhost', 80), MyRequestHandler)
server.serve_forever()
</code></pre>
","<p>I would say that threading for something this simple is overkill.  You're better off using some form of asynchronous programming.</p>

<p>Here is an example using <a href=""http://twistedmatrix.com/"">Twisted</a>:</p>

<pre><code>from twisted.internet import reactor
from twisted.web import resource, server

class MyResource(resource.Resource):
    isLeaf = True
    def render_GET(self, request):
        return 'gotten'

site = server.Site(MyResource())

reactor.listenTCP(8000, site)
reactor.listenTCP(8001, site)
reactor.run()
</code></pre>

<p>I also thinks it looks a lot cleaner to have each port be handled in the same way, instead of having the main thread handle one port and an additional thread handle the other.  Arguably that can be fixed in the thread example, but then you're using three threads.</p>
",6
77,60680,python,14,How do I write a python HTTP server to listen on multiple ports?,"<p>I'm writing a small web server in Python, using BaseHTTPServer and a custom subclass of BaseHTTPServer.BaseHTTPRequestHandler. Is it possible to make this listen on more than one port?</p>

<p>What I'm doing now:</p>

<pre><code>class MyRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  def doGET
  [...]

class ThreadingHTTPServer(ThreadingMixIn, HTTPServer): 
    pass

server = ThreadingHTTPServer(('localhost', 80), MyRequestHandler)
server.serve_forever()
</code></pre>
","<p>Not easily. You could have two ThreadingHTTPServer instances, write your own serve_forever() function (don't worry it's not a complicated function).</p>

<p>The existing function:</p>

<pre><code>def serve_forever(self, poll_interval=0.5):
    """"""Handle one request at a time until shutdown.

    Polls for shutdown every poll_interval seconds. Ignores
    self.timeout. If you need to do periodic tasks, do them in
    another thread.
    """"""
    self.__serving = True
    self.__is_shut_down.clear()
    while self.__serving:
        # XXX: Consider using another file descriptor or
        # connecting to the socket to wake this up instead of
        # polling. Polling reduces our responsiveness to a
        # shutdown request and wastes cpu at all other times.
        r, w, e = select.select([self], [], [], poll_interval)
        if r:
            self._handle_request_noblock()
    self.__is_shut_down.set()
</code></pre>

<p>So our replacement would be something like:</p>

<pre><code>def serve_forever(server1,server2):
    while True:
        r,w,e = select.select([server1,server2],[],[],0)
        if server1 in r:
            server1.handle_request()
        if server2 in r:
            server2.handle_request()
</code></pre>
",4
76,60680,python,14,How do I write a python HTTP server to listen on multiple ports?,"<p>I'm writing a small web server in Python, using BaseHTTPServer and a custom subclass of BaseHTTPServer.BaseHTTPRequestHandler. Is it possible to make this listen on more than one port?</p>

<p>What I'm doing now:</p>

<pre><code>class MyRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  def doGET
  [...]

class ThreadingHTTPServer(ThreadingMixIn, HTTPServer): 
    pass

server = ThreadingHTTPServer(('localhost', 80), MyRequestHandler)
server.serve_forever()
</code></pre>
","<p>Sure; just start two different servers on two different ports in two different threads that each use the same handler.  Here's a complete, working example that I just wrote and tested.  If you run this code then you'll be able to get a Hello World webpage at both <a href=""http://localhost:1111/"">http://localhost:1111/</a> and <a href=""http://localhost:2222/"">http://localhost:2222/</a></p>

<pre><code>from threading import Thread
from SocketServer import ThreadingMixIn
from BaseHTTPServer import HTTPServer, BaseHTTPRequestHandler

class Handler(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header(""Content-type"", ""text/plain"")
        self.end_headers()
        self.wfile.write(""Hello World!"")

class ThreadingHTTPServer(ThreadingMixIn, HTTPServer):
    pass

def serve_on_port(port):
    server = ThreadingHTTPServer((""localhost"",port), Handler)
    server.serve_forever()

Thread(target=serve_on_port, args=[1111]).start()
serve_on_port(2222)
</code></pre>
",27
348,183480,python,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
","<p>Two small changes...</p>

<pre><code>base_name, ext = os.path.splitext(file_name)
</code></pre>

<p>You get two results with distinct meaning, give them distinct names.</p>

<pre><code>file_name = ""%s_%d%s"" % (base_name, str(counter), ext)
</code></pre>

<p>It isn't faster or significantly shorter.  But, when you want to change your file name pattern, the pattern is on one place, and slightly easier to work with.</p>
",2
349,183480,python,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
","<p>Yes, this is a good strategy for readable but unique filenames.</p>

<p><strong>One important change</strong>: You should replace <code>os.path.isfile</code> with <code>os.path.lexists</code>!  As it is written right now, if there is a directory named /foo/bar.baz, your program will try to overwrite that with the new file (which won't work)... since <code>isfile</code> only checks for files and not directories.  <code>lexists</code> checks for directories, symlinks, etc... basically if there's any reason that filename could not be created.</p>

<p>EDIT: @Brian gave a better answer, which is more secure and robust in terms of race conditions.</p>
",6
350,183480,python,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
","<p>One issue is that there is a race condition in your above code, since there is a gap between testing for existance, and creating the file.  There may be security implications to this (think about someone maliciously inserting a symlink to a sensitive file which they wouldn't be able to overwrite, but your program running with a higher privilege could)  Attacks like these are why things like os.tempnam() are deprecated.</p>

<p>To get around it, the best approach is to actually try create the file in such a way that you'll get an exception if it fails, and on success, return the actually opened file object.  This can be done with the lower level os.open functions, by passing both the os.O_CREAT and os.O_EXCL flags.  Once opened, return the actual file (and optionally filename) you create.  Eg, here's your code modified to use this approach (returning a (file, filename) tuple):</p>

<pre><code>def unique_file(file_name):
    counter = 1
    file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
    while 1:
        try:
            fd = os.open(file_name, os.O_CREAT | os.O_EXCL | os.O_RDRW)
            return os.fdopen(fd), file_name
        except OSError:
            pass
        file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
        counter += 1
</code></pre>

<p><strong>[Edit]</strong>  Actually, a better way, which will handle the above issues for you, is probably to use the tempfile module, though you may lose some control over the naming.  Here's an example of using it (keeping a similar interface):</p>

<pre><code>def unique_file(file_name):
    dirname, filename = os.path.split(file_name)
    prefix, suffix = os.path.splitext(filename)

    fd, filename = tempfile.mkstemp(suffix, prefix+""_"", dirname)
    return os.fdopen(fd), filename

&gt;&gt;&gt; f, filename=unique_file('/home/some_dir/foo.txt')
&gt;&gt;&gt; print filename
/home/some_dir/foo_z8f_2Z.txt
</code></pre>

<p>The only downside with this approach is that you will always get a filename with some random characters in it, as there's no attempt to create an unmodified file (/home/some_dir/foo.txt) first.
You may also want to look at tempfile.TemporaryFile and NamedTemporaryFile, which will do the above and also automatically delete from disk when closed.</p>
",22
347,183480,python,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
","<p>If you want readable names this looks like a good solution.<br />
There are routines to return unique file names for eg. temp files but they produce long random looking names.</p>
",1
351,183480,python,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
","<p>if you don't care about readability, uuid.uuid4() is your friend.</p>

<pre><code>import uuid

def unique_filename(prefix=None, suffix=None):
    fn = []
    if prefix: fn.extend([prefix, '-'])
    fn.append(str(uuid.uuid4()))
    if suffix: fn.extend(['.', suffix.lstrip('.')])
    return ''.join(fn)
</code></pre>
",0
25,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>Many people have suggested Dive Into Python, which is probably the best Python book out there for someone who's already a good programmer.  However, if you're new to programming, the best book is probably ""How to Think Like a Computer Scientist: Learning With Python"" (<a href=""http://openbookproject.net/thinkCSpy/index.xhtml"" rel=""nofollow"">http://openbookproject.net/thinkCSpy/index.xhtml</a>)</p>
",2
26,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I'll second Daniel's recommendation of Python in a Nutshell. If you're quick to pick up new languages, it's probably exactly what you're looking for. There's a nice overview of how the language works, and then a discussion of most of the standard library. It's concise and clear, and doesn't assume that you don't know basic programming things already.</p>
",1
17,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I expect that <a href=""http://oreilly.com/catalog/9780596513986/"" rel=""nofollow"">Learning Python</a> is useful, and quick to read.</p>
",10
18,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I found <a href=""http://rads.stackoverflow.com/amzn/click/0596513984"" rel=""nofollow"">Learning Python</a> really good. It's pretty long (>700 pages) but <em>extremely</em> readable and you can rip through it very quickly given you're a quick study :-)</p>
",6
19,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I loved <a href=""http://www.diveintopython.net/toc/index.html"" rel=""nofollow"">Dive Into Python</a>, especially if you're a quick study.  The beginning basics are all covered (and may move slowly for you), but the latter few chapters are great learning tools.</p>

<p>Plus, Pilgrim is a pretty good writer.</p>
",36
20,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>Since you're already familiar with other languages and a quick study, I'd recommend <a href=""http://books.google.com/books?id=6TEcaEzA8N0C"" rel=""nofollow"">Python in a Nutshell</a> by Alex Martelli, very concise and also useful later on for reference.</p>
",7
21,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>Two good online-books, that also describes the basics of the environment is <a href=""http://www.diveintopython.net/toc/index.html"" rel=""nofollow"">diveintopython.net</a> and  <a href=""http://docs.python.org/tut/"" rel=""nofollow"">the ""official"" tutorial</a>.</p>
",8
159,92620,python,13,Python sockets suddenly timing out?,"<p>I came back today to an old script I had for logging into Gmail via SSL. The script worked fine last time I ran it (several months ago) but now it dies immediately with:</p>

<pre><code>&lt;urlopen error The read operation timed out&gt;
</code></pre>

<p>If I set the timeout (no matter how long), it dies even more immediately with:</p>

<pre><code>&lt;urlopen error The connect operation timed out&gt;
</code></pre>

<p>The latter is reproducible with:</p>

<pre><code>import socket
socket.setdefaulttimeout(30000)
sock = socket.socket()
sock.connect(('www.google.com', 443))
ssl = socket.ssl(sock)
</code></pre>

<p>returning:</p>

<pre><code>socket.sslerror: The connect operation timed out
</code></pre>

<p>but I can't seem to reproduce the former and, after much stepping thru the code, I have no clue what's causing any of this.</p>
","<p>The first thing I would check is whether you need to connect via an HTTP proxy (in which case direct connections bypassing the proxy will likely time out). Run Wireshark and see what happens.</p>
",0
158,92620,python,13,Python sockets suddenly timing out?,"<p>I came back today to an old script I had for logging into Gmail via SSL. The script worked fine last time I ran it (several months ago) but now it dies immediately with:</p>

<pre><code>&lt;urlopen error The read operation timed out&gt;
</code></pre>

<p>If I set the timeout (no matter how long), it dies even more immediately with:</p>

<pre><code>&lt;urlopen error The connect operation timed out&gt;
</code></pre>

<p>The latter is reproducible with:</p>

<pre><code>import socket
socket.setdefaulttimeout(30000)
sock = socket.socket()
sock.connect(('www.google.com', 443))
ssl = socket.ssl(sock)
</code></pre>

<p>returning:</p>

<pre><code>socket.sslerror: The connect operation timed out
</code></pre>

<p>but I can't seem to reproduce the former and, after much stepping thru the code, I have no clue what's causing any of this.</p>
","<pre><code>import socket
socket.setdefaulttimeout(30000)
sock = socket.socket()
sock.connect(('www.google.com', 443))
ssl = socket.ssl(sock)
ssl.server()
--&gt; '/C=US/ST=California/L=Mountain View/O=Google Inc/CN=www.google.com'
</code></pre>

<p>It works just fine. I can't reproduce your error.</p>
",1
157,92620,python,13,Python sockets suddenly timing out?,"<p>I came back today to an old script I had for logging into Gmail via SSL. The script worked fine last time I ran it (several months ago) but now it dies immediately with:</p>

<pre><code>&lt;urlopen error The read operation timed out&gt;
</code></pre>

<p>If I set the timeout (no matter how long), it dies even more immediately with:</p>

<pre><code>&lt;urlopen error The connect operation timed out&gt;
</code></pre>

<p>The latter is reproducible with:</p>

<pre><code>import socket
socket.setdefaulttimeout(30000)
sock = socket.socket()
sock.connect(('www.google.com', 443))
ssl = socket.ssl(sock)
</code></pre>

<p>returning:</p>

<pre><code>socket.sslerror: The connect operation timed out
</code></pre>

<p>but I can't seem to reproduce the former and, after much stepping thru the code, I have no clue what's causing any of this.</p>
","<p>www.google.com is not accessible by HTTPS.  It redirects to insecure HTTP.  To get to mail, you should be going go https://mail.google.com</p>
",0
29,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I tried learning from Programming Python and I didn't like it. I'm going to give Python in a Nutshell a try as per suggestions below. </p>
",0
28,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I learned most of my initial pythonese from this super-handy quick reference:</p>

<p><a href=""http://rgruet.free.fr/PQR2.3.html"" rel=""nofollow"">http://rgruet.free.fr/PQR2.3.html</a></p>
",0
22,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p><a href=""http://diveintopython.net/"" rel=""nofollow"">Dive Into Python</a> is an excellent book geared toward programmers wanting to pick up Python.  The best part is that it's freely available online.  I started learning a little Python a few months ago and I've worked through about half of the book.  It's a very comprehensive tool that's good for learning the language and also for a reference down the road.</p>

<p>Edit: Kamens is a faster typer than I am.</p>
",0
23,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p><a href=""http://rads.stackoverflow.com/amzn/click/0596513984"" rel=""nofollow"">Learning Python</a> is how I learned the language.  It's a quick read, and very well organized around fundamental concepts.  </p>
",1
24,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p><a href=""http://rads.stackoverflow.com/amzn/click/0596009402"" rel=""nofollow"">Python Pocket Reference</a>.</p>

<p>I have both Learning Python &amp; Programming Python and I almost always go to the Pocket Reference first.</p>
",1
27,34570,python,13,What is the best quick-read Python book out there?,"<p>I am taking a class that requires Python. We will review the language in class next week, and I am a quick study on new languages, but I was wondering if there are any really great Python books I can grab while I am struggling through the basics of setting up my IDE, server environment and all those other ""gotchas"" that come with a new programming language. Suggestions?</p>
","<p>I think that <a href=""http://www.greenteapress.com/thinkpython/"" rel=""nofollow"">Think Python</a> is very good for first-time programmers. Pleasant writing style too..</p>
",2
175,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<blockquote>
  <p>EasyGUI is different from other GUIs in that EasyGUI is NOT event-driven. It allows you to program in a traditional linear fashion, and to put up dialogs for simple input and output when you need to. If you have not yet learned the event-driven paradigm for GUI programming, EasyGUI will allow you to be productive with very basic tasks immediately. Later, if you wish to make the transition to an event-driven GUI paradigm, you can do so with a more powerful GUI package such as anygui, PythonCard, Tkinter, wxPython, etc.</p>
</blockquote>

<p><a href=""http://easygui.sourceforge.net/"" rel=""nofollow"">EasyGui Website</a></p>
",2
173,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>I've been working with <a href=""http://www.wxpython.org"" rel=""nofollow"">wxPython</a> for a few years now and I like it quite a bit. The best thing about wxPython is that the UI feels native on the different platforms it runs on (excellent on Windows and Linux though not as good on OS/X).</p>

<p>The API lacks some consistency, but you quickly get used to it.</p>

<p>You can check out <a href=""http://www.testuff.com"" rel=""nofollow"">Testuff</a> (shameless plug, as it's my own product) to get a feeling of what can be done with wxPython (although I must say, with quite a bit of effort).</p>
",0
174,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>I've used Tkinter and wxPython.  Tkinter is quite basic, and doesn't use native widgets.  This means that Tkinter applications will look the same on any platform â this might sound appealing, but in practice, it means they look ugly on any platform :-/  Nevertheless, it's pretty easy to use.  I found <a href=""http://www.ferg.org/thinking_in_tkinter/index.html"">Thinking in Tkinter</a> very helpful when I was learning, because I'd never done any GUI programming before.  If things like frames and layout algorithms and buttons and bindings are familiar to you, though, you can skip that step.</p>

<p>You can augment Tkinter with Tix (but be warned, Tix doesn't play well with py2exe).  Also check out Python Megawidgets, which builds some more advanced controls using the Tkinter basics.</p>

<p>Finally, Tkinter plays nice with the shell: you can start the interpreter, do things like 'import tkinter' 'tk = tkinter.Tk()' etc. and build your GUI interactively (and it will be responsive).  (I think this doesn't work if you use IDLE, though)</p>

<p>wxPython is much better looking, and ships with a much greater range of controls.  It's cross-platform (though it seems a bit finicky on my Mac) and uses native controls on each platform.  It's a bit confusing, though.  It also ships with a demo application that shows off most of its features, and provides a test-bed for you to experiment.  Some specific thoughts on wxPython:</p>

<ul>
<li>There are three (?) different ways to lay widgets out.  Ignore two of them; just use Sizers.  And even then, you can do just about any layout using only BoxSizer and GridBagSizer.</li>
<li>All wx widgets have IDs.  You don't need to care what the IDs are, but in the old days (I think) you did need to know, so some old code will be littered with explicit ID assignments.  And most demo code will have -1 everywhere as the ID parameter (despite the fact that the methods all have ID as a keyword parameter that defaults to -1 anyway).</li>
<li>Make sure you get the standard wxWidgets docs as well as the wxPython Demo â you need them both.</li>
<li>If you want to use wxPython with py2exe and you want it to look good on Windows XP, you need a bit of trickery in your setup.py.  See <a href=""http://mail.python.org/pipermail/python-list/2004-June/268126.html"">here</a></li>
</ul>
",10
171,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>I found this link a long time a go: <a href=""http://www.awaretek.com/toolkits.html"" rel=""nofollow"">http://www.awaretek.com/toolkits.html</a>.  It suggests a tookit based on your criteria.  For me it suggests wxPython all the time.  Anyway it gives you a bunch of scores on the various toolkits.  What is right for me may not be right for you.  But it gives you how all the tookits scored according to your criteria, so if you don't like the top toolkit for some reason you can see which ones are closest to your criteria.</p>

<p>QT/GTK/WxWidgets (formerly wxWindows) seem to be among the most mature cross platform GUI toolkits.  The only issue is that none is installed with the default installation of Python, so you may have to compile the libraries.  If you want something with no installation required that just runs, then go with TKInter because as has been mentioned it is installed by default with Python.</p>

<p>Anyway my criteria were 9 on Ease of Use, 10 on maturity of documentation/widgets, 10 on installed base, 5 on gui code generators, 10 on native look and feel for both windows/linux and 1 and 5 for the last two, I'm not big into Mac OSX (even with a 10 here it suggests wxpython).</p>
",3
172,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p><a href=""http://pythoncard.sourceforge.net/"" rel=""nofollow"">PythonCard</a> is really easy to use.  That's what I would recommend.</p>

<p>Here's their writeup:</p>

<blockquote>
  <p>PythonCard is a GUI construction kit
  for building cross-platform desktop
  applications on Windows, Mac OS X, and
  Linux, using the Python language.</p>
  
  <p>The PythonCard motto is ""Simple things
  should be simple and complex things
  should be possible.""</p>
  
  <p>PythonCard is for you if you want to
  develop graphical applications quickly
  and easily with a minimum of effort
  and coding. Apple's HyperCard is one
  of our inspirations; simple, yet
  powerful.</p>
  
  <p>PythonCard uses wxPython. If you are
  already familiar with wxPython, just
  think of PythonCard as a simpler way
  of doing wxPython programs with a
  whole lot of samples and tools already
  in place for you to copy and subclass
  and tools to help you build
  cross-platform applications.</p>
</blockquote>
",3
176,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>I prefer PyGTK, because I am a GNOME guy. Using PyGTK feels very pythonic to me. The code organization feels consistent, the documentation is clean and thorough, and it's a very easy toolkit to get used to (except for maybe Treeviews).</p>
",1
170,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>Instead of posting a list of your options I will give my humble opinion:</p>

<p>I am in love with wxPython.</p>

<p>I have used Qt in C++ and Tk way back in the Tcl days but what really makes me like wxPython is the demo that you get with it. In the demo you can browse through all the different widgets frames etc that are part of the framework see the source code and actually see how it looks while it is running.</p>

<p>I had some problems getting the Linux version build and installed but now that I have it available I use it all the time. I have used wxPython for small data analysis applications and I have written several internal tools related to comparing test results, merging source code etc.</p>
",3
169,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>I like wxPython or Tk.</p>

<p>Tk comes with the standard Python distribution so you don't need install anything else.</p>

<p>wxPython (wxWigets) seems much more powerful and looks a lot nicer.  It also works well cross-platform (though not perfectly because it uses different underlying graphic API's on diff system types)</p>
",1
161,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p><strong>xml.etree.cElementTree</strong>, included in the default distribution of CPython since 2.5. Lightning fast for both reading and writing XML.</p>
",-4
168,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>Most python GUI APIs will be wrappers around the most common c/c++ GUI APIs. You've got a python wrapper for gtk, a python wrapper for qt, a python wrapper for .NET, etc etc. </p>

<p>So really it depends on what your needs are. If you are looking for the easiest way to draw native-looking widgets on Linux, Mac, and Windows, then go with wxPython (python wrapper for WX Widgets). If cross-platform isn't one of your needs though, other libraries might be more useful. </p>
",3
167,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>PyQt is excellent if you have experience or interest in Qt.</p>

<p><a href=""http://www.riverbankcomputing.co.uk/software/pyqt/intro"" rel=""nofollow"">http://www.riverbankcomputing.co.uk/software/pyqt/intro</a></p>
",4
166,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p><a href=""http://wiki.python.org/moin/GuiProgramming"" rel=""nofollow"">Here's a good list.</a></p>
",13
165,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p>Second vote for ElementTree (cElementTree is a C implementation that is a little faster, like cPickle vs pickle).  There's some short example code here that you can look at to give you an idea of how it works: <a href=""http://effbot.org/zone/element-index.htm"" rel=""nofollow"">http://effbot.org/zone/element-index.htm</a>
(this is Fredrik Lundh, who wrote the module in the first place.  It's so good it got drafted into the standard library with 2.5 :-) )</p>
",-2
164,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p>I think you'll find XMLGenerator from xml.sax.saxutils is the closest thing to what you want.</p>

<pre>
import time
from xml.sax.saxutils import XMLGenerator
from xml.sax.xmlreader import AttributesNSImpl

LOG_LEVELS = ['DEBUG', 'WARNING', 'ERROR']


class xml_logger:
    def __init__(self, output, encoding):
        """"""
        Set up a logger object, which takes SAX events and outputs
        an XML log file
        """"""
        logger = XMLGenerator(output, encoding)
        logger.startDocument()
        attrs = AttributesNSImpl({}, {})
        logger.startElementNS((None, u'log'), u'log', attrs)
        self._logger = logger
        self._output = output
        self._encoding = encoding
        return

    def write_entry(self, level, msg):
        """"""
        Write a log entry to the logger
        level - the level of the entry
        msg   - the text of the entry.  Must be a Unicode object
        """"""
        #Note: in a real application, I would use ISO 8601 for the date
        #asctime used here for simplicity
        now = time.asctime(time.localtime())
        attr_vals = {
            (None, u'date'): now,
            (None, u'level'): LOG_LEVELS[level],
            }
        attr_qnames = {
            (None, u'date'): u'date',
            (None, u'level'): u'level',
            }
        attrs = AttributesNSImpl(attr_vals, attr_qnames)
        self._logger.startElementNS((None, u'entry'), u'entry', attrs)
        self._logger.characters(msg)
        self._logger.endElementNS((None, u'entry'), u'entry')
        return

    def close(self):
        """"""
        Clean up the logger object
        """"""
        self._logger.endElementNS((None, u'log'), u'log')
        self._logger.endDocument()
        return

if __name__ == ""__main__"":
    #Test it out
    import sys
    xl = xml_logger(sys.stdout, 'utf-8')
    xl.write_entry(2, u""Vanilla log entry"")
    xl.close()   

</pre>

<p>You'll probably want to look at the rest of the article I got that from at <a href=""http://www.xml.com/pub/a/2003/03/12/py-xml.html"">http://www.xml.com/pub/a/2003/03/12/py-xml.html</a>.</p>
",13
177,93930,python,12,What Python GUI APIs Are Out There?,"<p>Simple question:</p>

<ul>
<li>What Python GUI API's are out there and what are the advantages of any given API?</li>
</ul>

<p>I'm not looking for a religious war here, I'm just wanting to get a good handle on all that is out there in terms of Python GUI APIs.</p>
","<p>wxPython, and I'm assuming PyGTK also, can use wxGlade to help you design most UIs you will create. That is a big plus. You don't have to learn how to hand-code the GUI until you're ready. I made several GUI programs straight from wxGlade before I was comfortable enough in how wxPython worked to take a shot at hand-coding.</p>

<p>PyQt has a similar graphic layout device but I've never had good luck getting PyQt to compile correctly. There was also a lack of tutorials and documentation that showed how to create the final Python code; many of the documents I found referred to the C++ version of Qt.</p>

<p>Tkinter is good for quick and dirty programs but, realistically, if you use wxGlade it may be faster to make the program with wxPython. At a minimum, you can use wxGlade to show a visual representation of the program to a client rather than take the time to hand-code the ""dummy"" program.</p>
",0
163,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p>Some years ago I used <code>MarkupWriter</code> from <a href=""http://4suite.org/index.xhtml"" rel=""nofollow"">4suite</a></p>

<blockquote>
<pre><code>General-purpose utility class for generating XML (may eventually be
expanded to produce more output types)

Sample usage:

from Ft.Xml import MarkupWriter
writer = MarkupWriter(indent=u""yes"")
writer.startDocument()
writer.startElement(u'xsa')
writer.startElement(u'vendor')
#Element with simple text (#PCDATA) content
writer.simpleElement(u'name', content=u'Centigrade systems')
#Note writer.text(content) still works
writer.simpleElement(u'email', content=u""info@centigrade.bogus"")
writer.endElement(u'vendor')
#Element with an attribute
writer.startElement(u'product', attributes={u'id': u""100\u00B0""})
#Note writer.attribute(name, value, namespace=None) still works
writer.simpleElement(u'name', content=u""100\u00B0 Server"")
#XML fragment
writer.xmlFragment('&lt;version&gt;1.0&lt;/version&gt;&lt;last-release&gt;20030401&lt;/last-release&gt;')
#Empty element
writer.simpleElement(u'changes')
writer.endElement(u'product')
writer.endElement(u'xsa')
writer.endDocument()

Note on the difference between 4Suite writers and printers
Writer  - module that exposes a broad public API for building output
          bit by bit
Printer - module that simply takes a DOM and creates output from it
          as a whole, within one API invokation
</code></pre>
</blockquote>

<p>Recently i hear a lot about how <a href=""http://codespeak.net/lxml/"" rel=""nofollow"">lxml</a> is great, but I don't have first-hand experience, and I had some fun working with <a href=""http://freshmeat.net/projects/gnosisxml/"" rel=""nofollow"">gnosis</a>.</p>
",0
160,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p>I think I have your poison :</p>

<p><a href=""http://sourceforge.net/projects/xmlite"" rel=""nofollow"">http://sourceforge.net/projects/xmlite</a></p>

<p>Cheers</p>
",1
162,93710,python,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
","<p>I've always had good results with <a href=""http://codespeak.net/lxml/"" rel=""nofollow"">lxml</a>. It's a pain to install, as it's mostly a wrapper around <a href=""http://xmlsoft.org/"" rel=""nofollow"">libxml2</a>, but <code>lxml.etree</code>  tree objects have a <code>.write()</code> method that takes a file-like object to stream to.</p>

<pre><code>from lxml.etree import XML

tree = XML('&lt;root&gt;&lt;a&gt;&lt;b/&gt;&lt;/a&gt;&lt;/root&gt;')
tree.write(your_file_object)
</code></pre>
",-1
60,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<p>This snippet will do so.  If you're going to do it frequently, you might want to make a 'sortkeys' method or somesuch to make it easier on the eyes.</p>

<pre><code>keys = list(d.keys())
keys.sort()
for key in keys:
    print d[key]
</code></pre>

<p>Edit:  dF's solution is better -- I forgot all about sorted().</p>
",1
66,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<p>You can also sort a dictionary by value and control the sort order:</p>

<pre><code>import operator

d = {'b' : 'this is 3', 'a': 'this is 2' , 'c' : 'this is 1'}

for key, value in sorted(d.iteritems(), key=operator.itemgetter(1), reverse=True):
    print key, "" "", value
</code></pre>

<p>Output:<br />
b   this is 3<br />
a   this is 2<br />
c   this is 1</p>
",1
65,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<pre><code>for key in sorted(d):
  print d[key]
</code></pre>
",1
61,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<p>Do you mean that you need the values sorted by the value of the key?
In that case, this should do it:</p>

<pre><code>for key in sorted(d):
    print d[key]
</code></pre>

<p><strong>EDIT:</strong> changed to use sorted(d) instead of sorted(d.keys()), thanks <a href=""http://stackoverflow.com/users/1694/eli-courtwright"" rel=""nofollow"">Eli</a>!</p>
",16
62,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<p>Or shorter,</p>

<pre><code>for key, value in sorted(d.items()):
    print value
</code></pre>
",16
260,147650,python,11,Debug Pylons application through Eclipse,"<p>I have Eclipse setup with PyDev and love being able to debug my scripts/apps.  I've just started playing around with Pylons and was wondering if there is a way to start up the paster server through Eclipse so I can debug my webapp?</p>
","<p>Create a new launch configuration (Python Run)</p>

<p><strong>Main tab</strong></p>

<p>Use paster-script.py as main module (you can find it in the Scripts sub-directory in your python installation directory)</p>

<p>Don't forget to add the root folder of your application in the PYTHONPATH zone</p>

<p><strong>Arguments</strong>
Set the base directory to the root folder also.</p>

<p>As Program Arguments use ""serve development.ini"" (or whatever you use to debug your app"")</p>

<p><strong>Common Tab</strong></p>

<p>Check allocate console and launch in background</p>
",10
64,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
ks = d.keys()
ks.sort()
for k in ks:
    print ""this is "" + k
</code></pre>
",0
63,55180,python,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
","<pre><code>&gt;&gt;&gt; d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
&gt;&gt;&gt; for k,v in sorted(d.items()):
...     print v, k
... 
this is a a
this is b b
this is c c
</code></pre>
",1
246,138680,python,10,Vim extension (via Python)?,"<p>is it possible to extend vim functionality via custom extension (preferably, written in Python)?</p>

<p>What I need ideally is custom command when in command mode. E.g.</p>

<p>ESC</p>

<p>:do_this</p>

<p>:do_that</p>
","<p>vim supports scripting in python (and in perl as well, I think).</p>

<p>You just have to make sure that the vim distribution you are using has been compiled with python support.</p>

<p>If you are using a Linux system, you can download the source and then compile it with</p>

<pre><code>./configure --enable-pythoninterp 
make
sudo make install
</code></pre>

<p>Inside vim, you can type</p>

<pre><code>:version
</code></pre>

<p>to list the available features; if it has python support, you should see a '+python' somewhere (a '-python' otherwise).</p>

<p>Then, to check the usage of the python module, you can type</p>

<pre><code>:help python
</code></pre>

<p>P.S: if you're going to compile the vim sources, make sure to check the available configure options, you might need to specify --with-python-config-dir as well.</p>

<p>P.P.S: to create a ""custom command in command mode"" (if I understand correctly what you mean), you can create a function ""MyFunction"" in a vim script (using python or the vim scripting language) and then invoke it with </p>

<pre><code>:Call MyFunction()
</code></pre>

<p>Check </p>

<pre><code>:help user-functions
</code></pre>

<p>for details</p>
",19
235,120250,python,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
","<p>If you're doing any sort of manipulation of this huge dataset, you'll probably want to use <a href=""http://numpy.scipy.org/"" rel=""nofollow"" title=""Numpy Home Page"">Numpy</a>, which has support for a wide variety of numeric types, and efficient operations on arrays of them.</p>
",4
234,120250,python,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
","<p>@<a href=""#120256"" rel=""nofollow"">Armin</a>: how come? The Python documentation said the minimum size for that array of short integer is 2 bytes and </p>

<blockquote>
  <p>The actual representation of values is
  determined by the machine architecture
  (strictly speaking, by the C
  implementation). The actual size can
  be accessed through the itemsize
  attribute.</p>
</blockquote>

<p>@<a href=""#120449"" rel=""nofollow"">Arnav</a>: I suggest that your code should check the size of each Type code and choose the corresponding 2-byte type that is specific to the underlying system. </p>
",0
233,120250,python,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
","<p>Armin's suggestion of the array module is probably best.  Two possible alternatives:</p>

<ul>
<li>You can create an extension module yourself that provides the data structure that you're after.  If it's really just something like a collection of shorts, then
that's pretty simple to do.</li>
<li>You can
cheat and manipulate bits, so that
you're storing one number in the
lower half of the Python int, and
another one in the upper half. 
You'd write some utility functions
to convert to/from these within your
data structure.  Ugly, but it can be made to work.</li>
</ul>

<p>It's also worth realising that a Python integer object is not 4 bytes - there is additional overhead.  So if you have a really large number of shorts, then you can save more than two bytes per number by using a C short in some way (e.g. the array module).</p>

<p>I had to keep a large set of integers in memory a while ago, and a dictionary with integer keys and values was too large (I had 1GB available for the data structure IIRC).  I switched to using a IIBTree (from ZODB) and managed to fit it.  (The ints in a IIBTree are real C ints, not Python integers, and I hacked up an automatic switch to a IOBTree when the number was larger than 32 bits).</p>
",2
232,120250,python,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
","<p>Thanks to Armin for pointing out the 'array' module. I also found the 'struct' module that packs c-style structs in a string:</p>

<p>From the documentation (<a href=""https://docs.python.org/library/struct.html"" rel=""nofollow"">https://docs.python.org/library/struct.html</a>):</p>

<pre><code>&gt;&gt;&gt; from struct import *
&gt;&gt;&gt; pack('hhl', 1, 2, 3)
'\x00\x01\x00\x02\x00\x00\x00\x03'
&gt;&gt;&gt; unpack('hhl', '\x00\x01\x00\x02\x00\x00\x00\x03')
(1, 2, 3)
&gt;&gt;&gt; calcsize('hhl')
8
</code></pre>
",5
231,120250,python,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
","<p>Nope.  But you can use short integers in arrays:</p>

<pre><code>from array import array
a = array(""h"") # h = signed short, H = unsigned short
</code></pre>

<p>As long as the value stays in that array it will be a short integer.</p>

<ul>
<li>documentation for the <a href=""http://docs.python.org/dev/library/array"">array module</a></li>
</ul>
",30
247,138680,python,10,Vim extension (via Python)?,"<p>is it possible to extend vim functionality via custom extension (preferably, written in Python)?</p>

<p>What I need ideally is custom command when in command mode. E.g.</p>

<p>ESC</p>

<p>:do_this</p>

<p>:do_that</p>
","<p>Yes it is. There are several extensions on <a href=""http://www.vim.org/scripts/index.php"" rel=""nofollow"">http://www.vim.org/scripts/index.php</a> </p>

<p>It can be done with python as well if the support for python is compiled in. </p>

<p>Article about it: <a href=""http://www.techrepublic.com/article/extending-vim-with-python/"" rel=""nofollow"">http://www.techrepublic.com/article/extending-vim-with-python/</a> </p>

<p>Google is our friend.</p>

<p>HTH</p>
",5
277,156360,python,9,Get all items from thread Queue,"<p>I have one thread that writes results into a Queue.</p>

<p>In another thread (GUI), I periodically (in the IDLE event) check if there are results in the queue, like this:</p>

<pre><code>def queue_get_all(q):
    items = []
    while 1:
        try:
            items.append(q.get_nowait())
        except Empty, e:
            break
    return items
</code></pre>

<p>Is this a good way to do it ? </p>

<p><strong>Edit:</strong></p>

<blockquote>
  <p>I'm asking because sometimes the
  waiting thread gets stuck for a few
  seconds without taking out new
  results.</p>
</blockquote>

<p>The ""stuck"" problem turned out to be because I was doing the processing in the idle event handler, without making sure that such events are actually generated by calling <code>wx.WakeUpIdle</code>, as is recommended.</p>
","<p>I see you are using get_nowait() which according to the documentation, ""return[s] an item if one is immediately available, else raise the Empty exception""</p>

<p>Now, you happen to break out of the loop when an Empty exception is thrown. Thus, if there is no result immediately available in the queue, your function returns an empty items list.</p>

<p>Is there a reason why you are not using the get() method instead? It may be the case that the get_nowait() fails because the queue is servicing a put() request at that same moment. </p>
",1
278,156360,python,9,Get all items from thread Queue,"<p>I have one thread that writes results into a Queue.</p>

<p>In another thread (GUI), I periodically (in the IDLE event) check if there are results in the queue, like this:</p>

<pre><code>def queue_get_all(q):
    items = []
    while 1:
        try:
            items.append(q.get_nowait())
        except Empty, e:
            break
    return items
</code></pre>

<p>Is this a good way to do it ? </p>

<p><strong>Edit:</strong></p>

<blockquote>
  <p>I'm asking because sometimes the
  waiting thread gets stuck for a few
  seconds without taking out new
  results.</p>
</blockquote>

<p>The ""stuck"" problem turned out to be because I was doing the processing in the idle event handler, without making sure that such events are actually generated by calling <code>wx.WakeUpIdle</code>, as is recommended.</p>
","<p>If you're always pulling all available items off the queue, is there any real point in using a queue, rather than just a list with a lock?  ie:</p>

<pre><code>from __future__ import with_statement
import threading

class ItemStore(object):
    def __init__(self):
        self.lock = threading.Lock()
        self.items = []

    def add(self, item):
        with self.lock:
            self.items.append(item)

    def getAll(self):
        with self.lock:
            items, self.items = self.items, []
        return items
</code></pre>

<p>If you're also pulling them individually, and making use of the blocking behaviour for empty queues, then you should use Queue, but your use case looks much simpler, and might be better served by the above approach.</p>

<p><strong>[Edit2]</strong>  I'd missed the fact that you're polling the queue from an idle loop, and from your update, I see that the problem isn't related to contention, so the below approach isn't really relevant to your problem.  I've left it in in case anyone finds a blocking variant of this useful:</p>

<p>For cases where you do want to block until you get at least one result, you can modify the above code to wait for data to become available through being signalled by the producer thread.  Eg.</p>

<pre><code>class ItemStore(object):
    def __init__(self):
        self.cond = threading.Condition()
        self.items = []

    def add(self, item):
        with self.cond:
            self.items.append(item)
            self.cond.notify() # Wake 1 thread waiting on cond (if any)

    def getAll(self, blocking=False):
        with self.cond:
            # If blocking is true, always return at least 1 item
            while blocking and len(self.items) == 0:
                self.cond.wait()
            items, self.items = self.items, []
        return items
</code></pre>
",11
279,156360,python,9,Get all items from thread Queue,"<p>I have one thread that writes results into a Queue.</p>

<p>In another thread (GUI), I periodically (in the IDLE event) check if there are results in the queue, like this:</p>

<pre><code>def queue_get_all(q):
    items = []
    while 1:
        try:
            items.append(q.get_nowait())
        except Empty, e:
            break
    return items
</code></pre>

<p>Is this a good way to do it ? </p>

<p><strong>Edit:</strong></p>

<blockquote>
  <p>I'm asking because sometimes the
  waiting thread gets stuck for a few
  seconds without taking out new
  results.</p>
</blockquote>

<p>The ""stuck"" problem turned out to be because I was doing the processing in the idle event handler, without making sure that such events are actually generated by calling <code>wx.WakeUpIdle</code>, as is recommended.</p>
","<p>I'd be very surprised if the <code>get_nowait()</code> call caused the pause by not returning if the list was empty.</p>

<p>Could it be that you're posting a large number of (maybe big?) items between checks which means the receiving thread has a large amount of data to pull out of the <code>Queue</code>? You could try limiting the number you retrieve in one batch:</p>

<pre><code>def queue_get_all(q):
    items = []
    maxItemsToRetreive = 10
    for numOfItemsRetrieved in range(0, maxItemsToRetreive):
        try:
            if numOfItemsRetrieved == maxItemsToRetreive:
                break
            items.append(q.get_nowait())
        except Empty, e:
            break
    return items
</code></pre>

<p>This would limit the receiving thread to pulling up to 10 items at a time.</p>
",4
56,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>Retrieve the times in milliseconds and then do the subtraction.</p>
",-1
54,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>Also a little silly, but you could try picking an arbitrary day and embedding each time in it, using <code>datetime.datetime.combine</code>, then subtracting:</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; t1 = datetime.time(2,3,4)
&gt;&gt;&gt; t2 = datetime.time(18,20,59)
&gt;&gt;&gt; dummydate = datetime.date(2000,1,1)
&gt;&gt;&gt; datetime.datetime.combine(dummydate,t2) - datetime.datetime.combine(dummydate,t1)
datetime.timedelta(0, 58675)
</code></pre>
",16
178,94490,python,9,How do I read selected files from a remote Zip archive over HTTP using Python?,"<p>I need to read selected files, matching on the file name, from a remote zip archive using Python. I don't want to save the full zip to a temporary file (it's not that large, so I can handle everything in memory).</p>

<p>I've already written the code and it works, and I'm answering this myself so I can search for it later. But since evidence suggests that I'm one of the dumber participants on Stackoverflow, I'm sure there's room for improvement.</p>
","<p>Here's how I did it (grabbing all files ending in "".ranks""):</p>

<pre><code>import urllib2, cStringIO, zipfile

try:
    remotezip = urllib2.urlopen(url)
    zipinmemory = cStringIO.StringIO(remotezip.read())
    zip = zipfile.ZipFile(zipinmemory)
    for fn in zip.namelist():
        if fn.endswith("".ranks""):
            ranks_data = zip.read(fn)
            for line in ranks_data.split(""\n""):
                # do something with each line
except urllib2.HTTPError:
    # handle exception
</code></pre>
",8
179,94490,python,9,How do I read selected files from a remote Zip archive over HTTP using Python?,"<p>I need to read selected files, matching on the file name, from a remote zip archive using Python. I don't want to save the full zip to a temporary file (it's not that large, so I can handle everything in memory).</p>

<p>I've already written the code and it works, and I'm answering this myself so I can search for it later. But since evidence suggests that I'm one of the dumber participants on Stackoverflow, I'm sure there's room for improvement.</p>
","<p>Bear in mind that merely decompressing a ZIP file may result in <a href=""http://en.wikipedia.org/wiki/Decompression_bomb"" rel=""nofollow"">a security vulnerability</a>.</p>
",1
53,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>Firstly, note that a datetime.time is a time of day, independent of a given day, and so the different between any two datetime.time values is going to be less than 24 hours.</p>

<p>One approach is to convert both datetime.time values into comparable values (such as milliseconds), and find the difference.</p>

<pre><code>t1, t2 = datetime.time(...), datetime.time(...)

t1_ms = (t1.hour*60*60 + t1.minute*60 + t1.second)*1000 + t1.microsecond
t2_ms = (t2.hour*60*60 + t2.minute*60 + t2.second)*1000 + t2.microsecond

delta_ms = max([t1_ms, t2_ms]) - min([t1_ms, t2_ms])
</code></pre>

<p>It's a little lame, but it works.</p>
",-2
52,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>You could transform both into <a href=""http://docs.python.org/lib/datetime-timedelta.html"" rel=""nofollow"">timedelta objects</a> and subtract these from each other, which will take care to of the carry-overs. For example:</p>

<pre><code>&gt;&gt;&gt; import datetime as dt
&gt;&gt;&gt; t1 = dt.time(23, 5, 5, 5)
&gt;&gt;&gt; t2 = dt.time(10, 5, 5, 5)
&gt;&gt;&gt; dt1 = dt.timedelta(hours=t1.hour, minutes=t1.minute, seconds=t1.second, microseconds=t1.microsecond)
&gt;&gt;&gt; dt2 = dt.timedelta(hours=t2.hour, minutes=t2.minute, seconds=t2.second, microseconds=t2.microsecond)
&gt;&gt;&gt;  print(dt1-dt2)
13:00:00
&gt;&gt;&gt; print(dt2-dt1)
-1 day, 11:00:00
&gt;&gt;&gt; print(abs(dt2-dt1))
13:00:00
</code></pre>

<p>Negative timedelta objects in Python get a negative day field, with the other fields positive. You could check beforehand: comparison works on both time objects and timedelta objects:</p>

<pre><code>&gt;&gt;&gt; dt2 &lt; dt1
True
&gt;&gt;&gt; t2 &lt; t1
True
</code></pre>
",5
51,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>It seems that this isn't supported, since there wouldn't be a good way to deal with overflows in datetime.time.  I know this isn't an answer directly, but maybe someone with more python experience than me can take this a little further.  For more info, see this: <a href=""http://bugs.python.org/issue3250"" rel=""nofollow"">http://bugs.python.org/issue3250</a></p>
",1
55,51010,python,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
","<p>Python has pytz (<a href=""http://pytz.sourceforge.net"" rel=""nofollow"">http://pytz.sourceforge.net</a>) module which can be used for arithmetic of 'time' objects. It takes care of DST offsets as well. The above page has a number of examples that illustrate the usage of pytz.</p>
",3
95,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>You probably have a file named random.py or random.pyc in your working directory.  That's shadowing the built-in random module.  You need to rename random.py to something like my_random.py and/or remove the random.pyc file.</p>

<p>To tell for sure what's going on, do this:</p>

<pre><code>&gt;&gt;&gt; import random
&gt;&gt;&gt; print random.__file__
</code></pre>

<p>That will show you exactly which file is being imported.</p>
",34
90,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>I think you need to give some more information.  It's not really possible to answer why it's not working based on the information in the question.  The basic documentation for random is at: 
<a href=""https://docs.python.org/library/random.html"" rel=""nofollow"">https://docs.python.org/library/random.html</a></p>

<p>You might check there.  </p>
",2
97,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>This is happening because you have a random.py file in the python search path, most likely the current directory.</p>

<p>Python is searching for modules using sys.path, which normally includes the current directory before the standard site-packages, which contains the expected random.py.</p>

<p>This is expected to be fixed in Python 3.0, so that you can't import modules from the current directory without using a special import syntax.</p>

<p>Just remove the random.py + random.pyc in the directory you're running python from and it'll work fine.</p>
",3
94,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>Works for me:</p>

<pre><code>Python 2.5.1 (r251:54863, Jun 15 2008, 18:24:51) 
[GCC 4.3.0 20080428 (Red Hat 4.3.0-8)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import random
&gt;&gt;&gt; brothers = ['larry', 'curly', 'moe']
&gt;&gt;&gt; random.choice(brothers)
'moe'
&gt;&gt;&gt; random.choice(brothers)
'curly'
</code></pre>
",0
93,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>Seems to work fine for me. Check out the methods in the <a href=""http://docs.python.org/lib/module-random.html"" rel=""nofollow"">official python documentation</a> for random:</p>

<pre><code>&gt;&gt;&gt; import random
&gt;&gt;&gt; random.random()
0.69130806168332215
&gt;&gt;&gt; random.uniform(1, 10)
8.8384170917436293
&gt;&gt;&gt; random.randint(1, 10)
4
</code></pre>
",0
92,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<pre><code>Python 2.5.2 (r252:60911, Jun 16 2008, 18:27:58)
[GCC 3.3.4 (pre 3.3.5 20040809)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import random
&gt;&gt;&gt; random.seed()
&gt;&gt;&gt; dir(random)
['BPF', 'LOG4', 'NV_MAGICCONST', 'RECIP_BPF', 'Random', 'SG_MAGICCONST', 'SystemRandom', 'TWOPI', 'WichmannHill', '_BuiltinMethodType', '_MethodType', '__all__', '__builtins__', '__doc__', '__file__', '__name__', '_acos', '_ceil', '_cos', '_e', '_exp', '_hexlify', '_inst', '_log', '_pi', '_random', '_sin', '_sqrt', '_test', '_test_generator', '_urandom', '_warn', 'betavariate', 'choice', 'expovariate', 'gammavariate', 'gauss', 'getrandbits', 'getstate', 'jumpahead', 'lognormvariate', 'normalvariate', 'paretovariate', 'randint', 'random', 'randrange', 'sample', 'seed', 'setstate', 'shuffle', 'uniform', 'vonmisesvariate', 'weibullvariate']
&gt;&gt;&gt; random.randint(0,3)
3
&gt;&gt;&gt; random.randint(0,3)
1
&gt;&gt;&gt;
</code></pre>
",1
91,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>Can you post an example of what you're trying to do?  It's not clear from your question what the actual problem is.</p>

<p>Here's an example of how to use the random module:</p>

<pre><code>import random
print random.randint(0,10)
</code></pre>
",0
96,74430,python,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
","<p>Is it possible that the script you run is called random.py itself?</p>
",1
146,91890,python,8,Reading quicken data files,"<p>Looking for an open source library, for C++, Java, C# or Python, for reading the data from Quicken <strong>.qdf</strong> files.</p>

<p>@<a href=""#91941"">Swati</a>:  Quicken <strong>.qif</strong> format is for transfer only and is not kept up to date by the application  like the .qdf file is.</p>
","<p><a href=""http://www.west-wind.com/Weblog/posts/10491.aspx"" rel=""nofollow"">http://www.west-wind.com/Weblog/posts/10491.aspx</a></p>

<p>And i know one other blog where the author was developing a parser for qfx/qif... lemme look it up... googling hasnt helped yet :(</p>

<p>Update: Found one more:</p>

<p><a href=""http://blogs.msdn.com/lucabol/archive/2007/08/31/parsing-qif-quicken-files-in-c.aspx"" rel=""nofollow"">http://blogs.msdn.com/lucabol/archive/2007/08/31/parsing-qif-quicken-files-in-c.aspx</a></p>
",2
292,164460,python,7,Programmatically launching standalone Adobe flashplayer on Linux/X11,"<p>The standalone flashplayer takes no arguments other than a .swf file when you launch it from the command line. I need the player to go full screen, no window borders and such. This can be accomplished by hitting ctrl+f once the program has started. I want to do this programmatically as I need it to launch into full screen without any human interaction.</p>

<p>My guess is that I need to some how get a handle to the window and then send it an event that looks like the ""ctrl+f"" keystroke. </p>

<p>If it makes any difference, it looks like flashplayer is a gtk application and I have python with pygtk installed.</p>

<p><b>UPDATE</b> (the solution I used... thanks to ypnos' answer):</p>

<pre><code>./flashplayer http://example.com/example.swf &amp; sleep 3 &amp;&amp; ~/xsendkey -window ""Adobe Flash Player 10"" Control+F
</code></pre>
","<p>You can use a dedicated application which sends the keystroke to the window manager, which should then pass it to flash, if the window starts as being the active window on the screen. This is quite error prone, though, due to delays between starting flash and when the window will show up.</p>

<p>For example, your script could do something like this:
flashplayer *.swf
sleep 3 &amp;&amp; xsendkey Control+F</p>

<p>The application xsendkey can be found here: <a href=""http://people.csail.mit.edu/adonovan/hacks/xsendkey.html"" rel=""nofollow"">http://people.csail.mit.edu/adonovan/hacks/xsendkey.html</a>
Without given a specific window, it will send it to the root window, which is handled by your window manager. You could also try to figure out the Window id first, using xprop or something related to it.</p>

<p>Another option is a Window manager, which is able to remember your settings and automatically apply them. Fluxbos for example provides this feature. You could set fluxbox to make the Window decor-less and stretch it over the whole screen, if flashplayer supports being resized. This is also not-so-nice, as it would probably affect all the flashplayer windows you open ever.</p>
",7
291,164460,python,7,Programmatically launching standalone Adobe flashplayer on Linux/X11,"<p>The standalone flashplayer takes no arguments other than a .swf file when you launch it from the command line. I need the player to go full screen, no window borders and such. This can be accomplished by hitting ctrl+f once the program has started. I want to do this programmatically as I need it to launch into full screen without any human interaction.</p>

<p>My guess is that I need to some how get a handle to the window and then send it an event that looks like the ""ctrl+f"" keystroke. </p>

<p>If it makes any difference, it looks like flashplayer is a gtk application and I have python with pygtk installed.</p>

<p><b>UPDATE</b> (the solution I used... thanks to ypnos' answer):</p>

<pre><code>./flashplayer http://example.com/example.swf &amp; sleep 3 &amp;&amp; ~/xsendkey -window ""Adobe Flash Player 10"" Control+F
</code></pre>
","<p>I've actually done this a long time ago, but it wasn't petty.  What we did is use the <a href=""http://sawfish.wikia.com/wiki/Main_Page"" rel=""nofollow"">Sawfish window manager</a> and wrote a hook to recognize the flashplayer window, then strip all the decorations and snap it full screen.</p>

<p>This may be possible without using the window manager, by registering for X window creation events from an external application, but I'm not familiar enough with X11 to tell you how that would be done.</p>

<p>Another option would be to write a pygtk application that embedded the standalone flash player inside a gtk.Socket and then resized itself.  After a bit of thought, this might be your best bet.</p>
",1
328,174170,python,7,Python - Py2exe can't build .exe using the 'email' module,"<p>py2exe does not work with the standard email module</p>

<p>Hello. I am trying to use py2exe for converting a script into an exe. The build process shows this:</p>

<p><hr /></p>

<p>The following modules appear to be missing</p>

<h2>['email.Encoders', 'email.Generator', 'email.Iterators', 'email.MIMEBase', 'email.MIMEMultipart', 'email.MIMEText', 'email.Utils', 'email.base64MIME']</h2>

<p>The executable does not work. The referenced modules are not included. I researched this on the Internet and I found out that py2exe has a problem with the Lazy import used in the standard lib email module. Unfortunately I have not succeeded in finding a workaround for this problem. Can anyone help?</p>

<p>Thank you,</p>

<p>P.S.
Imports in the script look like this:</p>

<p>Code: Select all
    import string,time,sys,os,smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email.MIMEText import MIMEText
    from email import Encoders</p>
","<p>What version of Python are you using?  If you are using 2.5 or 2.6, then you should be doing your import like:</p>

<pre><code>import string,time,sys,os,smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.base import MIMEBase
from email.mime.text import MIMEText
from email import Encoders
</code></pre>

<p>I'm pretty certain that py2exe's modulefinder can correctly find the email package if you use it correctly (i.e. use the above names in Python 2.5+, or use the old names in Python 2.4-).  Certainly the SpamBayes setup script does not need to explicitly include the email package, and it includes the email modules without problem.</p>

<p>The other answers are correct in that if you do need to specifically include a module, you use the ""includes"" option, either via the command-line, or passing them in when you call setup.</p>
",4
327,174170,python,7,Python - Py2exe can't build .exe using the 'email' module,"<p>py2exe does not work with the standard email module</p>

<p>Hello. I am trying to use py2exe for converting a script into an exe. The build process shows this:</p>

<p><hr /></p>

<p>The following modules appear to be missing</p>

<h2>['email.Encoders', 'email.Generator', 'email.Iterators', 'email.MIMEBase', 'email.MIMEMultipart', 'email.MIMEText', 'email.Utils', 'email.base64MIME']</h2>

<p>The executable does not work. The referenced modules are not included. I researched this on the Internet and I found out that py2exe has a problem with the Lazy import used in the standard lib email module. Unfortunately I have not succeeded in finding a workaround for this problem. Can anyone help?</p>

<p>Thank you,</p>

<p>P.S.
Imports in the script look like this:</p>

<p>Code: Select all
    import string,time,sys,os,smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email.MIMEText import MIMEText
    from email import Encoders</p>
","<p>Use the ""includes"" option.  See: <a href=""http://www.py2exe.org/index.cgi/ListOfOptions"" rel=""nofollow"">http://www.py2exe.org/index.cgi/ListOfOptions</a></p>
",2
326,174170,python,7,Python - Py2exe can't build .exe using the 'email' module,"<p>py2exe does not work with the standard email module</p>

<p>Hello. I am trying to use py2exe for converting a script into an exe. The build process shows this:</p>

<p><hr /></p>

<p>The following modules appear to be missing</p>

<h2>['email.Encoders', 'email.Generator', 'email.Iterators', 'email.MIMEBase', 'email.MIMEMultipart', 'email.MIMEText', 'email.Utils', 'email.base64MIME']</h2>

<p>The executable does not work. The referenced modules are not included. I researched this on the Internet and I found out that py2exe has a problem with the Lazy import used in the standard lib email module. Unfortunately I have not succeeded in finding a workaround for this problem. Can anyone help?</p>

<p>Thank you,</p>

<p>P.S.
Imports in the script look like this:</p>

<p>Code: Select all
    import string,time,sys,os,smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email.MIMEText import MIMEText
    from email import Encoders</p>
","<p>If you don't have to work with py2exe, bbfreeze works better, and I've tried it with the email module. <a href=""http://pypi.python.org/pypi/bbfreeze/0.95.4"" rel=""nofollow"">http://pypi.python.org/pypi/bbfreeze/0.95.4</a></p>
",1
325,174170,python,7,Python - Py2exe can't build .exe using the 'email' module,"<p>py2exe does not work with the standard email module</p>

<p>Hello. I am trying to use py2exe for converting a script into an exe. The build process shows this:</p>

<p><hr /></p>

<p>The following modules appear to be missing</p>

<h2>['email.Encoders', 'email.Generator', 'email.Iterators', 'email.MIMEBase', 'email.MIMEMultipart', 'email.MIMEText', 'email.Utils', 'email.base64MIME']</h2>

<p>The executable does not work. The referenced modules are not included. I researched this on the Internet and I found out that py2exe has a problem with the Lazy import used in the standard lib email module. Unfortunately I have not succeeded in finding a workaround for this problem. Can anyone help?</p>

<p>Thank you,</p>

<p>P.S.
Imports in the script look like this:</p>

<p>Code: Select all
    import string,time,sys,os,smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email.MIMEText import MIMEText
    from email import Encoders</p>
","<p>Have a look at this question <a href=""http://stackoverflow.com/questions/169897/how-to-package-twisted-program-with-py2exe"">how-to-package-twisted-program-with-py2exe</a> it seems to be the same problem.</p>

<p>The answer given there is to explicitly include the modules on the command line to py2exe.</p>
",4
49,45500,python,7,Wacom tablet Python interface,"<p>If possible I want to catch pressure sensitive input from a Wacom tablet in Python. Are there any Python libraries available that can do this?</p>
","<p>You could perhaps take a look at the <a href=""http://www.alexmac.cc/tablet-apps/tablet-apps-0.3.1.tar.bz2"" rel=""nofollow"">software</a> described <a href=""http://www.alexmac.cc/tablet-apps/"" rel=""nofollow"">here</a>. It is a gnome applet, written in Python.</p>

<p>From the web site:</p>

<p>""The gnome wacom applet is a small gnome panel applet that shows how much pressure is being applied to your wacom tablet by the current device. Clicking on the panel icon brings up a dialog allowing you to select a different device and check what pressure and tilt information is being recieved from it. This dialog also contains a small drawing test area to give your pen a quick test.""</p>

<p><a href=""http://www.google.com/search?q=wacom+tablet+python"" rel=""nofollow"">Google is your friend</a></p>
",3
81,66730,python,6,How do I create a new signal in pygtk,"<p>I've created a python object, but I want to send signals on it.  I made it inherit from gobject.GObject, but there doesn't seem to be any way to create a new signal on my object.</p>
","<p>Here is how:</p>

<pre><code>import gobject

class MyGObjectClass(gobject.GObject):
    ...

gobject.signal_new(""signal-name"", MyGObjectClass, gobject.SIGNAL_RUN_FIRST,
    None, (str, int))
</code></pre>

<p>Where the second to last argument is the return type and the last argument is a tuple of argument types.</p>
",4
82,66730,python,6,How do I create a new signal in pygtk,"<p>I've created a python object, but I want to send signals on it.  I made it inherit from gobject.GObject, but there doesn't seem to be any way to create a new signal on my object.</p>
","<p>You can also define signals inside the class definition:</p>

<pre><code>class MyGObjectClass(gobject.GObject):
    __gsignals__ = {
      ""some-signal"": (gobject.SIGNAL_RUN_FIRST, gobject.TYPE_NONE, (object, )),
    }
</code></pre>

<p>The contents of the tuple are the the same as the three last arguments to <code>gobject.signal_new</code>.</p>
",10
83,66730,python,6,How do I create a new signal in pygtk,"<p>I've created a python object, but I want to send signals on it.  I made it inherit from gobject.GObject, but there doesn't seem to be any way to create a new signal on my object.</p>
","<p>If you use kiwi available <a href=""http://kiwi.async.com.br/"" rel=""nofollow"">here</a> you can just do:</p>

<pre><code>from kiwi.utils import gsignal

class MyObject(gobject.GObject):
    gsignal('signal-name')
</code></pre>
",2
288,159990,python,6,"What is the difference between Ruby and Python versions of""self""?","<p>I've done some Python but have just now starting to use Ruby<br />
I could use a good explanation of the difference between ""self"" in these two languages.  </p>

<p><strong>Obvious on first glance:</strong><br />
Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.<br />
Python methods receive self as an explicit argument, whereas Ruby does not.<br />
Ruby sometimes has methods explicitly defined as part of self using dot notation.</p>

<p><strong>Initial Googling reveals</strong><br />
<a href=""http://rubylearning.com/satishtalim/ruby_self.html"">http://rubylearning.com/satishtalim/ruby_self.html</a><br />
<a href=""http://www.ibiblio.org/g2swap/byteofpython/read/self.html"">http://www.ibiblio.org/g2swap/byteofpython/read/self.html</a>  </p>
","<p>self is used only as a convention, you can use spam, bacon or sausage instead of self and get the same result. It's just the first argument passed to bound methods. But stick to using self as it will confuse others and some editors.</p>
",5
300,169810,python,6,2D animation in Python,"<p>I'm writing a simulator in Python, and am curious about options and opinions regarding basic 2D animations. By animation, I'm referring to rendering on the fly, not displaying prerendered images.</p>

<p>I'm currently using matplotlib (Wxagg backend), and it's possible that I'll be able to continue using it, but I suspect it won't be able to sufficiently scale in terms of performance or capabilities.</p>

<p>Requirements are:</p>

<ul>
<li>Cross-platform (Linux, MacOS X,
Windows)</li>
<li>Low complexity overhead</li>
<li>Plays well with wxpython (at least won't step on each other's toes unduly)</li>
<li>Interactivity. Detect when objects are clicked on, moused over, etc. </li>
</ul>

<p>Note that high performance isn't on the list, but the ability to handle ~100 bitmap objects on the screen would be good.</p>

<p>Your thoughts?</p>
","<p>I am a fan of <a href=""http://pyglet.org"" rel=""nofollow"">pyglet</a> which is a completely self contained library for doing graphical work under win32, linux, and OS X. </p>

<p>It has very low overhead, and you can see this for yourself from the tutorial on the website. It <em>should</em> play well with wxpython, or at least I seem to recall posts to the mailing list about wxpython and pyglet being used together.</p>

<p>It however does not offer selection of objects via mouse clicks - this you will have to handle yourself. Generally speaking for a 2D application this is not too difficult to do.</p>

<p><a href=""https://github.com/freespace/mactorii"" rel=""nofollow"">mactorii</a> is an OS X application of mine written in pure python+pyglet, and has some basic animation (scrolling) and click detection. It doesn't use wxpython, but perhaps it will give you an idea of what is involved. Note however mactorii is using the old pyglet api, so the run loop I have in there is obsolete. I will get around to updating it one day... :P</p>
",10
103,78450,python,6,Python ReportLab use of splitfirst/splitlast,"<p>I'm trying to use Python with ReportLab 2.2 to create a PDF report.<br />
According to the <a href=""http://www.reportlab.com/docs/userguide.pdf"">user guide</a>,</p>

<blockquote>
  <p>Special TableStyle Indeces [sic]</p>
  
  <p>In any style command the first row index may be set to one of the special strings 'splitlast' or 'splitfirst' to indicate that the style should be used only for the last row of a split table, or the first row of a continuation. This allows splitting tables with nicer effects around the split.</p>
</blockquote>

<p>I've tried using several style elements, including:</p>

<pre><code>('TEXTCOLOR', (0, 'splitfirst'), (1, 'splitfirst'), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, 0), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, -1), colors.black)
</code></pre>

<p>and none of these seems to work.  The first generates a TypeError with the message: </p>

<pre><code>TypeError: cannot concatenate 'str' and 'int' objects
</code></pre>

<p>and the latter two generate TypeErrors with the message:</p>

<pre><code>TypeError: an integer is required
</code></pre>

<p>Is this functionality simply broken or am I doing something wrong?  If the latter, what am I doing wrong?</p>
","<p>Well, it looks as if I will be answering my own question.</p>

<p>First, the documentation flat out lies where it reads ""In any style command the first row index may be set to one of the special strings 'splitlast' or 'splitfirst' to indicate that the style should be used only for the last row of a split table, or the first row of a continuation.""  In the current release, the ""splitlast"" and ""splitfirst"" row indices break with the aforementioned TypeErrors on the TEXTCOLOR and BACKGROUND commnds.</p>

<p>My suspicion, based on reading the source code, is that only the tablestyle line commands (GRID, BOX, LINEABOVE, and LINEBELOW) are currently compatible with the 'splitfirst' and 'splitlast' row indices.  I suspect that all cell commands break with the aforementioned TypeErrors.</p>

<p>However, I was able to do what I wanted by subclassing the Table class and overriding the onSplit method.  Here is my code:</p>

<pre><code>class XTable(Table):
    def onSplit(self, T, byRow=1):
        T.setStyle(TableStyle([
          ('TEXTCOLOR', (0, 1), (1, 1), colors.black)]))
</code></pre>

<p>What this does is apply the text color black to the first and second cell of the second row of each page.  (The first row is a header, repeated by the repeatRows parameter of the Table.)  More precisely, it is doing this to the first and second cell of each frame, but since I am using the SimpleDocTemplate, frames and pages are identical.</p>
",2
236,133860,python,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
","<p>Try granting the Apache user (the user that the apache service is running under) r+w permissions on that file.</p>
",0
237,133860,python,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
","<p>It sounds like the environment you apache process is running under is a little unusual.  For whatever reason, svn seems to think the user configuration files it needs are in /root.  You can avoid having svn use the root versions of the files by specifying on the command line which config directory to use, like so:</p>

<pre><code>svn --config-dir /home/myuser/.subversion checkout http://example.com/path
</code></pre>

<p>While not fixing your enviornment, it will at least allow you to have your script run properly...</p>
",5
238,133860,python,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
","<p>Doesn't Apache's error log give you a clue?</p>

<p>Maybe it has to do with SELinux. Check /var/log/audit/audit.log and adjust your SELinux configuration accordingly, if the audit.log file indicates that it's SELinux which denies Apache access.</p>
",0
239,133860,python,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
","<p>The Permission Denied error is showing that the script is running with root credentials, because it's looking in root's home dir for files.</p>

<p>I suggest you change the hook script to something that does:</p>

<pre><code>id &gt; /tmp/id
</code></pre>

<p>so that you can check the results of that to make sure what the uid/gid and euid/egid are.  You will probably find it's not actually running as the user you think it is.</p>

<p>My first guess, like Troels, was also SELinux, but that would only be my guess if you are absolutely sure the script through Apache is running with exactly the same user/group as your manual test.</p>
",0
240,133860,python,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
","<p>Well, thanks to all who answered the question. Anyway, I think I solved the mistery. </p>

<p>SELinux is completely disabled on the machine, so the problem is definitely in 'svn co' not being able to found config_dir for the user account it runs under.</p>

<p>Apache / mod_python doesn't read in shell environment of the user account which apache is running  on. Thus for examle no $HOME is seen by mod_python when apache 
is running under some  real user ( not nobody ) </p>

<p>Now 'svn co' has a flag --config-dir which points to configuration directory to read params from. By default it is $HOME/.subversion, i.e. it corresponds to the user account home directory. Apparently when no $HOME exists mod_python goes to root home dir ( /root) and tries to fiddle with .subversion content over there - which is obviously
fails miserably.</p>

<p>putting </p>

<p>SetEnv HOME /home/qa </p>

<p>into the /etc/httpd/conf/httpd.conf doesn't solve the problem because of SetEnv having nothing to do with shell environment - it only sets apache related environment</p>

<p>Likewise PythonOption - sets only mod_python related variables which can be read with req.get_options()  after that</p>

<p>Running 'svn co --config-dir /home/ ...' definitely gives a workaround for running from within mod_python, but gets in the way of those who will try to run the script from command line.</p>

<p>So the proposed ( and working) solution is to set HOME environment variable prior to starting appache.</p>

<p>For example in /etc/init.d/httpd  script </p>

<pre><code>    QAHOME=/home/qa
    ...
    HOME=$QAHOME LANG=$HTTPD_LANG daemon $httpd $OPTIONS
</code></pre>
",0
102,78450,python,6,Python ReportLab use of splitfirst/splitlast,"<p>I'm trying to use Python with ReportLab 2.2 to create a PDF report.<br />
According to the <a href=""http://www.reportlab.com/docs/userguide.pdf"">user guide</a>,</p>

<blockquote>
  <p>Special TableStyle Indeces [sic]</p>
  
  <p>In any style command the first row index may be set to one of the special strings 'splitlast' or 'splitfirst' to indicate that the style should be used only for the last row of a split table, or the first row of a continuation. This allows splitting tables with nicer effects around the split.</p>
</blockquote>

<p>I've tried using several style elements, including:</p>

<pre><code>('TEXTCOLOR', (0, 'splitfirst'), (1, 'splitfirst'), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, 0), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, -1), colors.black)
</code></pre>

<p>and none of these seems to work.  The first generates a TypeError with the message: </p>

<pre><code>TypeError: cannot concatenate 'str' and 'int' objects
</code></pre>

<p>and the latter two generate TypeErrors with the message:</p>

<pre><code>TypeError: an integer is required
</code></pre>

<p>Is this functionality simply broken or am I doing something wrong?  If the latter, what am I doing wrong?</p>
","<blockquote>
  <p>[...] In any style command <strong>the first row
  index</strong> may be set to one of the special strings [...]</p>
</blockquote>

<p>In your first example you're setting the <em>second</em> row index to a special string as well.</p>

<p>Not sure why the other two don't work... Are you sure this is where the exception is coming from?</p>
",0
287,159990,python,6,"What is the difference between Ruby and Python versions of""self""?","<p>I've done some Python but have just now starting to use Ruby<br />
I could use a good explanation of the difference between ""self"" in these two languages.  </p>

<p><strong>Obvious on first glance:</strong><br />
Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.<br />
Python methods receive self as an explicit argument, whereas Ruby does not.<br />
Ruby sometimes has methods explicitly defined as part of self using dot notation.</p>

<p><strong>Initial Googling reveals</strong><br />
<a href=""http://rubylearning.com/satishtalim/ruby_self.html"">http://rubylearning.com/satishtalim/ruby_self.html</a><br />
<a href=""http://www.ibiblio.org/g2swap/byteofpython/read/self.html"">http://www.ibiblio.org/g2swap/byteofpython/read/self.html</a>  </p>
","<p>Well, I don't know much about Ruby. But the obvious point about Python's ""self"" is that it's not a ""keyword"" ...it's just the name of an argument that's sent to your method.</p>

<p>You can use any name you like for this argument. ""Self"" is just a convention.</p>

<p>For example :</p>

<pre><code>class X :
    def __init__(a,val) :
        a.x = val
    def p(b) :
        print b.x

x = X(6)
x.p()
</code></pre>

<p>Prints the number 6 on the terminal. In the constructor the self object is actually called a. But in the p() method, it's called b.</p>

<p>Update : In October 2008, Guido pointed out that having an explicit self was also necessary to allow Python decorators to be general enough to work on pure functions, methods or classmethods : <a href=""http://neopythonic.blogspot.com/2008/10/why-explicit-self-has-to-stay.html"" rel=""nofollow"">http://neopythonic.blogspot.com/2008/10/why-explicit-self-has-to-stay.html</a></p>
",5
290,159990,python,6,"What is the difference between Ruby and Python versions of""self""?","<p>I've done some Python but have just now starting to use Ruby<br />
I could use a good explanation of the difference between ""self"" in these two languages.  </p>

<p><strong>Obvious on first glance:</strong><br />
Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.<br />
Python methods receive self as an explicit argument, whereas Ruby does not.<br />
Ruby sometimes has methods explicitly defined as part of self using dot notation.</p>

<p><strong>Initial Googling reveals</strong><br />
<a href=""http://rubylearning.com/satishtalim/ruby_self.html"">http://rubylearning.com/satishtalim/ruby_self.html</a><br />
<a href=""http://www.ibiblio.org/g2swap/byteofpython/read/self.html"">http://www.ibiblio.org/g2swap/byteofpython/read/self.html</a>  </p>
","<p>Despite webmat's claim, Guido <a href=""http://markmail.org/message/n6fs5pec5233mbfg"">wrote</a> that explicit self is ""not an implementation hack -- it is a semantic device"".</p>

<blockquote>
  <p>The reason for explicit self in method
  definition signatures is semantic
  consistency. If you write</p>
  
  <p>class C: def foo(self, x, y): ...</p>
  
  <p>This really <em>is</em> the same as writing</p>
  
  <p>class C: pass</p>
  
  <p>def foo(self, x, y): ... C.foo = foo</p>
</blockquote>

<p>This was an intentional design decision, not a result of introducing OO behaviour at a latter date.</p>

<p>Everything in Python -is- an object, including literals.</p>

<p>See also <a href=""http://effbot.org/pyfaq/why-must-self-be-used-explicitly-in-method-definitions-and-calls.htm"">Why must 'self' be used explicitly in method definitions and calls?</a></p>
",5
289,159990,python,6,"What is the difference between Ruby and Python versions of""self""?","<p>I've done some Python but have just now starting to use Ruby<br />
I could use a good explanation of the difference between ""self"" in these two languages.  </p>

<p><strong>Obvious on first glance:</strong><br />
Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.<br />
Python methods receive self as an explicit argument, whereas Ruby does not.<br />
Ruby sometimes has methods explicitly defined as part of self using dot notation.</p>

<p><strong>Initial Googling reveals</strong><br />
<a href=""http://rubylearning.com/satishtalim/ruby_self.html"">http://rubylearning.com/satishtalim/ruby_self.html</a><br />
<a href=""http://www.ibiblio.org/g2swap/byteofpython/read/self.html"">http://www.ibiblio.org/g2swap/byteofpython/read/self.html</a>  </p>
","<p>Python is designed to support more than just object-oriented programming. Preserving the same interface between methods and functions lets the two styles interoperate more cleanly.</p>

<p>Ruby was built from the ground up to be object-oriented. Even the literals are objects (evaluate 1.class and you get Fixnum). The language was built such that self is a reserved keyword that returns the current instance wherever you are.</p>

<p>If you're inside an instance method of one of your class, self is a reference to said instance. </p>

<p>If you're in the definition of the class itself (not in a method), self is the class itself:</p>

<pre><code>class C
  puts ""I am a #{self}""
  def instance_method
    puts 'instance_method'
  end
  def self.class_method
    puts 'class_method'
  end
end
</code></pre>

<p>At class definition time, 'I am a C' will be printed.</p>

<p>The straight 'def' defines an instance method, whereas the 'def self.xxx' defines a class method.</p>

<pre><code>c=C.new

c.instance_method
#=&gt; instance_method
C.class_method
#=&gt; class_method
</code></pre>
",7
197,106850,python,5,How best to draw in the console?,"<p>I'm trying to write a console (as in terminal, not gaming console) pong game in python and I'm having trouble figuring how best to (re)draw the game.</p>

<p>I was thinking of having an 2d array as a sort of bitmap, editing the array to reflect the ball/paddles new positions and then casting each row to a string and printing it. However that means that the old ""frames"" will remain, and if the dimensions of the game are smaller than the console window, old frames will still be visible.</p>

<p>Is there a way to delete characters from the console? '\b' I've heard is unreliable.</p>

<p>Or is there an easier alternative route to outputting to the console for this sort of app?</p>
","<p>I would investigate using the <a href=""http://python.org/doc/2.5/lib/module-curses.html"" rel=""nofollow"">curses</a> module. It will take care of a lot of the details and let you focus on the higher level stuff.</p>
",0
196,106850,python,5,How best to draw in the console?,"<p>I'm trying to write a console (as in terminal, not gaming console) pong game in python and I'm having trouble figuring how best to (re)draw the game.</p>

<p>I was thinking of having an 2d array as a sort of bitmap, editing the array to reflect the ball/paddles new positions and then casting each row to a string and printing it. However that means that the old ""frames"" will remain, and if the dimensions of the game are smaller than the console window, old frames will still be visible.</p>

<p>Is there a way to delete characters from the console? '\b' I've heard is unreliable.</p>

<p>Or is there an easier alternative route to outputting to the console for this sort of app?</p>
","<p>It looks like there is a <a href=""http://en.wikipedia.org/wiki/Curses_(programming_library)"" rel=""nofollow"">curses</a> port/library for Python:</p>

<p><a href=""https://docs.python.org/library/curses.html"" rel=""nofollow"">https://docs.python.org/library/curses.html</a></p>
",5
199,106850,python,5,How best to draw in the console?,"<p>I'm trying to write a console (as in terminal, not gaming console) pong game in python and I'm having trouble figuring how best to (re)draw the game.</p>

<p>I was thinking of having an 2d array as a sort of bitmap, editing the array to reflect the ball/paddles new positions and then casting each row to a string and printing it. However that means that the old ""frames"" will remain, and if the dimensions of the game are smaller than the console window, old frames will still be visible.</p>

<p>Is there a way to delete characters from the console? '\b' I've heard is unreliable.</p>

<p>Or is there an easier alternative route to outputting to the console for this sort of app?</p>
","<p>You can use curses.</p>

<p>It has a <a href=""http://adamv.com/dev/python/curses/"" rel=""nofollow"" title=""WCurses"">Windows Port</a> and <a href=""https://docs.python.org/library/curses.html"" rel=""nofollow"" title=""Unix Curses"">Unix Port</a>, and plenty of <a href=""https://docs.python.org/howto/curses.html"" rel=""nofollow"" title=""curses howto"">documentation</a>.
You can also use some <a href=""http://urwid.org/"" rel=""nofollow"" title=""gui for curses"">helper libs</a>.</p>
",1
50,45540,python,5,How to know whether a window with a given title is already open in Tk?,"<p>Iâve writen a little python script that just pops up a message box containing the text passed on the command line. I want to pop it up only when the window âresulting from a previous callâ is not open.</p>

<pre><code>from Tkinter import *
import tkMessageBox

root = Tk()
root.withdraw() 

# TODO not if a window with this title exists
tkMessageBox.showinfo(""Key you!"", "" "".join(sys.argv[1:]))
</code></pre>

<p>Any idea how to check that?</p>
","<p>I believe you want:</p>

<pre><code>if 'normal' != root.state():
    tkMessageBox.showinfo(""Key you!"", "" "".join(sys.argv[1:]))
</code></pre>
",1
198,106850,python,5,How best to draw in the console?,"<p>I'm trying to write a console (as in terminal, not gaming console) pong game in python and I'm having trouble figuring how best to (re)draw the game.</p>

<p>I was thinking of having an 2d array as a sort of bitmap, editing the array to reflect the ball/paddles new positions and then casting each row to a string and printing it. However that means that the old ""frames"" will remain, and if the dimensions of the game are smaller than the console window, old frames will still be visible.</p>

<p>Is there a way to delete characters from the console? '\b' I've heard is unreliable.</p>

<p>Or is there an easier alternative route to outputting to the console for this sort of app?</p>
","<p>This <a href=""http://stackoverflow.com/questions/43267/good-resources-for-writing-console-style-applications-for-windows"">previous StackOverflow question</a> should give you some more useful information.</p>
",0
195,106630,python,5,Why unicode() uses str() on my object only with no encoding given?,"<p>I start by creating a string variable with some <strong>non-ascii</strong> <em>utf-8</em> encoded data on it:</p>

<pre><code>&gt;&gt;&gt; text = 'Ã¡'
&gt;&gt;&gt; text
'\xc3\xa1'
&gt;&gt;&gt; text.decode('utf-8')
u'\xe1'
</code></pre>

<p>Using <code>unicode()</code> on it raises errors...</p>

<pre><code>&gt;&gt;&gt; unicode(text)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>...but if I know the encoding I can use it as second parameter:</p>

<pre><code>&gt;&gt;&gt; unicode(text, 'utf-8')
u'\xe1'
&gt;&gt;&gt; unicode(text, 'utf-8') == text.decode('utf-8')
True
</code></pre>

<p>Now if I have a class that returns this text in the <code>__str__()</code> method:</p>

<pre><code>&gt;&gt;&gt; class ReturnsEncoded(object):
...     def __str__(self):
...         return text
... 
&gt;&gt;&gt; r = ReturnsEncoded()
&gt;&gt;&gt; str(r)
'\xc3\xa1'
</code></pre>

<p><code>unicode(r)</code> seems to use <code>str()</code> on it, since it raises the same error as <code>unicode(text)</code> above:</p>

<pre><code>&gt;&gt;&gt; unicode(r)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>Until now everything is as planned!</p>

<p><strong>But as no one would ever expect, <code>unicode(r, 'utf-8')</code> won't even try:</strong></p>

<pre><code>&gt;&gt;&gt; unicode(r, 'utf-8')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: coercing to Unicode: need string or buffer, ReturnsEncoded found
</code></pre>

<p>Why? Why this inconsistent behavior? Is it a bug? is it intended? Very awkward.</p>
","<p>The behaviour does seem confusing, but intensional. I reproduce here the entirety of the unicode documentation from the <a href=""http://docs.python.org/lib/built-in-funcs.html"" rel=""nofollow"">Python Built-In Functions documentation</a> (for version 2.5.2, as I write this):</p>

<blockquote>
  <p><strong>unicode([object[, encoding [, errors]]])</strong></p>
  
  <p>Return the Unicode string version of object using one of the following modes:</p>
  
  <p>If encoding and/or errors are given, unicode() will decode the
     object which can either be an 8-bit string or a character buffer
     using the codec for encoding. The encoding parameter is a string
     giving the name of an encoding; if the encoding is not known,
     LookupError is raised. Error handling is done according to
     errors; this specifies the treatment of characters which are
     invalid in the input encoding. If errors is 'strict' (the
     default), a ValueError is raised on errors, while a value of
     'ignore' causes errors to be silently ignored, and a value of
     'replace' causes the official Unicode replacement character,
     U+FFFD, to be used to replace input characters which cannot be
     decoded. See also the <a href=""http://docs.python.org/lib/module-codecs.html"" rel=""nofollow"">codecs</a> module.</p>
  
  <p>If no optional parameters are given, unicode() will mimic the
     behaviour of str() except that it returns Unicode strings
     instead of 8-bit strings. More precisely, if object is a Unicode
     string or subclass it will return that Unicode string without
     any additional decoding applied.</p>
  
  <p>For objects which provide a __unicode__() method, it will call
     this method without arguments to create a Unicode string. For
     all other objects, the 8-bit string version or representation is
     requested and then converted to a Unicode string using the codec
     for the default encoding in 'strict' mode.</p>
  
  <p>New in version 2.0. Changed in version 2.2: Support for __unicode__() added. </p>
</blockquote>

<p>So, when you call <code>unicode(r, 'utf-8')</code>, it requires an 8-bit string or a character buffer as the first argument, so it coerces your object using the <code>__str__()</code> method, and attempts to decode that using the <code>utf-8</code> codec. Without the <code>utf-8</code>, the <code>unicode()</code> function looks for a for a <code>__unicode__()</code> method on your object, and not finding it, calls the <code>__str__()</code> method, as you suggested, attempting to use the default codec to convert to unicode.</p>
",7
194,106630,python,5,Why unicode() uses str() on my object only with no encoding given?,"<p>I start by creating a string variable with some <strong>non-ascii</strong> <em>utf-8</em> encoded data on it:</p>

<pre><code>&gt;&gt;&gt; text = 'Ã¡'
&gt;&gt;&gt; text
'\xc3\xa1'
&gt;&gt;&gt; text.decode('utf-8')
u'\xe1'
</code></pre>

<p>Using <code>unicode()</code> on it raises errors...</p>

<pre><code>&gt;&gt;&gt; unicode(text)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>...but if I know the encoding I can use it as second parameter:</p>

<pre><code>&gt;&gt;&gt; unicode(text, 'utf-8')
u'\xe1'
&gt;&gt;&gt; unicode(text, 'utf-8') == text.decode('utf-8')
True
</code></pre>

<p>Now if I have a class that returns this text in the <code>__str__()</code> method:</p>

<pre><code>&gt;&gt;&gt; class ReturnsEncoded(object):
...     def __str__(self):
...         return text
... 
&gt;&gt;&gt; r = ReturnsEncoded()
&gt;&gt;&gt; str(r)
'\xc3\xa1'
</code></pre>

<p><code>unicode(r)</code> seems to use <code>str()</code> on it, since it raises the same error as <code>unicode(text)</code> above:</p>

<pre><code>&gt;&gt;&gt; unicode(r)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>Until now everything is as planned!</p>

<p><strong>But as no one would ever expect, <code>unicode(r, 'utf-8')</code> won't even try:</strong></p>

<pre><code>&gt;&gt;&gt; unicode(r, 'utf-8')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: coercing to Unicode: need string or buffer, ReturnsEncoded found
</code></pre>

<p>Why? Why this inconsistent behavior? Is it a bug? is it intended? Very awkward.</p>
","<p><code>unicode</code> does not guess the encoding of your text. If your object can print itself as <code>unicode</code>, define the <code>__unicode__()</code> method that returns a Unicode string.</p>

<p><hr /></p>

<p>The secret is that <code>unicode(r)</code> is not actually calling <code>__str__()</code> itself. Instead, it's looking for a <code>__unicode__()</code> method. The default implementation of <code>__unicode__()</code> will call <code>__str__()</code> and then attempt to decode it using the <code>ascii</code> charset. When you pass the encoding, <code>unicode()</code> expects the first object to be something that can be decoded -- that is, an instance of <code>basestring</code>.</p>

<p><hr /></p>

<blockquote>
  <p>Behavior is weird because it tries to decode as ascii if I don't pass 'utf-8'. But if I pass 'utf-8' it gives a different error...</p>
</blockquote>

<p>That's because when you specify ""utf-8"", it treats the first parameter as a string-like object to be decoded. Without it, it treats the parameter as an object to be coerced to unicode.</p>

<p>I do not understand the confusion. If you know that the object's <code>text</code> attribute will always be UTF-8 encoded, just define <code>__unicode__()</code> and then everything will work fine.</p>
",4
296,167120,python,5,Removing a subset of a dict from within a list,"<p>This is really only easy to explain with an example, so to remove the intersection of a list from within a dict I usually do something like this:</p>

<pre><code>a = {1:'', 2:'', 3:'', 4:''}
exclusion = [3, 4, 5]

# have to build up a new list or the iteration breaks
toRemove = []
for var in a.iterkeys():
    if var in exclusion:
        toRemove.append(var)

for var in toRemove:
    del a[var]
</code></pre>

<p>This might seem like an unusual example, but it's surprising the number of times I've had to do something like this. Doing this with sets would be much nicer, but I clearly want to retain the 'values' for the dict.</p>

<p>This method is annoying because it requires two loops and an extra array. Is there a cleaner and more efficient way of doing this.</p>
","<p>You could change your exclusion list to a set, then just use intersection to get the overlap.</p>

<pre><code>exclusion = set([3, 4, 5])

for key in exclusion.intersection(a):
    del a[key]
</code></pre>
",1
295,167120,python,5,Removing a subset of a dict from within a list,"<p>This is really only easy to explain with an example, so to remove the intersection of a list from within a dict I usually do something like this:</p>

<pre><code>a = {1:'', 2:'', 3:'', 4:''}
exclusion = [3, 4, 5]

# have to build up a new list or the iteration breaks
toRemove = []
for var in a.iterkeys():
    if var in exclusion:
        toRemove.append(var)

for var in toRemove:
    del a[var]
</code></pre>

<p>This might seem like an unusual example, but it's surprising the number of times I've had to do something like this. Doing this with sets would be much nicer, but I clearly want to retain the 'values' for the dict.</p>

<p>This method is annoying because it requires two loops and an extra array. Is there a cleaner and more efficient way of doing this.</p>
","<pre><code>a = dict((key,value) for (key,value) in a.iteritems() if key not in exclusion)
</code></pre>
",3
294,167120,python,5,Removing a subset of a dict from within a list,"<p>This is really only easy to explain with an example, so to remove the intersection of a list from within a dict I usually do something like this:</p>

<pre><code>a = {1:'', 2:'', 3:'', 4:''}
exclusion = [3, 4, 5]

# have to build up a new list or the iteration breaks
toRemove = []
for var in a.iterkeys():
    if var in exclusion:
        toRemove.append(var)

for var in toRemove:
    del a[var]
</code></pre>

<p>This might seem like an unusual example, but it's surprising the number of times I've had to do something like this. Doing this with sets would be much nicer, but I clearly want to retain the 'values' for the dict.</p>

<p>This method is annoying because it requires two loops and an extra array. Is there a cleaner and more efficient way of doing this.</p>
","<p>Why not just use the <code>keys</code> method, instead of <code>iterkeys</code>? That way you can do it in one loop because it returns a list, not an iterator.</p>
",2
79,65400,python,5,How to add method using metaclass,"<p>How do I add an instance method to a class using a metaclass (yes I do need to use a metaclass)? The following kind of works, but the func_name will still be ""foo"":</p>

<pre><code>def bar(self):
    print ""bar""

class MetaFoo(type):
    def __new__(cls, name, bases, dict):
        dict[""foobar""] = bar
        return type(name, bases, dict)

class Foo(object):
    __metaclass__ = MetaFoo

&gt;&gt;&gt; f = Foo()
&gt;&gt;&gt; f.foobar()
bar
&gt;&gt;&gt; f.foobar.func_name
'bar'
</code></pre>

<p>My problem is that some library code actually uses the func_name and later fails to find the 'bar' method of the Foo instance. I could do:</p>

<pre><code>dict[""foobar""] = types.FunctionType(bar.func_code, {}, ""foobar"")
</code></pre>

<p>There is also types.MethodType, but I need an instance that does'nt exist yet to use that. Am I missing someting here?</p>
","<p>I think what you want to do is this:</p>

<pre><code>&gt;&gt;&gt; class Foo():
...   def __init__(self, x):
...     self.x = x
... 
&gt;&gt;&gt; def bar(self):
...   print 'bar:', self.x
... 
&gt;&gt;&gt; bar.func_name = 'foobar'
&gt;&gt;&gt; Foo.foobar = bar
&gt;&gt;&gt; f = Foo(12)
&gt;&gt;&gt; f.foobar()
bar: 12
&gt;&gt;&gt; f.foobar.func_name
'foobar'
</code></pre>

<p>Now you are free to pass <code>Foo</code>s to a library that expects <code>Foo</code> instances to have a method named <code>foobar</code>.</p>

<p>Unfortunately, (1) I don't know how to use metaclasses and (2) I'm not sure I read your question correctly, but I hope this helps. </p>

<p>Note that <code>func_name</code> is only assignable in Python 2.4 and higher.</p>
",2
80,65400,python,5,How to add method using metaclass,"<p>How do I add an instance method to a class using a metaclass (yes I do need to use a metaclass)? The following kind of works, but the func_name will still be ""foo"":</p>

<pre><code>def bar(self):
    print ""bar""

class MetaFoo(type):
    def __new__(cls, name, bases, dict):
        dict[""foobar""] = bar
        return type(name, bases, dict)

class Foo(object):
    __metaclass__ = MetaFoo

&gt;&gt;&gt; f = Foo()
&gt;&gt;&gt; f.foobar()
bar
&gt;&gt;&gt; f.foobar.func_name
'bar'
</code></pre>

<p>My problem is that some library code actually uses the func_name and later fails to find the 'bar' method of the Foo instance. I could do:</p>

<pre><code>dict[""foobar""] = types.FunctionType(bar.func_code, {}, ""foobar"")
</code></pre>

<p>There is also types.MethodType, but I need an instance that does'nt exist yet to use that. Am I missing someting here?</p>
","<p>Try dynamically extending the bases that way you can take advantage of the mro and the methods are actual methods:</p>

<pre><code>class Parent(object):
    def bar(self):
        print ""bar""

class MetaFoo(type):
    def __new__(cls, name, bases, dict):
    	return type(name, (Parent,) + bases, dict)

class Foo(object):
    __metaclass__ = MetaFoo

if __name__ == ""__main__"":
    f = Foo()
    f.bar()
    print f.bar.func_name
</code></pre>
",10
293,167120,python,5,Removing a subset of a dict from within a list,"<p>This is really only easy to explain with an example, so to remove the intersection of a list from within a dict I usually do something like this:</p>

<pre><code>a = {1:'', 2:'', 3:'', 4:''}
exclusion = [3, 4, 5]

# have to build up a new list or the iteration breaks
toRemove = []
for var in a.iterkeys():
    if var in exclusion:
        toRemove.append(var)

for var in toRemove:
    del a[var]
</code></pre>

<p>This might seem like an unusual example, but it's surprising the number of times I've had to do something like this. Doing this with sets would be much nicer, but I clearly want to retain the 'values' for the dict.</p>

<p>This method is annoying because it requires two loops and an extra array. Is there a cleaner and more efficient way of doing this.</p>
","<p>Consider <a href=""http://docs.python.org/library/stdtypes.html#dict.pop"" rel=""nofollow"">dict.pop</a>:</p>

<pre><code>for key in exclusion:
     a.pop(key, None)
</code></pre>

<p>The <code>None</code> keeps pop from raising an exception when <code>key</code> isn't a key.</p>
",11
337,177910,python,4,Accessing python egg's own metadata,"<p>I've produced a python egg using setuptools and would like to access it's metadata at runtime. I currently got working this:</p>

<pre><code>import pkg_resources
dist = pkg_resources.get_distribution(""my_project"")
print(dist.version)
</code></pre>

<p>but this would probably work incorrectly if I had multiple versions of the same egg installed. And if I have both installed egg and development version, then running this code from development version would pick up version of the installed egg. </p>

<p>So, how do I get metadata for <em>my</em> egg not some random matching egg installed on my system? </p>
","<p>Exactly. So you should only be able to get the information for the currently available egg (singular) of a library. If you have multiple eggs of the same library in your site-packages folder, check the easy-install.pth in the same folder to see which egg is really used :-)</p>

<p>On a site note: This is exactly the point of systems like zc.buildout which lets you define the exact version of a library that will be made available to you for example while developing an application or serving a web application. So you can for example use version 1.0 for one project and 1.2 for another. </p>
",0
336,177910,python,4,Accessing python egg's own metadata,"<p>I've produced a python egg using setuptools and would like to access it's metadata at runtime. I currently got working this:</p>

<pre><code>import pkg_resources
dist = pkg_resources.get_distribution(""my_project"")
print(dist.version)
</code></pre>

<p>but this would probably work incorrectly if I had multiple versions of the same egg installed. And if I have both installed egg and development version, then running this code from development version would pick up version of the installed egg. </p>

<p>So, how do I get metadata for <em>my</em> egg not some random matching egg installed on my system? </p>
","<p>I am somewhat new to Python as well, but from what I understand: </p>

<p>Although you can install multiple versions of the ""same"" egg (having the same name), only one of them will be available to any particular piece of code at runtime (based on your discovery method).  So if your egg is the one calling this code, it must have already been selected as <em>the</em> version of <code>my_project</code> for this code, and your access will be to your own version.</p>
",3
202,110760,python,3,Report generation,"<p>I am writing a web app using TurboGears, and in that app the users must be able to generate different reports.
The data the reports need is stored in a database (MySQL).
The reports must be returned either as a easily printable html document, or a pdf file.</p>

<p>I have previously used jasper and iReport for creating the documents, but if I can avoid having to fire up Java to create the report I would be happy.</p>

<p>Ideally I would like to specify reports in a easily readable markup language and then just feed the template data with some kind of library that produces the report.</p>

<p>I gladly accept any kind of hints on how I should go about generating these reports!</p>
","<p><a href=""http://appyframework.org/pod.html"" rel=""nofollow"">Pod</a> is my favorite solution to your problem.</p>
",3
201,110760,python,3,Report generation,"<p>I am writing a web app using TurboGears, and in that app the users must be able to generate different reports.
The data the reports need is stored in a database (MySQL).
The reports must be returned either as a easily printable html document, or a pdf file.</p>

<p>I have previously used jasper and iReport for creating the documents, but if I can avoid having to fire up Java to create the report I would be happy.</p>

<p>Ideally I would like to specify reports in a easily readable markup language and then just feed the template data with some kind of library that produces the report.</p>

<p>I gladly accept any kind of hints on how I should go about generating these reports!</p>
","<p>You can build some fancy PDFs from Python with the <a href=""http://www.reportlab.com/opensource/"" rel=""nofollow"">ReportLab</a> toolkit.</p>
",2
104,78900,python,3,How to check for memory leaks in Guile extension modules?,"<p>I develop an extension module for Guile, written in C.  This extension module embeds a Python interpreter.</p>

<p>Since this extension module invokes the Python interpreter, I need to verify that it properly manages the memory occupied by Python objects.  </p>

<p>I found that the Python interpreter is well-behaved in its own memory handling, so that by running valgrind I can find memory leaks due to bugs in my own Python interpreter embedding code, if there are no other interfering factors.  </p>

<p>However, when I run Guile under valgrind, valgrind reports memory leaks.  Such memory leaks obscure any memory leaks due to my own code.  </p>

<p>The question is what can I do to separate memory leaks due to bugs in my code from memory leaks reported by valgrind as due to Guile.  Another tool instead of valgrind?  Special valgrind options?  Give up and rely upon manual code walkthrough?</p>
","<p>You've got a couple options. One is to write a supressions file for valgrind that turns off reporting of stuff that you're not working on. Python has such a file, for example: 
<a href=""http://svn.python.org/projects/python/trunk/Misc/valgrind-python.supp"" rel=""nofollow"">http://svn.python.org/projects/python/trunk/Misc/valgrind-python.supp</a></p>

<p>If valgrind doesn't like your setup, another possibility is using <code>libmudflap</code>; you compile your program with <code>gcc -fmudflap -lmudflap</code>, and the resulting code is instrumented for pointer debugging. Described in the gcc docs, and here: <a href=""http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging"" rel=""nofollow"">http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging</a></p>
",4
241,137580,python,3,How can I perform a HEAD request with the mechanize library?,"<p>I know how to do a HEAD request with httplib, but I have to use mechanize for this site. </p>

<p>Essentially, what I need to do is grab a value from the header (filename) without actually downloading the file.</p>

<p>Any suggestions how I could accomplish this?</p>
","<p>Mechanize itself only sends GETs and POSTs, but you can easily extend the Request class to send HEAD. Example:</p>

<pre><code>import mechanize

class HeadRequest(mechanize.Request):
    def get_method(self):
        return ""HEAD""

request = HeadRequest(""http://www.example.com/"")
response = mechanize.urlopen(request)

print response.info()
</code></pre>
",8
262,149040,python,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
","<p>This <a href=""http://www.djangosnippets.org/snippets/937/"" rel=""nofollow"">Django Snippet</a> does what you want by defining a custom Read-Only Widget.  So you define a custom editor for the field which in fact doesn't allow any editing.</p>
",0
263,149040,python,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
","<p>For this particular case you can override your save method to slugify (it's built-in method, look at django source) the title and store it in slug field. Also from there you can easily check if this slug is indeed unique and change it somehow if it's not.</p>

<p>Consider this example:</p>

<pre><code>def save(self):
    from django.template.defaultfilters import slugify

    if not self.slug:
        self.slug = slugify(self.title)

    super(Your_Model_Name,self).save()
</code></pre>
",3
200,110760,python,3,Report generation,"<p>I am writing a web app using TurboGears, and in that app the users must be able to generate different reports.
The data the reports need is stored in a database (MySQL).
The reports must be returned either as a easily printable html document, or a pdf file.</p>

<p>I have previously used jasper and iReport for creating the documents, but if I can avoid having to fire up Java to create the report I would be happy.</p>

<p>Ideally I would like to specify reports in a easily readable markup language and then just feed the template data with some kind of library that produces the report.</p>

<p>I gladly accept any kind of hints on how I should go about generating these reports!</p>
","<p>A partial answer: the easily readable format you are looking for might be <a href=""http://www.docbook.org/"" rel=""nofollow"">DocBook</a>. From there it is very easy to go to PDF, html, RTF, etc. etc.</p>
",1
209,113170,python,3,What are the Python equivalents of the sighold and sigrelse functions found in C?,"<p>It appears the Python signal module doesn't have anything similar to the sighold and sigrelse functions found in C, using signal.h. Are there Python equivalents of <em>any</em> sort?</p>

<p>Many thanks!</p>
","<p>There is no way to ``block'' signals temporarily from critical sections (since this is not supported by all Unix flavors).</p>

<p><a href=""https://docs.python.org/library/signal.html"" rel=""nofollow"">https://docs.python.org/library/signal.html</a></p>
",2
265,149040,python,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
","<p>In addition to overriding <code>save</code> to provide the generated value you want, you can also use the <a href=""http://docs.djangoproject.com/en/dev/ref/contrib/admin/#exclude"" rel=""nofollow"">exclude</a> option in your <code>ModelAdmin</code> class to prevent the field from being displayed in the admin:</p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    exclude = ('slug',)
</code></pre>
",0
264,149040,python,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
","<p><a href=""http://www.djangosnippets.org/snippets/770/"" rel=""nofollow"">This snippet</a> gives you an AutoSlugField with exactly the behavior you are seeking, and adding it to your model is a one-liner.</p>
",0
261,149040,python,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
","<p>I'm not sure what you're asking for IS possible.  Your best bet is probably to hide the slug from the admin interface completely by specifying your fieldsets, and than overriding the save method to copy the slug from the tile, and potentially slugifying it...</p>
",0
210,113170,python,3,What are the Python equivalents of the sighold and sigrelse functions found in C?,"<p>It appears the Python signal module doesn't have anything similar to the sighold and sigrelse functions found in C, using signal.h. Are there Python equivalents of <em>any</em> sort?</p>

<p>Many thanks!</p>
","<p>There are no direct bindings for this in Python. Accessing them through ctypes is easy enough; here is an example.</p>

<pre><code>import ctypes, signal
libc = ctypes.cdll.LoadLibrary(""libc.so.6"")
libc.sighold(signal.SIGKILL)
libc.sigrelse(signal.SIGKILL)
</code></pre>

<p>I'm not familiar with the use of these calls, but be aware that Python's signal handlers work differently than C. When Python code is attached to a signal callback, the signal is caught on the C side of the interpreter and queued. The interpreter is occasionally interrupted for internal housekeeping (and thread switching, etc). It is during that interrupt the Python handler for the signal will be called.</p>

<p>All that to say, just be aware that Python's signal handling is a little less asynchronous than normal C signal handlers.</p>
",2
107,82180,python,2,PyQt and PyCairo,"<p>I know it's possible to place a PyCairo surface inside a Gtk Drawing Area. But I think Qt is a lot better to work with, so I've been wondering if there's anyway to place a PyCairo surface inside some Qt component?</p>
","<p>Qt's own OpenGL based surfaces (using QPainter) are known to be much faster than Cairo. Might you explain why you want specifically Cairo in Qt?</p>

<p>For the basics of using QPainter see <a href=""http://www.informit.com/articles/article.aspx?p=1174421"" rel=""nofollow"">this excerpt</a> from the book ""C++ GUI Programming with Qt4"", and while it's C++ code, the PyQt implementation will be parallel.</p>

<p>As for joining Cairo with Qt... <a href=""http://arstechnica.com/news.ars/post/20080818-nokia-helps-port-firefox-to-qt.html"" rel=""nofollow"">This article in ArsTechnica</a> sheds some light - it seems nothing that could help you exists currently (iow., nobody tried such marriage).</p>
",3
7,19030,python,2,How to check set of files conform to a naming scheme,"<p>I have a bunch of files (TV episodes, although that is fairly arbitrary) that I want to check match a specific naming/organisation scheme..</p>

<p>Currently: I have three arrays of regex, one for valid filenames, one for files missing an episode name, and one for valid paths.</p>

<p>Then, I loop though each valid-filename regex, if it matches, append it to a ""valid"" dict, if not, do the same with the missing-ep-name regexs, if it matches this I append it to an ""invalid"" dict with an error code (2:'missing epsiode name'), if it matches neither, it gets added to invalid with the 'malformed name' error code.</p>

<p>The current code can be found <a href=""http://github.com/dbr/checktveps/tree/8a6dc68ad61e684c8d8f0ca1dc37a22d1c51aa82/2checkTvEps.py"" rel=""nofollow"">here</a></p>

<p>I want to add a rule that checks for the presence of a folder.jpg file in each directory, but to add this would make the code substantially more messy in it's current state.. </p>

<p>How could I write this system in a more expandable way?</p>

<p>The rules it needs to check would be..</p>

<ul>
<li>File is in the format <code>Show Name - [01x23] - Episode Name.avi</code> or <code>Show Name - [01xSpecial02] - Special Name.avi</code> or <code>Show Name - [01xExtra01] - Extra Name.avi</code></li>
<li>If filename is in the format <code>Show Name - [01x23].avi</code> display it a 'missing episode name' section of the output</li>
<li>The path should be in the format <code>Show Name/season 2/the_file.avi</code> (where season 2 should be the correct season number in the filename)</li>
<li>each <code>Show Name/season 1/</code> folder should contain ""folder.jpg""</li>
</ul>

<p>.any ideas? While I'm trying to check TV episodes, this concept/code should be able to apply to many things..</p>

<p>The only thought I had was a list of dicts in the format:</p>

<pre><code>checker = [
{
    'name':'valid files',
    'type':'file',
    'function':check_valid(), # runs check_valid() on all files
    'status':0 # if it returns True, this is the status the file gets
}
</code></pre>
","<blockquote>
  <p>I want to add a rule that checks for
  the presence of a folder.jpg file in
  each directory, but to add this would
  make the code substantially more messy
  in it's current state..</p>
</blockquote>

<p>This doesn't look bad.  In fact your current code does it very nicely, and Sven mentioned a good way to do it as well:</p>

<ol>
<li>Get a list of all the files</li>
<li>Check for ""required"" files</li>
</ol>

<p>You would just have have add to your dictionary a list of required files:</p>

<pre><code>checker = {
  ...
  'required': ['file', 'list', 'for_required']
}
</code></pre>

<p>As far as there being a better/extensible way to do this?  I am not exactly sure.  I could only really think of a way to possibly drop the ""multiple"" regular expressions and build off of Sven's idea for using a delimiter.  So my strategy would be defining a dictionary as follows (and I'm sorry I don't know Python syntax and I'm a tad to lazy to look it up but it should make sense.  The /regex/ is shorthand for a regex):</p>

<pre><code>check_dict = {
  'delim'    : /\-/,
  'parts'    : [ 'Show Name', 'Episode Name', 'Episode Number' ],
  'patterns' : [/valid name/, /valid episode name/, /valid number/ ],
  'required' : ['list', 'of', 'files'],
  'ignored'  : ['.*', 'hidden.txt'],
  'start_dir': '/path/to/dir/to/test/'
}
</code></pre>

<ol>
<li>Split the filename based on the delimiter.</li>
<li>Check each of the parts.</li>
</ol>

<p>Because its an ordered list you can determine what parts are missing and if a section doesn't match any pattern it is malformed.  Here the <code>parts</code> and <code>patterns</code> have a 1 to 1 ratio.  Two arrays instead of a dictionary enforces the order.</p>

<p>Ignored and required files can be listed.  The <code>.</code> and <code>..</code> files should probably be ignored automatically.  The user should be allowed to input ""globs"" which can be shell expanded.  I'm thinking here of <code>svn:ignore</code> properties, but globbing is natural for listing files.</p>

<p>Here <code>start_dir</code> would be default to the current directory but if you wanted a single file to run automated testing of a bunch of directories this would be useful.</p>

<p>The real loose end here is the path template and along the same lines what path is required for ""valid files"".  I really couldn't come up with a solid idea without writing one large regular expression and taking groups from it... to build a template.  It felt a lot like writing a TextMate language grammar.  But that starts to stray on the ease of use.  The real problem was that the path template was not composed of <code>parts</code>, which makes sense but adds complexity.</p>

<p>Is this strategy in tune with what you were thinking of?</p>
",2
6,19030,python,2,How to check set of files conform to a naming scheme,"<p>I have a bunch of files (TV episodes, although that is fairly arbitrary) that I want to check match a specific naming/organisation scheme..</p>

<p>Currently: I have three arrays of regex, one for valid filenames, one for files missing an episode name, and one for valid paths.</p>

<p>Then, I loop though each valid-filename regex, if it matches, append it to a ""valid"" dict, if not, do the same with the missing-ep-name regexs, if it matches this I append it to an ""invalid"" dict with an error code (2:'missing epsiode name'), if it matches neither, it gets added to invalid with the 'malformed name' error code.</p>

<p>The current code can be found <a href=""http://github.com/dbr/checktveps/tree/8a6dc68ad61e684c8d8f0ca1dc37a22d1c51aa82/2checkTvEps.py"" rel=""nofollow"">here</a></p>

<p>I want to add a rule that checks for the presence of a folder.jpg file in each directory, but to add this would make the code substantially more messy in it's current state.. </p>

<p>How could I write this system in a more expandable way?</p>

<p>The rules it needs to check would be..</p>

<ul>
<li>File is in the format <code>Show Name - [01x23] - Episode Name.avi</code> or <code>Show Name - [01xSpecial02] - Special Name.avi</code> or <code>Show Name - [01xExtra01] - Extra Name.avi</code></li>
<li>If filename is in the format <code>Show Name - [01x23].avi</code> display it a 'missing episode name' section of the output</li>
<li>The path should be in the format <code>Show Name/season 2/the_file.avi</code> (where season 2 should be the correct season number in the filename)</li>
<li>each <code>Show Name/season 1/</code> folder should contain ""folder.jpg""</li>
</ul>

<p>.any ideas? While I'm trying to check TV episodes, this concept/code should be able to apply to many things..</p>

<p>The only thought I had was a list of dicts in the format:</p>

<pre><code>checker = [
{
    'name':'valid files',
    'type':'file',
    'function':check_valid(), # runs check_valid() on all files
    'status':0 # if it returns True, this is the status the file gets
}
</code></pre>
","<p>maybe you should take the approach of defaulting to: ""the filename is correct"" and work from there to disprove that statement:</p>

<p>with the fact that you only allow filenames with: 'show name', 'season number x episode number' and 'episode name', you know for certain that these items should be separated by a ""-"" (dash) so you have to have 2 of those for a filename to be correct.<br>
if that checks out, you can use your code to check that the show name matches the show name as seen in the parent's parent folder (case insensitive i assume), the season number matches the parents folder numeric value (with or without an extra 0 prepended).</p>

<p>if however you don't see the correct amount of dashes you instantly know that there is something wrong and stop before the rest of the tests etc.</p>

<p>and separately you can check if the file <code>folder.jpg</code> exists and take the necessary actions. <strong>or</strong> do that first and filter that file from the rest of the files in that folder.</p>
",0
84,67180,python,0,"mod_python/MySQL error on INSERT with a lot of data: ""OperationalError: (2006, 'MySQL server has gone away')""","<p>When doing an INSERT with a lot of data, ie:</p>

<pre><code>INSERT INTO table (mediumtext_field) VALUES ('...lots of text here: about 2MB worth...')
</code></pre>

<p>MySQL returns </p>

<blockquote>
  <p>""OperationalError: (2006, 'MySQL server has gone away')""</p>
</blockquote>

<p>This is happening within a minute of starting the script, so it is not a timeout issue. Also, <code>mediumtext_field</code> should be able to hold ~16MB of data, so that shouldn't be a problem.</p>

<p>Any ideas what is causing the error or how to work around it?</p>

<p>Some relevant libraries being used: <code>mod_python 3.3.1</code>, <code>MySQL 5.0.51</code> (on Windows XP SP3, via xampp, details below)</p>

<p><strong>ApacheFriends XAMPP (basic package) version 1.6.5</strong></p>

<ul>
<li>Apache 2.2.6</li>
<li>MySQL 5.0.51</li>
<li>phpMyAdmin 2.11.3</li>
</ul>
","<p>check the max_packet setting in your my.cnf file. this determines the largest amount of data you can send to your mysql server in a single statement. exceeding this values results in that error.</p>
",1
182,95950,python,0,Python reading Oracle path,"<p>On my desktop I have written a small Pylons app that connects to Oracle.   I'm now trying to deploy it to my server which is running Win2k3 x64. (My desktop is 32-bit XP) The Oracle installation on the server is also 64-bit.</p>

<p>I was getting errors about loading the OCI dll, so I installed the 32 bit client into <code>C:\oracle32</code>.</p>

<p>If I add this to the <code>PATH</code> environment variable, it works great.   But I also want to run the Pylons app as a service (<a href=""http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service"" rel=""nofollow"">using this recipe</a>) and don't want to put this 32-bit library on the path for all other applications.  </p>

<p>I tried using <code>sys.path.append(""C:\\oracle32\\bin"")</code> but that doesn't seem to work.</p>
","<p>If your Python application runs in the 64-bit space, you will need to access a 64-bit installation of Oracle's oci.dll, rather than the 32-bit version. Normally you would update the system path to include the appropriate Oracle Home bin directory, prior to running the script. The solution may also vary depending on what component you are using to access Oracle from Python.</p>
",0
181,95950,python,0,Python reading Oracle path,"<p>On my desktop I have written a small Pylons app that connects to Oracle.   I'm now trying to deploy it to my server which is running Win2k3 x64. (My desktop is 32-bit XP) The Oracle installation on the server is also 64-bit.</p>

<p>I was getting errors about loading the OCI dll, so I installed the 32 bit client into <code>C:\oracle32</code>.</p>

<p>If I add this to the <code>PATH</code> environment variable, it works great.   But I also want to run the Pylons app as a service (<a href=""http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service"" rel=""nofollow"">using this recipe</a>) and don't want to put this 32-bit library on the path for all other applications.  </p>

<p>I tried using <code>sys.path.append(""C:\\oracle32\\bin"")</code> but that doesn't seem to work.</p>
","<p>You need to append the c:\Oracle32\bin directory to the PATH variable of your environment before you execute python.exe.<br>
In Linux, I need to set up the LD_LIBRARY_PATH variable for similar reasons, to locate the Oracle libraries, before calling python. I use wrapper shell scripts that set the variable and then call Python.<br>
In your case, maybe you can call, in the service startup, a .cmd or .vbs script that sets the PATH variable and then calls python.exe with your .py script.</p>

<p>I hope this helps!</p>
",0
230,118540,python,0,What is wrong with my snap to grid code?,"<p>First of all, I'm fairly sure snapping to grid is fairly easy, however I've run into some odd trouble in this situation and my maths are too weak to work out specifically what is wrong.</p>

<p>Here's the situation</p>

<p>I have an abstract concept of a grid, with Y steps exactly Y_STEP apart (the x steps are working fine so ignore them for now)</p>

<p>The grid is in an abstract coordinate space, and to get things to line up I've got a magic offset in there, let's call it Y_OFFSET</p>

<p>to snap to the grid I've got the following code (python)</p>

<pre><code>def snapToGrid(originalPos, offset, step):
    index = int((originalPos - offset) / step) #truncates the remainder away
    return index * gap + offset
</code></pre>

<p>so I pass the cursor position, Y_OFFSET and Y_STEP into that function and it returns me the nearest floored y position on the grid</p>

<p>That appears to work fine in the original scenario, however when I take into account the fact that the view is scrollable things get a little weird.</p>

<p>Scrolling is made as basic as I can get it, I've got a viewPort that keeps count of the distance scrolled along the Y Axis and just offsets everything that goes through it.</p>

<p>Here's a snippet of the cursor's mouseMotion code:</p>

<pre><code>def mouseMotion(self, event):
    pixelPos = event.pos[Y]
    odePos = Scroll.pixelPosToOdePos(pixelPos)
    self.tool.positionChanged(odePos)
</code></pre>

<p>So there's two things to look at there, first the Scroll module's translation from pixel position to the abstract coordinate space, then the tool's positionChanged function which takes the abstract coordinate space value and snaps to the nearest Y step.</p>

<p>Here's the relevant Scroll code</p>

<pre><code>def pixelPosToOdePos(pixelPos):
    offsetPixelPos = pixelPos - self.viewPortOffset
    return pixelsToOde(offsetPixelPos)

def pixelsToOde(pixels):
    return float(pixels) / float(pixels_in_an_ode_unit)
</code></pre>

<p>And the tools update code</p>

<pre><code>def positionChanged(self, newPos):
    self.snappedPos = snapToGrid(originalPos, Y_OFFSET, Y_STEP)
</code></pre>

<p>The last relevant chunk is when the tool goes to render itself.  It goes through the Scroll object, which transforms the tool's snapped coordinate space position into an onscreen pixel position, here's the code:</p>

<pre><code>#in Tool
def render(self, screen):
    Scroll.render(screen, self.image, self.snappedPos)

#in Scroll
def render(self, screen, image, odePos):
    pixelPos = self.odePosToPixelPos(odePos)
    screen.blit(image, pixelPos) # screen is a surface from pygame for the curious

def odePosToPixelPos(self.odePos):
    offsetPos = odePos + self.viewPortOffset
    return odeToPixels(offsetPos)

def odeToPixels(odeUnits):
    return int(odeUnits * pixels_in_an_ode_unit)
</code></pre>

<p>Whew, that was a long explanation.  Hope you're still with me... </p>

<p>The problem I'm now getting is that when I scroll up the drawn image loses alignment with the cursor.<br />
It starts snapping to the Y step exactly 1 step below the cursor.
Additionally it appears to phase in and out of allignment.<br />
At some scrolls it is out by 1 and other scrolls it is spot on.<br />
It's never out by more than 1 and it's always snapping to a valid grid location.</p>

<p>Best guess I can come up with is that somewhere I'm truncating some data in the wrong spot, but no idea where or how it ends up with this behavior.</p>

<p>Anyone familiar with coordinate spaces, scrolling and snapping?</p>
","<p>Ok, I'm answering my own question here, as alexk mentioned, using int to truncate was my mistake.  </p>

<p>The behaviour I'm after is best modeled by math.floor().</p>

<p>Apologies, the original question does not contain enough information to really work out what the problem is.  I didn't have the extra bit of information at that point.</p>

<p>With regards to the typo note, I think I may be using the context in a confusing manner...  From the perspective of the positionChanged() function, the parameter is a new position coming in.<br />
From the perspective of the snapToGrid() function the parameter is an original position which is being changed to a snapped position.
The language is like that because part of it is in my event handling code and the other part is in my general services code.  I should have changed it for the example</p>
",1
229,118540,python,0,What is wrong with my snap to grid code?,"<p>First of all, I'm fairly sure snapping to grid is fairly easy, however I've run into some odd trouble in this situation and my maths are too weak to work out specifically what is wrong.</p>

<p>Here's the situation</p>

<p>I have an abstract concept of a grid, with Y steps exactly Y_STEP apart (the x steps are working fine so ignore them for now)</p>

<p>The grid is in an abstract coordinate space, and to get things to line up I've got a magic offset in there, let's call it Y_OFFSET</p>

<p>to snap to the grid I've got the following code (python)</p>

<pre><code>def snapToGrid(originalPos, offset, step):
    index = int((originalPos - offset) / step) #truncates the remainder away
    return index * gap + offset
</code></pre>

<p>so I pass the cursor position, Y_OFFSET and Y_STEP into that function and it returns me the nearest floored y position on the grid</p>

<p>That appears to work fine in the original scenario, however when I take into account the fact that the view is scrollable things get a little weird.</p>

<p>Scrolling is made as basic as I can get it, I've got a viewPort that keeps count of the distance scrolled along the Y Axis and just offsets everything that goes through it.</p>

<p>Here's a snippet of the cursor's mouseMotion code:</p>

<pre><code>def mouseMotion(self, event):
    pixelPos = event.pos[Y]
    odePos = Scroll.pixelPosToOdePos(pixelPos)
    self.tool.positionChanged(odePos)
</code></pre>

<p>So there's two things to look at there, first the Scroll module's translation from pixel position to the abstract coordinate space, then the tool's positionChanged function which takes the abstract coordinate space value and snaps to the nearest Y step.</p>

<p>Here's the relevant Scroll code</p>

<pre><code>def pixelPosToOdePos(pixelPos):
    offsetPixelPos = pixelPos - self.viewPortOffset
    return pixelsToOde(offsetPixelPos)

def pixelsToOde(pixels):
    return float(pixels) / float(pixels_in_an_ode_unit)
</code></pre>

<p>And the tools update code</p>

<pre><code>def positionChanged(self, newPos):
    self.snappedPos = snapToGrid(originalPos, Y_OFFSET, Y_STEP)
</code></pre>

<p>The last relevant chunk is when the tool goes to render itself.  It goes through the Scroll object, which transforms the tool's snapped coordinate space position into an onscreen pixel position, here's the code:</p>

<pre><code>#in Tool
def render(self, screen):
    Scroll.render(screen, self.image, self.snappedPos)

#in Scroll
def render(self, screen, image, odePos):
    pixelPos = self.odePosToPixelPos(odePos)
    screen.blit(image, pixelPos) # screen is a surface from pygame for the curious

def odePosToPixelPos(self.odePos):
    offsetPos = odePos + self.viewPortOffset
    return odeToPixels(offsetPos)

def odeToPixels(odeUnits):
    return int(odeUnits * pixels_in_an_ode_unit)
</code></pre>

<p>Whew, that was a long explanation.  Hope you're still with me... </p>

<p>The problem I'm now getting is that when I scroll up the drawn image loses alignment with the cursor.<br />
It starts snapping to the Y step exactly 1 step below the cursor.
Additionally it appears to phase in and out of allignment.<br />
At some scrolls it is out by 1 and other scrolls it is spot on.<br />
It's never out by more than 1 and it's always snapping to a valid grid location.</p>

<p>Best guess I can come up with is that somewhere I'm truncating some data in the wrong spot, but no idea where or how it ends up with this behavior.</p>

<p>Anyone familiar with coordinate spaces, scrolling and snapping?</p>
","<p>Thanks for the answer, there may be a typo, but I can't see it...</p>

<p>Unfortunately the change to snapToGrid didn't make a difference, so I don't think that's the issue.</p>

<p>It's not off by one pixel, but rather it's off by Y_STEP.  Playing around with it some more I've found that I can't get it to be exact at any point that the screen is scrolled up and also that it happens towards the top of the screen, which I suspect is ODE position zero, so I'm guessing my problem is around small or negative values.</p>
",0
228,118540,python,0,What is wrong with my snap to grid code?,"<p>First of all, I'm fairly sure snapping to grid is fairly easy, however I've run into some odd trouble in this situation and my maths are too weak to work out specifically what is wrong.</p>

<p>Here's the situation</p>

<p>I have an abstract concept of a grid, with Y steps exactly Y_STEP apart (the x steps are working fine so ignore them for now)</p>

<p>The grid is in an abstract coordinate space, and to get things to line up I've got a magic offset in there, let's call it Y_OFFSET</p>

<p>to snap to the grid I've got the following code (python)</p>

<pre><code>def snapToGrid(originalPos, offset, step):
    index = int((originalPos - offset) / step) #truncates the remainder away
    return index * gap + offset
</code></pre>

<p>so I pass the cursor position, Y_OFFSET and Y_STEP into that function and it returns me the nearest floored y position on the grid</p>

<p>That appears to work fine in the original scenario, however when I take into account the fact that the view is scrollable things get a little weird.</p>

<p>Scrolling is made as basic as I can get it, I've got a viewPort that keeps count of the distance scrolled along the Y Axis and just offsets everything that goes through it.</p>

<p>Here's a snippet of the cursor's mouseMotion code:</p>

<pre><code>def mouseMotion(self, event):
    pixelPos = event.pos[Y]
    odePos = Scroll.pixelPosToOdePos(pixelPos)
    self.tool.positionChanged(odePos)
</code></pre>

<p>So there's two things to look at there, first the Scroll module's translation from pixel position to the abstract coordinate space, then the tool's positionChanged function which takes the abstract coordinate space value and snaps to the nearest Y step.</p>

<p>Here's the relevant Scroll code</p>

<pre><code>def pixelPosToOdePos(pixelPos):
    offsetPixelPos = pixelPos - self.viewPortOffset
    return pixelsToOde(offsetPixelPos)

def pixelsToOde(pixels):
    return float(pixels) / float(pixels_in_an_ode_unit)
</code></pre>

<p>And the tools update code</p>

<pre><code>def positionChanged(self, newPos):
    self.snappedPos = snapToGrid(originalPos, Y_OFFSET, Y_STEP)
</code></pre>

<p>The last relevant chunk is when the tool goes to render itself.  It goes through the Scroll object, which transforms the tool's snapped coordinate space position into an onscreen pixel position, here's the code:</p>

<pre><code>#in Tool
def render(self, screen):
    Scroll.render(screen, self.image, self.snappedPos)

#in Scroll
def render(self, screen, image, odePos):
    pixelPos = self.odePosToPixelPos(odePos)
    screen.blit(image, pixelPos) # screen is a surface from pygame for the curious

def odePosToPixelPos(self.odePos):
    offsetPos = odePos + self.viewPortOffset
    return odeToPixels(offsetPos)

def odeToPixels(odeUnits):
    return int(odeUnits * pixels_in_an_ode_unit)
</code></pre>

<p>Whew, that was a long explanation.  Hope you're still with me... </p>

<p>The problem I'm now getting is that when I scroll up the drawn image loses alignment with the cursor.<br />
It starts snapping to the Y step exactly 1 step below the cursor.
Additionally it appears to phase in and out of allignment.<br />
At some scrolls it is out by 1 and other scrolls it is spot on.<br />
It's never out by more than 1 and it's always snapping to a valid grid location.</p>

<p>Best guess I can come up with is that somewhere I'm truncating some data in the wrong spot, but no idea where or how it ends up with this behavior.</p>

<p>Anyone familiar with coordinate spaces, scrolling and snapping?</p>
","<p>Do you have a typo in positionChanged() ?</p>

<pre><code>def positionChanged(self, newPos):
    self.snappedPos = snapToGrid(newPos, Y_OFFSET, Y_STEP)
</code></pre>

<p>I guess you are off by one pixel because of the accuracy problems during float division. Try changing your snapToGrid() to this:</p>

<pre><code>def snapToGrid(originalPos, offset, step):
    EPS = 1e-6
    index = int((originalPos - offset) / step  + EPS) #truncates the remainder away
    return index * gap + offset
</code></pre>
",0
180,95950,python,0,Python reading Oracle path,"<p>On my desktop I have written a small Pylons app that connects to Oracle.   I'm now trying to deploy it to my server which is running Win2k3 x64. (My desktop is 32-bit XP) The Oracle installation on the server is also 64-bit.</p>

<p>I was getting errors about loading the OCI dll, so I installed the 32 bit client into <code>C:\oracle32</code>.</p>

<p>If I add this to the <code>PATH</code> environment variable, it works great.   But I also want to run the Pylons app as a service (<a href=""http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service"" rel=""nofollow"">using this recipe</a>) and don't want to put this 32-bit library on the path for all other applications.  </p>

<p>I tried using <code>sys.path.append(""C:\\oracle32\\bin"")</code> but that doesn't seem to work.</p>
","<p>sys.path is python's internal representation of the PYTHONPATH, it sounds to me like you want to modify the PATH.</p>

<p>I'm not sure that this will work, but you can try:</p>

<pre><code>import os
os.environ['PATH'] += os.pathsep + ""C:\\oracle32\\bin""
</code></pre>
",2
